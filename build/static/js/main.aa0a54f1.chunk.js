(this.webpackJsonpthor=this.webpackJsonpthor||[]).push([[1],{105:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=e.localStorage,r=e.location,c="development"===n.getItem("env")?"development":"sky-alpha.terraqt.ink"===r.hostname||"localhost"===r.hostname?"production"===n.getItem("env")?"production":"development":"production";function l(){return"development"===c?"http://dev-node-01.host.terraqt.net:8080":"https://new-api.terraqt.com"}}).call(this,a(114))},1132:function(e,t,a){},1134:function(e,t,a){},1135:function(e,t,a){},1144:function(e,t,a){},1145:function(e,t,a){},1164:function(e,t,a){},1229:function(e,t,a){},1230:function(e,t,a){},1231:function(e,t,a){},1232:function(e,t,a){},1233:function(e,t,a){},1234:function(e,t,a){},1235:function(e,t,a){},1236:function(e,t,a){},1237:function(e,t,a){},1238:function(e,t,a){},1270:function(e,t,a){},1273:function(e,t,a){},1275:function(e,t,a){},1277:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),i=(a(659),a(19)),u=a(637),o=a(51),s=a.n(o),m=(a(661),a(5)),p=a.n(m),d=a(10),f=a(8),b=a(93),v=a(94),g=a(17),O=new(function(){function e(){Object(b.a)(this,e)}return Object(v.a)(e,[{key:"getAllTagSettings",value:function(){return g.c.invoke("SampleService.getAllTagSettings")}},{key:"saveTagSettings",value:function(e,t){return g.c.invoke("SampleService.saveTagSettings",{tagCode:e,settings:t})}},{key:"deleteTagSettings",value:function(e){return g.c.invoke("SampleService.deleteTagSettings",{tagCode:e})}},{key:"getAllTagColors",value:function(){return g.c.invoke("SampleService.getAllTagColors")}}]),e}()),k=new(function(){function e(){Object(b.a)(this,e)}return Object(v.a)(e,[{key:"getCurrentProfile",value:function(){return g.d.invoke("ProfileService.getCurrentProfile")}},{key:"upload",value:function(e,t){return g.c.invoke("UploadService.upload",{fileName:e,data:t})}},{key:"queryAvailableSatellite",value:function(){return g.c.invoke("QueryService.queryAllSpacecraft")}},{key:"queryIntersectTilesByPoint",value:function(e,t,a){return g.b.invoke("GridService.queryIntersectTilesByPoint",{gridType:e,lon:t,lat:a})}}]),e}()),h=function(){var e=Object(n.useState)({}),t=Object(f.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),l=Object(f.a)(c,2),i=l[0],u=l[1],o=Object(n.useState)([]),s=Object(f.a)(o,2),m=s[0],b=s[1],v=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getCurrentProfile();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[]),g=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAllTagSettings();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)}))),[]),h=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAllTagColors();case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(n.useEffect)((function(){v(),g(),h()}),[h,g,v]),{profile:a,tagSettings:i,tagColors:m,getCurrentProfile:v,getAllTagSettings:g,getAllTagColors:h}},y=a(41),E=a(7),j=(a(58),a(14)),C=new(function(){function e(){Object(b.a)(this,e),this.getAllSampleTags=function(){return g.c.invoke("SampleService.getAllSampleTags")},this.upload=function(e,t){return g.c.invoke("UploadService.upload",{fileName:e,data:t})}}return Object(v.a)(e,[{key:"getTopRegion",value:function(){return g.b.invoke("RegionService.getTopRegion")}},{key:"getRegionChildren",value:function(e){return g.b.invoke("RegionService.getChildren",{code:e})}},{key:"getDescendant",value:function(e){return g.b.invoke("RegionService.getDescendant",{code:e})}},{key:"getRegionNode",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.b.invoke("RegionService.getRegionNode",{code:t});case 2:return a=e.sent,e.abrupt("return",Object(E.a)(Object(E.a)({},a),{},{boundary:JSON.parse(a.boundary)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRegion",value:function(e){return g.b.invoke("RegionService.getNode",{code:e})}},{key:"queryAvailableSatellite",value:function(){return g.c.invoke("QueryService.queryAllSpacecraft")}}]),e}()),S=a(172),T=a.n(S);function x(e,t){return e.reduce((function(e,a){return t&&(a.path=a.path||[a.id],a.children&&a.children.length&&a.children.forEach((function(e){e.path=[].concat(Object(y.a)(a.path),[e.id])}))),a.children&&a.children.length?[].concat(Object(y.a)(e),[a],Object(y.a)(x(a.children,t))):[].concat(Object(y.a)(e),[a])}),[])}function w(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")?j.b.success("\u590d\u5236\u6210\u529f\uff01"):j.b.error("\u590d\u5236\u5931\u8d25!")}catch(a){j.b.error("\u590d\u5236\u5931\u8d25\uff01")}document.body.removeChild(t)}var I=a(92);var N=function(){var e=function(){var e=Object(n.useState)({tags:[],flatedTags:[]}),t=Object(f.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getAllSampleTags();case 3:t=e.sent,(a=x(t,!0)).forEach((function(e){var t=e.children;e.value=e.id,e.label=e.name,e.children=t.length?t:null})),r({tags:t,flatedTags:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),a}(),t=e.tags,a=e.flatedTags,r=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),r=a[0],c=a[1],l=r.length?[{id:-110,value:-110,label:"\u6700\u8fd1\u4f7f\u7528",children:e.length?e.filter((function(e){return r.find((function(t){return e.id===t}))})).map((function(e){return Object(E.a)(Object(E.a)({},e),{},{children:null})})):null}]:[],i=Object(n.useCallback)((function(e){var t=Object(y.a)(r);r.find((function(t){return t===e}))||(t=t.length>15?[].concat(Object(y.a)(t.slice(1,16)),[e]):[].concat(Object(y.a)(t),[e]),Object(I.e)("sky-object-tag-ids",JSON.stringify(t)),c(t))}),[r]);return Object(n.useEffect)((function(){try{var e=Object(I.a)("sky-object-tag-ids"),t=e?JSON.parse(e):[];c(t)}catch(a){console.error(a)}}),[]),[l,i]}(a),c=Object(f.a)(r,2);return{tags:t,flatedTags:a,localTags:c[0],addLocalTag:c[1]}},A={type:null,items:[],onChange:function(){}},M=function(){var e=Object(n.useState)(A),t=Object(f.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(f.a)(c,2),i=l[0],u=l[1];return{options:a,mount:Object(n.useCallback)((function(e){setTimeout((function(){var t=e.onChange;r(Object(E.a)(Object(E.a)({},e),{},{onChange:function(e){t(e),u(e)}}))}))}),[r]),unMount:Object(n.useCallback)((function(){r(A)}),[]),active:i,setActive:u}},L=Object(n.createContext)({}),D=function(e){var t=e.children,a={account:h(),headerNav:M(),groundObjectTags:N()};return r.a.createElement(L.Provider,{value:a},t)},R=function(){return Object(n.useContext)(L)},q=a(34),P=a(89),F=(a(287),a(146)),K=(a(730),a(377),a(147)),Y=(a(733),a(222)),U=(a(378),a(57)),G=(a(738),a(194)),V=(a(379),a(139)),B=(a(741),V.a.TabPane),z=function(e){var t=e.nav,a=t.options,n=t.active;return r.a.createElement("div",{className:"header-nav-container"},"breadcrumb"===a.type&&r.a.createElement(G.a,null,a.items.map((function(e,t){return r.a.createElement(G.a.Item,{key:t,onClick:function(){return a.onChange(e.key)}},e.name)}))),"tabs"===a.type&&r.a.createElement(V.a,{onChange:a.onChange,activeKey:n},a.items.map((function(e){return r.a.createElement(B,{tab:e.name,key:e.key})}))))},H=a(558),J=(a(454),F.a.Header),W=function(e){e.location;var t=R(),a=t.account,n=t.headerNav,c=a.profile,l=r.a.createElement(U.a,null,r.a.createElement(U.a.Item,null,c.username),r.a.createElement(U.a.Item,null,r.a.createElement("a",{href:"http://sso.terraqt.ink"},"\u9000\u51fa\u767b\u5f55")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{id:"header"},r.a.createElement(z,{nav:n}),r.a.createElement(K.a,{overlay:l},r.a.createElement(Y.a,{className:"header-avatar",icon:r.a.createElement(H.a,null)}))))},Q=a(559),_=a(560),X=a(561),Z=a(562),$=a(563),ee=a(564),te=a(565),ae=a(580),ne=a.n(ae),re=a(581),ce=a.n(re),le=F.a.Sider,ie=U.a.SubMenu,ue=function(e){var t=e.location,a=Object(n.useState)([]),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(""),o=Object(f.a)(u,2),s=o[0],m=o[1],p=Object(n.useState)(!1),d=Object(f.a)(p,2),b=d[0],v=d[1],g=function(e,t){i(e?[]:[t.split("-")[0]]),setTimeout((function(){v(e)}))};return Object(n.useEffect)((function(){if(t.pathname){m(t.pathname);var e=t.pathname.split("-")[0],a=t.pathname.lastIndexOf("/"),n=t.pathname.substring(0,a);i([n,e])}}),[t.pathname]),r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{className:"sidebar",trigger:null,collapsible:!0,collapsed:b,collapsedWidth:"64"},r.a.createElement("div",{className:"sider-logo-container"},!b&&r.a.createElement("img",{className:"sider-logo",src:ce.a,alt:"logo"}),b&&r.a.createElement("img",{className:"sider-logo-collapsed",src:ne.a,alt:"logo"}),b?r.a.createElement(Q.a,{className:"menu-fold",onClick:function(){return g(!b,s)}}):r.a.createElement(_.a,{className:"menu-fold",onClick:function(){return g(!b,s)}})),r.a.createElement(U.a,{theme:"dark",mode:"inline",selectedKeys:s,openKeys:l,onOpenChange:i,className:"terraqt-menu"},r.a.createElement(ie,{className:"terraqt-submenu",key:"/app/data",title:r.a.createElement("span",null,r.a.createElement(X.a,null),r.a.createElement("span",null,"\u6570\u636e\u7ba1\u7406"))},r.a.createElement(ie,{key:"/app/data/satellite",title:r.a.createElement("span",null,"\u536b\u661f\u6570\u636e")},r.a.createElement(U.a.Item,{key:"/app/data/satellite-download"},r.a.createElement(q.b,{to:"/app/data/satellite-download"},"\u6570\u636e\u4e0b\u8f7d")),r.a.createElement(U.a.Item,{key:"/app/data/satellite-tasks"},r.a.createElement(q.b,{to:"/app/data/satellite-tasks"},"\u4efb\u52a1\u5217\u8868"))),r.a.createElement(ie,{key:"/app/data/tag",title:r.a.createElement("span",null,"\u5143\u6570\u636e")},r.a.createElement(U.a.Item,{key:"/app/data/tag-samples"},r.a.createElement(q.b,{to:"/app/data/tag-samples"},"\u6837\u672c\u6807\u7b7e")),r.a.createElement(U.a.Item,{key:"/app/data/tag-regions"},r.a.createElement(q.b,{to:"/app/data/tag-regions"},"\u884c\u653f\u533a\u5212"))),r.a.createElement(U.a.Item,{key:"/app/data-wave"},r.a.createElement(q.b,{to:"/app/data-wave"},"\u6570\u636e\u8c03\u8bd5"))),r.a.createElement(ie,{className:"terraqt-submenu",key:"/app/standard",title:r.a.createElement("span",null,r.a.createElement(Z.a,null),r.a.createElement("span",null,"\u6807\u54c1\u7ba1\u7406"))},r.a.createElement(U.a.Item,{key:"/app/standard-publish"},r.a.createElement(q.b,{to:"/app/standard-publish"},"\u53d1\u5e03\u7ba1\u7406")),r.a.createElement(U.a.Item,{key:"/app/standard-categories"},r.a.createElement(q.b,{to:"/app/standard-categories"},"\u4ea7\u54c1\u5206\u7c7b\u7ba1\u7406")),r.a.createElement(U.a.Item,{key:"/app/standard-cors"},r.a.createElement(q.b,{to:"/app/standard-cors"},"COR\u7ba1\u7406")),r.a.createElement(U.a.Item,{key:"/app/standard-ders"},r.a.createElement(q.b,{to:"/app/standard-ders"},"DER\u7ba1\u7406")),r.a.createElement(U.a.Item,{key:"/app/standard-enas"},r.a.createElement(q.b,{to:"/app/standard-enas"},"\u901a\u7528\u80fd\u529b\u7ba1\u7406"))),r.a.createElement(ie,{className:"terraqt-submenu",key:"/app/sample",title:r.a.createElement("span",null,r.a.createElement($.a,null),r.a.createElement("span",null,"\u6837\u672c\u7ba1\u7406"))},r.a.createElement(U.a.Item,{key:"/app/sample-task"},r.a.createElement(q.b,{to:"/app/sample-task"},"\u6837\u672c\u6807\u6ce8")),r.a.createElement(U.a.Item,{key:"/app/sample-file"},r.a.createElement(q.b,{to:"/app/sample-file"},"\u6837\u672c\u4e0a\u4f20")),r.a.createElement(U.a.Item,{key:"/app/sample-dataUpload"},r.a.createElement(q.b,{to:"/app/sample-dataUpload"},"\u5916\u4e1a\u4e0a\u4f20")),r.a.createElement(U.a.Item,{key:"/app/sample-management"},r.a.createElement(q.b,{to:"/app/sample-management"},"\u6837\u672c\u67e5\u8be2"))),r.a.createElement(ie,{className:"terraqt-submenu",key:"/app/algorithm",title:r.a.createElement("span",null,r.a.createElement(ee.a,null),r.a.createElement("span",null,"\u7b97\u6cd5\u5e73\u53f0"))},r.a.createElement(U.a.Item,{key:"/app/algorithm-space"},r.a.createElement(q.b,{to:"/app/algorithm-space"},"WorkSpace"))),r.a.createElement(ie,{className:"terraqt-submenu",key:"/app/tools",title:r.a.createElement("span",null,r.a.createElement(te.a,null),r.a.createElement("span",null,"\u5e38\u7528\u5de5\u5177"))},r.a.createElement(U.a.Item,{key:"/app/tools-upload"},r.a.createElement(q.b,{to:"/app/tools-upload"},"\u6587\u4ef6\u4e0a\u4f20"))),r.a.createElement(ie,{className:"terraqt-submenu",key:"/app/account",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null," \u8d26\u6237\u8bbe\u7f6e"))},r.a.createElement(U.a.Item,{key:"/app/account-marks-color"},r.a.createElement(q.b,{to:"/app/account-marks-color"},"\u6807\u7b7e\u989c\u8272"))))))};function oe(){return new URLSearchParams(Object(P.h)().search)}a(76);var se,me,pe,de,fe,be,ve,ge,Oe=a(40),ke=(a(46),a(11)),he=(a(68),a(24)),ye=(a(170),a(63)),Ee=a(83),je=function(e){return function(t,a,n){var r=n.value;return n.value=function(){var t=Object(d.a)(p.a.mark((function t(){var a=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.apply(void 0,a).then((function(t){return e&&j.b.success(e),t})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n}},Ce=function(e){return function(t,a,n){var r=n.value;return n.value=function(){var t=Object(d.a)(p.a.mark((function t(){var a=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.apply(void 0,a).then((function(t){return 0===t.length&&j.b.warning(e),t})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n}},Se=function(e){return function(t,a,n){var r=n.value;return n.value=function(){var t=Object(d.a)(p.a.mark((function t(){var a=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.apply(void 0,a).catch((function(t){throw j.b.error("".concat(e," - ").concat(t.message)),t})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n}},Te=new(se=Ce("\u672a\u67e5\u8be2\u5230\u7b26\u5408\u6761\u4ef6\u7684\u6807\u7b7e!"),me=Se("\u670d\u52a1\u7aef\u9519\u8bef"),pe=Ce("\u672a\u67e5\u8be2\u5230\u7b26\u5408\u6761\u4ef6\u7684\u6807\u7b7e!"),de=Se("\u670d\u52a1\u7aef\u9519\u8bef"),fe=je("\u66f4\u65b0\u6210\u529f"),be=Se("\u670d\u52a1\u7aef\u9519\u8bef,\u66f4\u65b0\u5931\u8d25"),ve=Se("\u670d\u52a1\u7aef\u9519\u8bef,\u521b\u5efa\u5931\u8d25"),ge=function(){function e(){Object(b.a)(this,e),this.queryDownloadCondition=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("DownloadService.queryDownloadCondition",{truckId:t});case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return",{noInfo:{message:"\u9884\u9009\u4e0b\u8f7d\u65e0\u65f6\u7a7a\u4fe1\u606f~"}});case 5:return n=a.timeRange,r=a.downloadShape,e.abrupt("return",{timeRange:{beginTime:n.beginTime.slice(0,10),endTime:n.endTime.slice(0,10),includeMonths:n.includeMonths.reduce((function(e,t){return"".concat(e).concat(t,"\u6708\u3001")}),"")},dataType:a.dataType,shape:{type:r.type,value:"SHAPE"===r.type?JSON.parse(r.value):r.value,description:r.description}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(v.a)(e,[{key:"queryDataList",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("QueryService.query",{downloadCondition:{timeRange:t,downloadShape:n,dataType:a}});case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{time:e.time?e.time.slice(0,10):"\u6682\u65e0",cloudCover:e.cloudCover?e.cloudCover.toFixed(2):"\u6682\u65e0"})})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"downloadConditionalData",value:function(e,t,a,n){return g.c.invoke("DownloadService.downloadByIds",{name:e,priority:t,items:a,mode:n})}},{key:"downloadBatchData",value:function(e,t,a,n){return g.c.invoke("DownloadService.download",{downloadCondition:e,name:t,priority:a,mode:n})}},{key:"queryTasksByMode",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("DownloadService.queryTasksByMode",{mode:t});case 2:if(a=e.sent,"GAZING"!==t){e.next=5;break}return e.abrupt("return",a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{updatedAt:e.updatedAt?e.updatedAt.slice(0,10):"\u6682\u65e0"})})));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryBatchInfos",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("DownloadService.queryBatchInfos",{truckId:t.id});case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{startTime:e.startTime?e.startTime.slice(0,10):"\u6682\u65e0",finishedTime:e.finishedTime?e.finishedTime.slice(0,10):"\u6682\u65e0"})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryBatchDetails",value:function(e){return g.c.invoke("DownloadService.queryBatchDetails",{batchNumber:e.batchNumber})}},{key:"changeStatus",value:function(e,t){return g.c.invoke("DownloadService.operate",{truckId:e.id,operation:t})}},{key:"getAllWaves",value:function(){return g.c.invoke("DataDebugService.getAllWaves")}},{key:"createWaveTask",value:function(e,t){return g.c.invoke("DataDebugService.createTask",{condition:e,name:t})}},{key:"getWaveTasksList",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("DataDebugService.getAllTasks");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{createdAt:e.createdAt.slice(0,10)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"queryWaveInfo",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("DataDebugService.getCondition",{taskId:t});case 2:return a=e.sent,n=a.timeRange,r=a.shape,e.abrupt("return",{timeRange:{beginTime:n.beginTime.slice(0,10),endTime:n.endTime.slice(0,10),includeMonths:n.includeMonths.reduce((function(e,t){return"".concat(e).concat(t,"\u6708\u3001")}),"")},waves:a.waves.map((function(e){return e+",  "})),shape:{type:r.type,value:"SHAPE"===r.type?JSON.parse(r.value):r.value,description:r.description}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryWaveDataInfo",value:function(e){return g.c.invoke("DataDebugService.getResult",{taskId:e})}},{key:"deleteWaveTask",value:function(e){return g.c.invoke("DataDebugService.deleteTask",{taskId:e})}},{key:"searchRegion",value:function(e,t){return g.b.invoke("RegionService.searchRegion",{searchType:e,value:t})}},{key:"searchLabel",value:function(e,t){return g.b.invoke("LabelService.searchLabel",{searchType:e,value:t})}},{key:"updateLabelName",value:function(e,t){return g.b.invoke("LabelService.updateLabelName",{id:e,name:t})}},{key:"createLabel",value:function(e,t,a){return g.b.invoke("LabelService.create",{selectedCode:e,name:t,position:a})}},{key:"getAllLabel",value:function(){return g.b.invoke("LabelService.getAllLabel")}}]),e}(),Object(Ee.a)(ge.prototype,"searchRegion",[se,me],Object.getOwnPropertyDescriptor(ge.prototype,"searchRegion"),ge.prototype),Object(Ee.a)(ge.prototype,"searchLabel",[pe,de],Object.getOwnPropertyDescriptor(ge.prototype,"searchLabel"),ge.prototype),Object(Ee.a)(ge.prototype,"updateLabelName",[fe,be],Object.getOwnPropertyDescriptor(ge.prototype,"updateLabelName"),ge.prototype),Object(Ee.a)(ge.prototype,"createLabel",[ve],Object.getOwnPropertyDescriptor(ge.prototype,"createLabel"),ge.prototype),ge),xe=a(103),we=(a(765),a(67)),Ie=(a(249),a(116)),Ne=function(e){var t=e.value,a=e.options,n=e.onChange,c=a.required,l=a.help,i=a.label,u=a.valueKey,o=Object(we.a)(a,["required","help","label","valueKey"]),s=i||"\u9009\u62e9\u65e5\u671f";return r.a.createElement(he.a.Item,{label:s,required:c,help:l},r.a.createElement(Ie.a,Object.assign({},o,{value:t[u],onChange:function(e){return n(u,e,t)}})))},Ae=Ie.a.RangePicker,Me=function(e){var t=e.value,a=e.options,c=e.onChange,l=a.required,i=a.help,u=a.label,o=a.valueKey,s=a.onChange,m=void 0===s?function(){}:s,p=Object(we.a)(a,["required","help","label","valueKey","onChange"]),d=u||"\u65f6\u95f4\u8303\u56f4",f=Object(n.useCallback)((function(e,t,a){m(e,t,a),c(e,t,a)}),[c,m]);return r.a.createElement(he.a.Item,{label:d,required:l,help:i},r.a.createElement(Ae,Object.assign({},p,{value:t[o],onChange:function(e){return f(o,e,t)}})))},Le=(a(123),a(66)),De=function(e){var t=e.value,a=e.options,n=e.onChange,c=a.required,l=a.help,i=a.label,u=a.valueKey,o=a.hideLabel,s=void 0!==o&&o,m=Object(we.a)(a,["required","help","label","valueKey","hideLabel"]),p=s?null:i||"\u8f93\u5165\u5185\u5bb9";return r.a.createElement(he.a.Item,{label:p,required:c,help:l},r.a.createElement(Le.a,Object.assign({placeholder:"\u8bf7\u8f93\u5165"},m,{value:t[u],onChange:function(e){return n(u,e.target.value,t)}})))},Re=(a(464),a(195)),qe=function(e){var t=e.value,a=e.options,n=e.onChange,c=a.required,l=a.help,i=a.label,u=a.valueKey,o=Object(we.a)(a,["required","help","label","valueKey"]),s=i||"\u8f93\u5165\u6570\u5b57";return r.a.createElement(he.a.Item,{label:s,required:c,help:l},r.a.createElement(Re.a,Object.assign({},o,{value:t[u],onChange:function(e){return n(u,e,t)}})))},Pe=(a(144),a(62)),Fe=Pe.a.Option,Ke=function(e){var t=e.value,a=e.options,c=e.onChange,l=a.required,i=a.help,u=a.label,o=a.valueKey,s=a.optionSource,m=a.onChange,p=void 0===m?function(){}:m,d=Object(we.a)(a,["required","help","label","valueKey","optionSource","onChange"]),f=s||[],b=u||"\u8bf7\u9009\u62e9",v=Object(n.useCallback)((function(e,t,a){p(e,t,a),c(e,t,a)}),[c,p]);return r.a.createElement(he.a.Item,{label:b,required:l,help:i},r.a.createElement(Pe.a,Object.assign({placeholder:"\u8bf7\u9009\u62e9"},d,{value:t[o],onChange:function(e){return v(o,e,t)}}),f.map((function(e){return r.a.createElement(Fe,{key:e.value,value:e.value,disabled:!0===e.disabled},e.name)}))))},Ye=(a(252),a(96)),Ue=(a(858),Ie.a.RangePicker),Ge=Array.from({length:12},(function(e,t){return t+1})),Ve=Ge.map((function(e){return{value:e,label:"".concat(e,"\u6708"),disabled:!1}})),Be={dates:[],includeMonths:Ge},ze=function(e){var t=e.value,a=void 0===t?null:t,c=e.onChange,l=e.className,i=Object(we.a)(e,["value","onChange","className"]),u=Object(n.useState)(Be),o=Object(f.a)(u,2),m=o[0],p=o[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),v=b[0],g=b[1],O=Object(n.useState)(Ge),k=Object(f.a)(O,2),h=k[0],y=k[1],j=Object(n.useRef)(null),C=l?"time-ranger-including ".concat(l):"time-ranger-including",S=Object(n.useMemo)((function(){return Ve.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{disabled:!(!h||!h.find((function(t){return t===e.value})))})}))}),[h]),T=Object(n.useCallback)((function(e,t){var a=[];if(e[1].diff(e[0],"month")<12)for(var n=s()(e[0]);e[1]>n||n.format("M")===e[1].format("M");)a.push(parseInt(n.format("M"))),n.add(1,"month");else a=Ge;y(Ge.filter((function(e){return!a.find((function(t){return e===t}))}))),p({dates:e,includeMonths:a})}),[]),x=Object(n.useCallback)((function(){g(!1)}),[]),w=Object(n.useCallback)((function(e){c(e),x()}),[x,c]);return Object(n.useEffect)((function(){var e=a||{};p(Object(E.a)(Object(E.a)({},Be),e))}),[a]),r.a.createElement(Ue,Object.assign({ref:j,className:C,allowClear:!1,format:"YYYY-MM-DD",placeholder:["\u8d77\u59cb\u65e5\u671f","\u622a\u6b62\u65e5\u671f"],onFocus:function(){return g(!0)},open:v,value:m.dates,onChange:T},i,{renderExtraFooter:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a.Group,{className:"time-ranger-include-months",value:m.includeMonths,options:S,onChange:function(e){p(Object(E.a)(Object(E.a)({},m),{},{includeMonths:e}))}}),r.a.createElement("div",{className:"time-ranger-btns"},r.a.createElement(ke.a,{className:"time-ranger-OKbtn",key:"ok",type:"primary",disabled:(m.dates&&m.dates.length)<2||0===m.includeMonths.length,onClick:function(){return w(m)}},"\u786e\u8ba4"),r.a.createElement(ke.a,{key:"cancel",onClick:x},"\u53d6\u6d88")))}}))},He=function(e){var t=e.value,a=e.options,n=e.onChange,c=a.required,l=a.help,i=a.label,u=a.valueKey,o=Object(we.a)(a,["required","help","label","valueKey"]),s=i||"\u65f6\u95f4\u8303\u56f4";return r.a.createElement(he.a.Item,{label:s,required:c,help:l},r.a.createElement(ze,Object.assign({},o,{value:t[u],onChange:function(e){return n(u,e,t)}})))},Je=a(576),We=(a(130),a(77)),Qe=a(45),_e=Qe.TMap.Toolbar,Xe=function(e){var t=e.setPolygon,a=Object(Qe.useLeaflet)().map,r=Object(n.useState)(null),c=Object(f.a)(r,2),l=c[0],i=c[1],u=Object(n.useCallback)((function(e){var n=e.layer||e.layers.getLayers()[0];l&&a.removeLayer(l),a.addLayer(e.layer),a.tool.edit.trigger(e.layer),a.tool.delete.trigger(e.layer),i(e.layer);var r=n.toGeoJSON();t(r)}),[t,a,l]),o=Object(n.useCallback)((function(){t(null),a.removeLayer(l),i(null)}),[a,l,t]),s=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.geojson&&t(a.geojson);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(n.useEffect)((function(){if(a)return a.tool.off("tool.draw:polygon",u),a.tool.off("tool.edit:save",s),a.tool.off("tool.delete:remove",o),a.tool.on("tool.draw:polygon",u),a.tool.on("tool.edit:save",s),a.tool.on("tool.delete:remove",o),function(){a.tool.off("tool.draw:polygon",u),a.tool.off("tool.edit:save",s),a.tool.off("tool.delete:remove",o)}}),[a,u,o,s]),null},Ze=function(e){var t=e.onChange,a=Object(n.useState)(null),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(!1),o=Object(f.a)(u,2),s=o[0],m=o[1],p=Object(n.useCallback)((function(){t(l),m(!1)}),[t,l]);return r.a.createElement("div",{className:"polygon-drawer"},r.a.createElement(ke.a,{type:"default",htmlType:"submit",onClick:function(){return m(!0)}},"\u70b9\u51fb\u5708\u9009"),r.a.createElement(We.a,{className:"sample-modal-content",title:"\u8bf7\u5708\u9009\u533a\u57df",visible:s,onOk:p,okButtonProps:{disabled:!l},onCancel:function(){return m(!1)},maskClosable:!1},r.a.createElement(Qe.TMap,null,r.a.createElement(Xe,{setPolygon:i}),r.a.createElement(_e,{options:{enables:["lasso","edit","delete"]}}))))},$e=(a(299),a(149));a(970);function et(){return tt.apply(this,arguments)}function tt(){return(tt=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getTopRegion();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{label:e.title})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRegionChildren(t);case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{label:e.title})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRegion(t);case 2:return a=e.sent,e.abrupt("return",Object(E.a)(Object(E.a)({},a),{},{label:a.title}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt=function(e){var t=e.topCode,a=e.onSelect,c=e.placeholder,l=e.className,i=Object(n.useState)([]),u=Object(f.a)(i,2),o=u[0],s=u[1],m=Object(n.useState)([]),b=Object(f.a)(m,2),v=b[0],g=b[1],O=Object(n.useState)(c||"\u70b9\u51fb\u6b64\u5904\uff0c\u9009\u62e9\u533a\u57df"),k=Object(f.a)(O,2),h=k[0],E=k[1],j=l?"sky-admin-region-input ".concat(l):"sky-admin-region-input",C=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t[t.length-1]).isLeaf){e.next=9;break}return n.loading=!0,e.next=5,at(n.value);case 5:r=e.sent,n.loading=!1,r&&(n.children=r),s(Object(y.a)(a));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([rt(t),at(t)]);case 2:a=e.sent,n=Object(f.a)(a,2),r=n[0],c=n[1],r.children=c.length?c:null,s([r]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t?(!function(t){e.apply(this,arguments)}(t),g([t])):function(){a.apply(this,arguments)}(),E("\u70b9\u51fb\u6b64\u5904\uff0c\u9009\u62e9\u533a\u57df")}),[t]),r.a.createElement($e.a,{loadData:function(e){return C(e,o)},options:o,value:v,changeOnSelect:!0,onChange:function(e,t){var n=e[e.length-1];g(e),a(n),E(t.map((function(e){return e.label})).join(" / "))}},r.a.createElement(Pe.a,{className:j,maxTagTextLength:10,value:h,open:!1}))},it=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsText(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},ut=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=t.dataTransfer&&t.dataTransfer.files||t.target.files).length){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Promise.all(Array.from(a).map(function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.type,r=t.size,c=t.lastModified,e.next=3,it(t);case 3:return l=e.sent,e.abrupt("return",{name:a,size:r,type:n,lastModified:c,text:l});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},st=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Promise.all(Array.from(t).map(function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.type,r=t.size,c=t.lastModified,e.next=3,ot(t);case 3:return l=e.sent,e.abrupt("return",{name:a,size:r,type:n,lastModified:c,base64:l});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=Pe.a.Option,pt=[{key:"Tile\u7f16\u53f7",value:"TILE"},{key:"\u884c\u653f\u533a\u5212",value:"ADMINISTRATIVE_REGION"},{key:"\u624b\u52a8\u5212\u533a",value:"SHAPE"}],dt=function(e){var t=e.value,a=e.options,c=e.onChange,l=Object(n.useState)({lon:null,lat:null}),i=Object(f.a)(l,2),u=i[0],o=i[1],s=a.required,m=a.help,b=a.label,v=a.valueKey,g=b||"\u7a7a\u95f4\u8303\u56f4",O=a.spaceOptions||pt,k=Object(n.useCallback)((function(e,t,a,n){o(Object(E.a)(Object(E.a)({},t),{},{lon:e})),c(n,{type:"POINTER",lon:e,lat:t.lat},a)}),[c]),h=Object(n.useCallback)((function(e,t,a,n){o(Object(E.a)(Object(E.a)({},t),{},{lat:e})),c(n,{type:"POINTER",lon:t.lon,lat:e},a)}),[c]),y=Object(n.useCallback)((function(e,t,a,n){c(n,{type:e,value:"SHAPE"===e?JSON.stringify(t.geometry):t},a)}),[c]),C=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut(t);case 3:r=e.sent,JSON.parse(r[0].text).features?c(n,{type:"GEOJSON",value:JSON.stringify(JSON.parse(r[0].text).features[0].geometry)},a):j.b.error("\u8bf7\u4f7f\u7528\u6b63\u786e\u7684 geojson \u683c\u5f0f\uff01"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error("\u8bf7\u4f7f\u7528\u6b63\u786e\u7684 geojson \u683c\u5f0f\uff01");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[c]);return r.a.createElement(he.a.Item,{className:"sky-filters-space-item",label:g,required:s,help:m},r.a.createElement(Pe.a,{className:"sky-filters-space-select",placeholder:"\u8bf7\u9009\u62e9",value:t[v].type,onChange:function(e){c(v,{type:e,value:null},t)}},O.map((function(e){return r.a.createElement(mt,{key:e.key,value:e.value},e.key)}))),"TILE"===t[v].type&&r.a.createElement(Le.a,{placeholder:"\u591a\u6761\u8bf7\u7528\u82f1\u6587 ; \u9694\u5f00",value:t[v].value,onChange:function(e){return y("TILE",e.target.value,t,v)}}),"ADMINISTRATIVE_REGION"===t[v].type&&r.a.createElement(lt,{onSelect:function(e){return y("ADMINISTRATIVE_REGION",e,t,v)}}),"SHAPE"===t[v].type&&r.a.createElement(Ze,{onChange:function(e){y("SHAPE",e,t,v)}}),"GEOJSON"===t[v].type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,null,r.a.createElement(Je.a,null),r.a.createElement("label",{className:"sky-filters-input-file-label",htmlFor:"file"},"\u5bfc\u5165\u6587\u4ef6")),r.a.createElement("input",{className:"sky-filters-input-file",name:"file",id:"file",type:"file",accept:".geojson",onChange:function(e){return C(e,t,v)}})),"POINTER"===t[v].type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{placeholder:"\u7ecf\u5ea6",value:t[v].lon,onChange:function(e){return k(e,u,t,v)}}),r.a.createElement(Re.a,{placeholder:"\u7eac\u5ea6",value:t[v].lat,onChange:function(e){return h(e,u,t,v)}})),!t[v].type&&r.a.createElement(Le.a,{disabled:!0}))},ft=(a(481),a(224)),bt=(a(972),function(e){var t=e.value,a=e.onChange,c=e.commonlyUsedEnable,l=void 0!==c&&c,i=Object(we.a)(e,["value","onChange","commonlyUsedEnable"]),u=R().groundObjectTags,o=u.tags,s=u.flatedTags,m=u.localTags,p=u.addLocalTag,d=Object(n.useMemo)((function(){return[].concat(Object(y.a)(m),Object(y.a)(o))}),[o,m]),f=o.length?s.find((function(e){return e.id===t})):null,b=f?f.path:[],v=Object(n.useCallback)((function(e){if(1!==e.length||-110!==e[0]){var t=e.pop();a(t)}}),[a]),g=Object(n.useCallback)((function(e){e&&l&&f&&p(f.id)}),[l,f,p]);return r.a.createElement($e.a,Object.assign({options:d,value:b,onChange:v,onPopupVisibleChange:g},i))});bt.CommonlyUsedList=function(e){var t=e.value,a=e.onChange,c=Object(n.useState)(!1),l=Object(f.a)(c,2),i=l[0],u=l[1],o=R().account.tagSettings,s=Object(n.useMemo)((function(){return o.map((function(e){var t=e.settings&&e.settings.borderColor,a=t?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a,")"):"#fdd835";return Object(E.a)(Object(E.a)({},e),{},{id:e.tagCode,name:e.tagPath,color:a})}))}),[o]),m=Object(n.useCallback)((function(e){u(e),Object(I.e)("groundtags-submit-immediately",e)}),[]);return Object(n.useEffect)((function(){var e="true"===Object(I.a)("groundtags-submit-immediately");u(e)}),[]),r.a.createElement("ul",{className:"ground-object-tags-commonly"},s.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(Ye.a,{value:e.id,checked:e.id===t,onChange:function(e){return a(e.target.value,i)}},r.a.createElement("span",{className:"color-diamond",style:{backgroundColor:e.color}}),r.a.createElement("span",null,e.name)))})),r.a.createElement("li",{className:"immediately-submit-enable"},r.a.createElement("span",null,"\u5f00\u542f\u7acb\u5373\u63d0\u4ea4"),r.a.createElement(ft.a,{checked:i,onChange:m})))};var vt,gt,Ot,kt,ht,yt,Et,jt,Ct,St,Tt,xt,wt,It,Nt,At,Mt,Lt,Dt,Rt,qt,Pt,Ft,Kt,Yt,Ut,Gt=bt,Vt=function(e){var t=e.value,a=e.options,c=e.onChange,l=a.required,i=a.help,u=a.label,o=a.valueKey,s=a.colon,m=a.hideLabel,p=a.onChange,d=void 0===p?function(){}:p,f=Object(we.a)(a,["required","help","label","valueKey","colon","hideLabel","onChange"]),b=m?null:u||"\u5730\u7269\u6807\u7b7e",v=Object(n.useCallback)((function(e,t,a){d(e,t,a),c(e,t,a)}),[c,d]);return r.a.createElement(he.a.Item,{label:b,required:l,help:i,colon:s},r.a.createElement(Gt,Object.assign({},f,{value:t[o],onChange:function(e){return v(o,e,t)}})))},Bt=Pe.a.Option,zt=function(e){var t=e.value,a=e.options,c=e.onChange,l=Object(n.useState)([]),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(null),m=Object(f.a)(s,2),b=m[0],v=m[1],g=a.required,O=a.help,k=a.label,h=a.valueKey,y=k||"\u536b\u661f\u7f16\u53f7",E=Object(n.useCallback)((function(e,t){var a=u.find((function(t){return t.name===e}));v(a),c(h,null,t)}),[c,u,h]);return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.queryAvailableSatellite();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(he.a.Item,{className:"sky-filters-satellite-item",label:y,required:g,help:O},r.a.createElement(Pe.a,{placeholder:"\u8bf7\u9009\u62e9\u7f16\u53f7",value:b&&b.name,onChange:function(e){E(e,t)},allowClear:!0},u.map((function(e){return r.a.createElement(Bt,{key:e.name,value:e.name},e.name)}))),r.a.createElement(Pe.a,{placeholder:"\u7b49\u7ea7",value:t[h],onChange:function(e){c("satellite",e,t)}},b&&b.dataTypes&&b.dataTypes.map((function(e){return r.a.createElement(Bt,{key:e.dataType},e.name)}))))},Ht=a(619),Jt=(a(973),new(vt=Se("\u83b7\u53d6\u53d8\u66f4\u8bb0\u5f55\u5931\u8d25"),gt=Se("\u83b7\u53d6\u5f69\u8272\u6570\u636e\u5931\u8d25"),Ot=Se("\u4fdd\u5b58\u5931\u8d25"),kt=je("\u521b\u5efa\u6210\u529f"),ht=Se("\u521b\u5efa\u5931\u8d25"),yt=je("\u5ba1\u6838\u6210\u529f"),Et=Se("\u5ba1\u6838\u5931\u8d25"),jt=je("\u66f4\u65b0\u6210\u529f"),Ct=Se("\u66f4\u65b0\u5931\u8d25"),St=je("\u5220\u9664\u6210\u529f"),Tt=Se("\u5220\u9664\u5931\u8d25"),xt=Se("\u83b7\u53d6\u5217\u8868\u5931\u8d25"),wt=je("\u4fdd\u5b58\u6210\u529f"),It=je("\u65b0\u5efa\u6210\u529f"),Nt=Se("\u65b0\u5efa\u5931\u8d25"),At=je("\u5f52\u6863\u6210\u529f"),Mt=Se("\u5f52\u6863\u5931\u8d25"),Lt=je("\u5220\u9664\u6210\u529f"),Dt=Se("\u5220\u9664\u5931\u8d25"),Rt=Se("\u6743\u9650\u9519\u8bef"),qt=Se("\u83b7\u53d6 tile \u5217\u8868\u5931\u8d25"),Pt=Se("\u83b7\u53d6\u4efb\u52a1\u8be6\u60c5\u5931\u8d25"),Ft=Se("\u83b7\u53d6\u8be6\u60c5\u5931\u8d25"),Kt=Se("\u83b7\u53d6\u5916\u4e1a\u6570\u636e\u5931\u8d25"),Yt=function(){function e(){Object(b.a)(this,e),Object(Ht.a)(this,"getTaskList",Ut,this)}return Object(v.a)(e,[{key:"uploadFile",value:function(e){return g.c.invoke("SampleService.uploadSampleFile",{data:e})}},{key:"queryFileList",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleService.getAllSampleFiles");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{imageTime:e.imageTime.slice(0,10),uploadTime:e.uploadTime?e.uploadTime.slice(0,10):"\u6682\u65e0"})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(e){return g.c.invoke("SampleService.deleteSampleFiles",{sampleFileIds:e})}},{key:"updateFile",value:function(e){return g.c.invoke("SampleService.updateSampleFile",{sampleFile:e})}},{key:"previewSampleTags",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleService.querySamplesByFile",{sampleFileId:t});case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryChangeLogs",value:function(e,t){return g.c.invoke("SampleService.queryChangeLog",{id:e,resourceType:t})}},{key:"queryWaveAggregations",value:function(e){return g.c.invoke("SampleTaskService.queryWaveAggregations",{dataType:e})}},{key:"createMarkTask",value:function(e,t){return g.c.invoke("SampleTaskService.createTask",{name:e,condition:t})}},{key:"queryMarkTasks",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleTaskService.queryTasks");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{createdAt:e.createdAt.slice(0,10),lastSampleCommittedAt:e.lastSampleCommittedAt?e.lastSampleCommittedAt.slice(0,10):"\u6682\u65e0"})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteMarkTask",value:function(e){return g.c.invoke("SampleTaskService.deleteTask",{taskId:e})}},{key:"updateMarkTask",value:function(e,t,a,n,r){return g.c.invoke("SampleTaskService.updateTask",{taskId:e,taskName:t,timeRange:a,dataType:n,waveAggregations:r})}},{key:"createSample",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.c.invoke("SampleService.createSample",{sample:t}).then((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryTaskMarkFilter",value:function(e){return g.c.invoke("SampleTaskService.queryTaskMarkFilter",{taskId:e})}},{key:"queryTaskShape",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleTaskService.queryTaskShape",{taskId:t});case 2:return a=e.sent,n=JSON.parse(a.geometry),e.abrupt("return",Object(E.a)(Object(E.a)({},a),{},{geometry:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"querySampleImages",value:function(e,t,a){return g.c.invoke("SampleTaskService.querySampleImages",{taskId:e,tile:t,waveAggregationId:a})}},{key:"queryTileShape",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleTaskService.queryTileShape",{tile:t});case 2:return a=e.sent,e.abrupt("return",JSON.parse(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryMarked",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleService.queryMarked",{taskId:t,tile:a});case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"queryForAudit",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("SampleService.queryForAudit",{taskId:t,tile:a});case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"auditSamples",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PASS";return g.c.invoke("SampleService.auditSamples",{sampleIds:e,auditStatus:t})}},{key:"querySamples",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.shape,n=t.beginTime,r=t.endTime,c=t.tagIds,e.next=3,g.c.invoke("SampleService.querySamples",{condition:{shape:a,beginTime:n,endTime:r,tagIds:c}});case 3:return l=e.sent,e.abrupt("return",l.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSample",value:function(e,t,a,n){return g.c.invoke("SampleService.updateSample",{sampleDto:{id:e,shape:t,imageTime:a,tag:{id:n}}}).then((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})}))}},{key:"deleteSample",value:function(e){return g.c.invoke("SampleService.deleteSamples",{sampleIds:e})}},{key:"queryImageList",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("AssistantImageService.queryImageList",{offset:0,limit:1e3});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{createTime:e.createTime.slice(0,10),takeTime:e.takeTime?e.takeTime.slice(0,10):"-",failedReason:e.failedReason?e.failedReason:"-"})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadImage",value:function(e,t){return g.c.invoke("AssistantImageService.uploadImage",{img:e,source:t})}},{key:"updateImageComment",value:function(e,t){return g.c.invoke("AssistantImageService.updateImageComment",{imageId:e,comment:t})}},{key:"deleteImage",value:function(e){return g.c.invoke("AssistantImageService.deleteImage",{imageId:e})}},{key:"updateTask",value:function(e,t,a,n,r){return g.c.invoke("SampleTaskService.updateTask",{taskId:e,taskName:t,timeRange:a,dataType:n,waveAggregations:r})}},{key:"createTask",value:function(e){return g.c.invoke("SampleTaskService.createSampleTask",{sampleTask:e})}},{key:"archiveTask",value:function(e){return g.c.invoke("SampleTaskService.archiveTask",{taskId:e})}},{key:"deleteTask",value:function(e){return g.c.invoke("SampleTaskService.deleteTask",{taskId:e})}},{key:"checkCreateTask",value:function(){return Promise.resolve(null)}},{key:"getTileList",value:function(e){return g.c.invoke("SampleTaskService.queryTiles",{shape:e})}},{key:"getTask",value:function(e){return g.c.invoke("SampleTaskService.queryTaskByTaskId",{taskId:e})}},{key:"queryTaskInfoById",value:function(e){return g.c.invoke("SampleTaskService.queryTaskInfoById",{taskId:e}).then((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:{type:e.shape.type,value:"SHAPE"===e.shape.type?JSON.parse(e.shape.value):e.shape.value,description:e.shape.description}})}))}},{key:"queryFieldOperationData",value:function(e){return g.c.invoke("AssistantImageService.queryFieldOperationData",e)}}]),e}(),Object(Ee.a)(Yt.prototype,"queryChangeLogs",[vt],Object.getOwnPropertyDescriptor(Yt.prototype,"queryChangeLogs"),Yt.prototype),Object(Ee.a)(Yt.prototype,"queryWaveAggregations",[gt],Object.getOwnPropertyDescriptor(Yt.prototype,"queryWaveAggregations"),Yt.prototype),Object(Ee.a)(Yt.prototype,"updateMarkTask",[Ot],Object.getOwnPropertyDescriptor(Yt.prototype,"updateMarkTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"createSample",[kt,ht],Object.getOwnPropertyDescriptor(Yt.prototype,"createSample"),Yt.prototype),Object(Ee.a)(Yt.prototype,"auditSamples",[yt,Et],Object.getOwnPropertyDescriptor(Yt.prototype,"auditSamples"),Yt.prototype),Object(Ee.a)(Yt.prototype,"updateSample",[jt,Ct],Object.getOwnPropertyDescriptor(Yt.prototype,"updateSample"),Yt.prototype),Object(Ee.a)(Yt.prototype,"deleteSample",[St,Tt],Object.getOwnPropertyDescriptor(Yt.prototype,"deleteSample"),Yt.prototype),Ut=Object(Ee.a)(Yt.prototype,"getTaskList",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){return g.c.invoke("SampleTaskService.getByArchiveType",{archiveType:e})}}}),Object(Ee.a)(Yt.prototype,"updateTask",[wt],Object.getOwnPropertyDescriptor(Yt.prototype,"updateTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"createTask",[It,Nt],Object.getOwnPropertyDescriptor(Yt.prototype,"createTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"archiveTask",[At,Mt],Object.getOwnPropertyDescriptor(Yt.prototype,"archiveTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"deleteTask",[Lt,Dt],Object.getOwnPropertyDescriptor(Yt.prototype,"deleteTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"checkCreateTask",[Rt],Object.getOwnPropertyDescriptor(Yt.prototype,"checkCreateTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"getTileList",[qt],Object.getOwnPropertyDescriptor(Yt.prototype,"getTileList"),Yt.prototype),Object(Ee.a)(Yt.prototype,"getTask",[Pt],Object.getOwnPropertyDescriptor(Yt.prototype,"getTask"),Yt.prototype),Object(Ee.a)(Yt.prototype,"queryTaskInfoById",[Ft],Object.getOwnPropertyDescriptor(Yt.prototype,"queryTaskInfoById"),Yt.prototype),Object(Ee.a)(Yt.prototype,"queryFieldOperationData",[Kt],Object.getOwnPropertyDescriptor(Yt.prototype,"queryFieldOperationData"),Yt.prototype),Yt)),Wt=Pe.a.Option,Qt=function(e){var t=e.value,a=e.options,c=e.onChange,l=a.required,i=a.help,u=a.label,o=a.valueKey,s=a.satelliteType,m=Object(we.a)(a,["required","help","label","valueKey","satelliteType"]),b=u||"\u8bf7\u9009\u62e9",v=Object(n.useState)([]),g=Object(f.a)(v,2),O=g[0],k=g[1];return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jt.queryWaveAggregations(s);case 4:t=e.sent,k(t.map((function(e){return{name:e.description,value:e.id,key:e.id}})));case 6:case"end":return e.stop()}}),e)})))()}),[s]),r.a.createElement(he.a.Item,{label:b,required:l,help:i},r.a.createElement(Pe.a,Object.assign({placeholder:"\u8bf7\u9009\u62e9"},m,{value:t[o],onChange:function(e){return c(o,e,t)}}),O.map((function(e){return r.a.createElement(Wt,{key:e.value,value:e.value,disabled:!0===e.disabled},e.name)}))))},_t=function(e){var t=e.value,a=e.options,c=e.onChange,l=a.required,i=a.help,u=a.label,o=a.valueKey,s=a.colon,m=a.className,p=void 0===m?"":m,d=a.onChange,f=void 0===d?function(){}:d,b=u||"\u6807\u9898",v=Object(n.useCallback)((function(e,t,a){f(e,t,a),c(e,t,a)}),[c,f]);return r.a.createElement(he.a.Item,{className:"toolbar-item-title ".concat(p),label:b,required:l,help:i,colon:s},o&&r.a.createElement(ft.a,{size:"small",checked:t[o],onChange:function(e){return v(o,e,t)}}))},Xt=(a(188),a(117)),Zt=a(566),$t=function(e){var t=e.options,a=(e.children,e.value),c=e.onChange,l=t.className,i=t.required,u=t.help,o=t.label,s=t.valueKey,m=t.optionSource,p=void 0===m?[]:m,d=o||"\u6807\u9898",f=Object(n.useCallback)((function(e,t,a,n){var r=n[a],l=t?[].concat(Object(y.a)(r),[e]):r.filter((function(t){return t!==e}));c(a,l,n)}),[c]);return r.a.createElement(he.a.Item,{className:l,label:d,required:i,help:u,style:{position:"relative"}},a&&!!a[s].length&&r.a.createElement("span",{className:"sky-filters-clear",onClick:function(){c(s,[],a)}},r.a.createElement(Zt.a,null)),!p.length&&r.a.createElement(Xt.a,null),!!p.length&&r.a.createElement("ul",{className:"sky-filters-checklist"},p.map((function(e){return r.a.createElement("li",{key:e.value,title:"\u6e05\u9664"},r.a.createElement(Ye.a,{diabled:e.disabled,onChange:function(t){return f(e.value,t.target.checked,s,a)},checked:a&&a[s].includes(e.value)},e.name))}))))},ea=function(e){var t=e.options,a=(e.children,e.value),c=e.onChange,l=t.className,i=t.valueKey,u=t.required,o=t.help,s=t.label,m=t.optionSource,p=void 0===m?[]:m,d=t.onChange,f=void 0===d?function(){}:d,b=s||"\u6807\u9898",v=Object(n.useCallback)((function(e,t,a){f(e,t,a),c(e,t,a)}),[c,f]);return r.a.createElement(he.a.Item,{className:l,label:b,required:u,help:o,style:{position:"relative"}},a&&!!a[i]&&r.a.createElement("span",{className:"sky-filters-clear",onClick:function(){v(i,null,a)}},r.a.createElement(Zt.a,null)),!p.length&&r.a.createElement(Xt.a,null),!!p.length&&r.a.createElement("ul",{className:"sky-filters-radiolist"},r.a.createElement(ye.a.Group,{value:a[i],onChange:function(e){return v(i,e.target.value,a)}},p.map((function(e){return r.a.createElement("li",{key:e.value},r.a.createElement(ye.a,{disabled:e.disabled,value:e.value},e.name))})))))},ta=function(e){var t=e.topCode,a=e.value,n=e.onChange,c=e.placeholder,l=e.options,i=l.required,u=l.help,o=l.label,s=l.valueKey,m=Object(we.a)(l,["required","help","label","valueKey"]),p=o||"\u884c\u653f\u533a\u57df";return r.a.createElement(he.a.Item,{label:p,required:i,help:u},r.a.createElement(lt,Object.assign({topCode:t,onSelect:function(e){return n(s,e,a)},placeholder:c},m)))},aa=function(e){var t=e.Component,a=(e.value,e.onChange,e.options);return r.a.createElement(t,a)},na=(a(974),a(313)),ra=function(e){var t=e.value,a=e.options,n=e.onChange,c=a.required,l=(a.help,a.label),i=a.valueKey,u=a.treeData,o=void 0===u?[]:u,s=Object(we.a)(a,["required","help","label","valueKey","treeData"]),m=l||"\u9009\u62e9\u6ce2\u6bb5",p=o;return r.a.createElement(he.a.Item,{label:m,required:c},r.a.createElement(na.a,Object.assign({placeholder:"\u8bf7\u9009\u62e9",treeData:p},s,{value:t[i],onChange:function(e){return n(i,e,t)}})))},ca={DATE:{Component:Ne,defaultValue:null},DATES:{Component:Me,defaultValue:[]},INPUT:{Component:De,defaultValue:null},SELECT:{Component:Ke,defaultValue:void 0},TIME_RANGER:{Component:He,defaultValue:{dates:[],includeMonths:Array.from({length:12},(function(e,t){return t+1}))}},SPACE:{Component:dt,defaultValue:{type:null,value:null}},SATELLITE:{Component:zt,defaultValue:null},MARK_TAG:{Component:Vt,defaultValue:null},WAVE_AGGREGATION:{Component:Qt,defaultValue:[]},TITLE:{Component:_t,defaultValue:!1},CHECK_LIST:{Component:$t,defaultValue:[]},RADIO_LIST:{Component:ea,defaultValue:null},ADMIN_REGION:{Component:ta,defaultValue:null},CUSTOM:{defaultValue:null,Component:aa},TREE_SELECT:{Component:ra,defaultValue:void 0},INPUT_NUM:{Component:qe,defaultValue:null}};["DATES","DATE","INPUT","TIME_RANGER","SPACE","SATELLITE","MARK_TAG","WAVE_AGGREGATION","TITLE","CHECK_LIST","RADIO_LIST","ADMIN_REGION","CUSTOM","TREE_SELECT","INPUT_NUM"].forEach((function(e){ca[e].options={required:!1,help:null,label:null,valueKey:null}}));var la=function(e){var t=e.filterOptions,a=e.value,n=e.onChange,c=t.filterType,l=t.Component,i=Object(we.a)(t,["filterType","Component"]),u=ca[c],o=Object(E.a)(Object(E.a)({},u.options),i);return r.a.createElement(u.Component,{Component:l,options:o,value:a,onChange:n})},ia=function(e){var t=e.value,a=e.onChange,c=void 0===a?function(){}:a,l=e.enabledFilters,i=void 0===l?[]:l,u=e.layout,o=e.className,s=o?"sky-filters ".concat(o):"sky-filters",m=Object(n.useMemo)((function(){return i.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(xe.a)({},t.valueKey,ca[t.filterType].defaultValue))}),{})}),[i]),p=Object(n.useMemo)((function(){return Object(E.a)(Object(E.a)({},m),t)}),[m,t]),d=Object(n.useCallback)((function(e,t,a){var n=Object(E.a)(Object(E.a)({},a),Object(xe.a)({},e,t));c(n,e)}),[c]);return r.a.createElement(he.a,{className:s,layout:u},i.map((function(e){return r.a.createElement(la,{key:e.valueKey,filterOptions:e,value:p,onChange:d})})))};ia.Toolbar=function(e){var t=e.value,a=e.onChange,c=void 0===a?function(){}:a,l=e.sections,i=void 0===l?[]:l,u=e.layout,o=e.className,s=o?"sky-filters-toolbar ".concat(o):"sky-filters-toolbar",m=Object(n.useMemo)((function(){var e=i.reduce((function(e,t){return[].concat(Object(y.a)(e),Object(y.a)(t.enabledFilters))}),[]).reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(xe.a)({},t.valueKey,ca[t.filterType].defaultValue))}),{}),t=i.filter((function(e){return e.valueKey})).reduce((function(e,t){return Object(xe.a)({},t.valueKey,!1)}),[]);return Object(E.a)(Object(E.a)({},t),e)}),[i]),p=Object(n.useMemo)((function(){return Object(E.a)(Object(E.a)({},m),t)}),[m,t]),d=Object(n.useCallback)((function(e,t,a){var n=Object(E.a)(Object(E.a)({},a),{},Object(xe.a)({},e,t));c(e,n)}),[c]);return r.a.createElement(he.a,{className:s,layout:u},i.map((function(e,t){return r.a.createElement("div",{className:"sky-filters-toolbar-item",key:t},r.a.createElement(la,{filterOptions:e,value:p,onChange:d}),e.enabledFilters.map((function(e){return r.a.createElement(la,{key:e.valueKey,filterOptions:e,value:p,onChange:d})})))})))},ia.Filters=ca,ia.FilterMounter=la;var ua=ia,oa={mode:"NORMAL",taskName:null,priority:null},sa=function(){var e=Object(n.useState)(),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(oa),i=Object(f.a)(l,2),u=i[0],o=i[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),v=b[0],g=b[1],O=Object(n.useMemo)((function(){return!a||!a.timeRanger.dates||!a.timeRanger.dates.length||!a.timeRanger.includeMonths||!a.satellite}),[a]),k=Object(n.useMemo)((function(){return[{filterType:"INPUT",valueKey:"name",label:"\u4efb\u52a1\u540d\u79f0",required:!0},{filterType:"TIME_RANGER",valueKey:"timeRanger",required:!0,disabledDate:function(e){return"NORMAL"===u.mode?e>s()().endOf("day"):null}},{filterType:"SPACE",valueKey:"shape",required:!0},{filterType:"SATELLITE",valueKey:"satellite",required:!0}]}),[u.mode]),h=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"GAZING"===t.mode?t.priority="LOW":"NORMAL"===t.mode&&(t.priority="NORMAL"),e.prev=1,g(!0),n=a.timeRanger,r=a.satellite,"TILE"===(c=Object(E.a)({},a.shape)).type&&(c.value=JSON.stringify(c.value.split(";").filter((function(e){return e.length})))),e.next=9,Te.downloadBatchData({timeRange:{beginTime:n.dates[0].format("YYYY-MM-DDT00:00:00"),endTime:n.dates[1].format("YYYY-MM-DDT23:59:59"),includeMonths:n.includeMonths},downloadShape:c,dataType:r},a.name,t.priority,t.mode);case 9:j.b.success("\u4efb\u52a1\u521b\u5efa\u6210\u529f!"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),j.b.error(e.t0.message);case 15:return e.prev=15,g(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,a){return e.apply(this,arguments)}}(),[]);return r.a.createElement(Oe.a,{title:"\u521b\u5efa\u4efb\u52a1",size:"small",className:"create-task-card"},r.a.createElement(he.a.Item,{label:"\u4e0b\u8f7d\u6a21\u5f0f",required:!0},r.a.createElement(ye.a.Group,{value:u.mode,onChange:function(e){o(Object(E.a)(Object(E.a)({},u),{},{mode:e.target.value}))}},r.a.createElement(ye.a,{value:"NORMAL"},"\u5e38\u89c4\u6a21\u5f0f"),r.a.createElement(ye.a,{value:"GAZING"},"\u51dd\u89c6\u6a21\u5f0f"))),r.a.createElement(ua,{onChange:c,value:a,enabledFilters:k}),r.a.createElement(he.a.Item,null,r.a.createElement(ke.a,{className:"data-filters-submit-btn",disabled:O,type:"primary",onClick:function(){return h(u,a)},loading:v},"\u521b\u5efa")))},ma=(a(976),a(223)),pa=(a(978),a(314)),da=(a(211),a(79)),fa=(a(109),a(56)),ba=(a(483),a(567)),va=function(e){var t=e.dataList,a=e.addPreSelect,c=e.preDownloads,l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.memo)((function(e){var l=e.item,i=Object(n.useMemo)((function(){return l.detail?JSON.parse(l.detail):null}),[l]);return l?r.a.createElement("li",null,i.preview?r.a.createElement("img",{src:i.preview,alt:""}):r.a.createElement("h3",null,"\u65e0\u5f71\u50cf"),r.a.createElement("div",null,"\u536b\u661f\u7f16\u53f7: ",l.dataType),r.a.createElement("div",null,"\u5f71\u50cf\u65f6\u95f4: ",l.time),r.a.createElement("div",null,r.a.createElement(ba.a,null),": ",i&&i.cloud_cover),r.a.createElement(ke.a,{type:"default",disabled:!0===l.ready,onClick:function(){a(l,t,c)}},"\u52a0\u5165\u9884\u9009")):r.a.createElement("div",null)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"link",disabled:0===t.length,onClick:function(){return o(!0)}},"\u56fe\u7247\u6a21\u5f0f"),u&&r.a.createElement("div",{className:"image-modal"},r.a.createElement("div",{className:"image-modal-head"},r.a.createElement(ke.a,{type:"primary",onClick:function(){o(!1)}},"\u9000\u51fa")),r.a.createElement("ul",{className:"image-lists"},t.map((function(e){return r.a.createElement(s,{key:e.id,item:e})})))))},ga=[{filterType:"TIME_RANGER",valueKey:"timeRanger",required:!0,disabledDate:function(e){return e>s()().endOf("day")}},{filterType:"SPACE",valueKey:"shape",required:!0},{filterType:"SATELLITE",valueKey:"satellite",required:!0}],Oa=function(e){var t=e.isLoading,a=e.setIsLoading,c=e.setDataList,l=Object(n.useState)(null),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useMemo)((function(){return!u||!u.timeRanger.dates.length||!u.timeRanger.includeMonths.length||!u.satellite}),[u]),m=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=10;break}return a(!0),n=t.timeRanger,"TILE"===(r=Object(E.a)({},t.shape)).type&&(r.value=JSON.stringify(r.value.split(";").filter((function(e){return e.length})))),e.next=8,Te.queryDataList({beginTime:n.dates[0].format("YYYY-MM-DDT00:00:00"),endTime:n.dates[1].format("YYYY-MM-DDT23:59:59"),includeMonths:n.includeMonths},t.satellite,r);case 8:l=e.sent,c(l);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),j.b.error(e.t0.message);case 15:return e.prev=15,a(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[c,a]);return r.a.createElement("div",{className:"data-filter"},r.a.createElement(Oe.a,{title:"\u7b5b\u9009\u6761\u4ef6",size:"small"},r.a.createElement(ua,{layout:"inline",value:u,enabledFilters:ga,onChange:o}),r.a.createElement(he.a.Item,null,r.a.createElement(ke.a,{className:"data-filters-submit-btn",type:"primary",disabled:s,onClick:function(){m(u)},loading:t},"\u67e5\u8be2"))))},ka=a(620),ha=a.n(ka),ya=fa.a.Column,Ea=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),v=b[0],g=b[1],O=Object(n.useState)([]),k=Object(f.a)(O,2),h=k[0],C=k[1],S=Object(n.useState)([]),T=Object(f.a)(S,2),x=T[0],I=T[1],N=Object(n.useState)(null),A=Object(f.a)(N,2),M=A[0],L=A[1],D=Object(n.useState)({}),R=Object(f.a)(D,2),q=R[0],P=R[1],F=Object(n.useCallback)((function(e,t,a){I([].concat(Object(y.a)(a),[Object(E.a)(Object(E.a)({},e),{},{ready:!0})]));var n=t.map((function(t){return t.id===e.id?Object(E.a)(Object(E.a)({},t),{},{ready:!0}):t}));C(n)}),[]),K=Object(n.useCallback)((function(e,t,a){var n=t.map((function(t){return t.id===e.id?Object(E.a)(Object(E.a)({},t),{},{ready:!1}):t}));C(n),I(a.filter((function(t){return t.id!==e.id})))}),[]),Y=Object(n.useCallback)((function(e){return e?r.a.createElement("a",{href:e},"\u70b9\u51fb\u4e0b\u8f7d"):"\u6682\u65e0"}),[]),U=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.downloadConditionalData(M,"NORMAL",x.map((function(e){return{id:e.id,dataType:e.dataType}})),"NORMAL");case 3:j.b.success("\u4efb\u52a1\u521b\u5efa\u6210\u529f!"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:return e.prev=9,o(!1),I([]),L(""),e.finish(9);case 14:case"end":return e.stop()}}),e,null,[[0,6,9,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"data-result"},r.a.createElement(Oa,{setDataList:C,isLoading:a,setIsLoading:c}),r.a.createElement(Oe.a,{className:"data-result-card",size:"small",title:"\u67e5\u8be2\u7ed3\u679c",bordered:!1,extra:r.a.createElement(va,{dataList:h,preDownloads:x,addPreSelect:F})},r.a.createElement(fa.a,{size:"small",className:"data-result-table",dataSource:h,rowKey:function(e){return e.id},loading:a,pagination:{showTotal:function(){return"\u5171".concat(h.length,"\u6761")},showSizeChanger:!0}},r.a.createElement(ya,{title:"\u6570\u636eID",dataIndex:"id",key:"id",width:320}),r.a.createElement(ya,{title:"\u536b\u661f\u7f16\u53f7",dataIndex:"dataType",key:"dataType"}),r.a.createElement(ya,{title:"\u6570\u636e\u6e90\u5730\u5740",key:"remoteUrl",render:function(e){return r.a.createElement(da.a,{title:e.remoteUrl,placement:"top"},r.a.createElement(ke.a,{type:"link",disabled:null===e.remoteUrl,onClick:function(){return w(e.remoteUrl)}},"\u590d\u5236\u94fe\u63a5"))}}),r.a.createElement(ya,{ellipsis:!0,title:"\u4e0b\u8f7d\u72b6\u6001",dataIndex:"ossUrl",key:"ossUrl",render:function(e){return null===e||""===e?"\u672a\u4e0b\u8f7d":r.a.createElement(da.a,{title:e||null,placement:"top"},r.a.createElement(ke.a,{type:"link",onClick:function(){return w(e)}},"\u5df2\u4e0b\u8f7d"))}}),r.a.createElement(ya,{title:"\u4e91\u91cf",ellipsis:!0,dataIndex:"cloudCover",key:"cloudCover"}),r.a.createElement(ya,{title:"\u771f\u5f69\u56fe",ellipsis:!0,dataIndex:"tciUrl",render:function(e){return Y(e)}}),r.a.createElement(ya,{title:"\u6570\u636e\u65f6\u95f4",dataIndex:"time",key:"time",sorter:function(e,t){return s()(e.time).valueOf()-s()(t.time).valueOf()},defaultSortOrder:"descend"}),r.a.createElement(ya,{title:"\u64cd\u4f5c",key:"action",width:180,render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"link",onClick:function(){P(Object(E.a)(Object(E.a)({},q),{},{detail:JSON.parse(e.detail)})),g(!0)}},"\u67e5\u770b\u8be6\u60c5"),r.a.createElement(ke.a,{type:"link",disabled:!0===e.ready,onClick:function(){F(e,h,x)}},"\u52a0\u5165\u9884\u9009"))}}))),r.a.createElement(We.a,{className:"data-result-detail-modal",title:"\u6570\u636e\u8be6\u60c5",visible:v,onCancel:function(){P({}),g(!1)},footer:[r.a.createElement(ke.a,{key:"submit",type:"primary",onClick:function(){return g(!1)}},"\u786e\u8ba4")]},r.a.createElement(ha.a,{src:q})),r.a.createElement(ma.a,{className:"data-result-preselect-btn",offsetBottom:20,target:function(){return window}},r.a.createElement(pa.a,{count:x.length,overflowCount:9},r.a.createElement(ke.a,{type:"dashed",onClick:function(){return o(!0)}},"\u9884\u9009\u5217\u8868"))),r.a.createElement(We.a,{title:"\u9884\u9009\u5217\u8868",zIndex:100,width:"70%",visible:u,onCancel:function(){return o(!1)},footer:[r.a.createElement(ke.a,{key:"back",onClick:function(){return o(!1)}},"\u8fd4\u56de"),r.a.createElement(Le.a,{className:"data-result-preselect-name",key:"input",placeholder:"\u8bf7\u521b\u5efa\u4efb\u52a1\u540d,\u518d\u4e0b\u8f7d",value:M,onChange:function(e){L(e.target.value)}}),r.a.createElement(ke.a,{className:"data-result-preselect-OKbtn",key:"submit",type:"primary",disabled:0===x.length||!M,onClick:U,loading:a},"\u786e\u8ba4\u4e0b\u8f7d")]},r.a.createElement(fa.a,{dataSource:x,rowKey:function(e){return e.id},size:"small"},r.a.createElement(ya,{title:"\u6570\u636eID",dataIndex:"id",key:"id"}),r.a.createElement(ya,{title:"\u536b\u661f\u7f16\u53f7",dataIndex:"dataType",key:"dataType"}),r.a.createElement(ya,{title:"\u6570\u636e\u6e90",ellipsis:!0,dataIndex:"remoteUrl",key:"remoteUrl"}),r.a.createElement(ya,{title:"\u5b58\u50a8\u8def\u5f84",ellipsis:!0,dataIndex:"ossUrl",key:"ossUrl"}),r.a.createElement(ya,{title:"\u4e91\u91cf",ellipsis:!0,dataIndex:"cloudCover",key:"cloudCover"}),r.a.createElement(ya,{title:"\u6570\u636e\u65f6\u95f4",dataIndex:"time",key:"time"}),r.a.createElement(ya,{title:"\u64cd\u4f5c",key:"action",render:function(e){return r.a.createElement(ke.a,{type:"primary",onClick:function(){K(e,h,x)}},"\u53d6\u6d88\u9884\u9009")}}))))},ja=(a(983),function(){var e=Object(P.g)(),t=oe().get("manner")||"query",a=R().headerNav,c=a.mount,l=a.unMount,i=a.active,u=a.setActive,o=Object(n.useCallback)((function(t){e.push("/app/data/satellite-download?manner=".concat(t))}),[e]);return Object(n.useEffect)((function(){return c({type:"tabs",items:[{name:"\u67e5\u8be2",key:"query"},{name:"\u76f4\u63a5\u4e0b\u8f7d",key:"query-download"}],onChange:o}),function(){l()}}),[c,o,l]),Object(n.useEffect)((function(){u(t)}),[t,u]),r.a.createElement(r.a.Fragment,null,"query"===i&&r.a.createElement(Ea,null),"query-download"===i&&r.a.createElement(sa,null))}),Ca=(a(110),a(65)),Sa=(a(247),a(148)),Ta=(a(384),a(132)),xa=(a(289),a(107)),wa={"\u5df2\u5b8c\u6210":r.a.createElement(xa.a,{color:"success"},"\u5df2\u5b8c\u6210"),"\u5df2\u6682\u505c":r.a.createElement(xa.a,{color:"warning"},"\u5df2\u6682\u505c"),"\u5df2\u5206\u53d1":r.a.createElement(xa.a,{color:"geekblue"},"\u5df2\u5206\u53d1"),"\u5f85\u5904\u7406":r.a.createElement(xa.a,{color:"default"},"\u5f85\u5904\u7406"),"\u4e0b\u8f7d\u4e2d":r.a.createElement(xa.a,{color:"processing"},"\u4e0b\u8f7d\u4e2d"),"\u5931\u8d25":r.a.createElement(xa.a,{color:"red"},"\u5931\u8d25")},Ia=fa.a.Column,Na=function(e){var t=e.data,a=Object(n.useState)(),c=Object(f.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.queryBatchDetails(t);case 3:a=e.sent,i(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[t]),r.a.createElement(fa.a,{size:"small",dataSource:l,rowKey:function(e){return e.id},pagination:{pageSize:5,showSizeChanger:!1}},r.a.createElement(Ia,{title:"ID",dataIndex:"id",key:"id"}),r.a.createElement(Ia,{title:"\u536b\u661f\u7f16\u53f7",dataIndex:"dataType",key:"dataType"}),r.a.createElement(Ia,{title:"srcURL",dataIndex:"srcUrl",key:"srcUrl",ellipsis:!0}),r.a.createElement(Ia,{title:"destURL",dataIndex:"destUrl",key:"destUrl",ellipsis:!0}),r.a.createElement(Ia,{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return wa[e]}}))},Aa=function(e){var t=e.batchInfos;return r.a.createElement(fa.a,{size:"small",dataSource:t,rowKey:function(e){return e.id},pagination:{showTotal:function(){return"\u5171".concat(t.length,"\u6761")},showSizeChanger:!0,defaultPageSize:30},expandedRowRender:function(e){return r.a.createElement(Na,{data:e})}},r.a.createElement(Ia,{title:"ID",dataIndex:"id",key:"id"}),r.a.createElement(Ia,{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return wa[e]}}),r.a.createElement(Ia,{title:"\u603b\u6570",dataIndex:"total",key:"total"}),r.a.createElement(Ia,{title:"\u5df2\u5b8c\u6210",dataIndex:"finished",key:"finished"}),r.a.createElement(Ia,{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"startTime",key:"startTime"}),r.a.createElement(Ia,{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"finishedTime",key:"finishedTime"}))},Ma=(a(300),a(131)),La=(a(986),Qe.TMap.EditablePopupedGeoJSON),Da=Qe.TMap.BoundsFit,Ra=Qe.TMap.Toolbar,qa=function(e){return r.a.createElement("span",null,e)},Pa={timeRange:{Name:"\u65f6\u95f4\u8303\u56f4:",Component:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,e.beginTime,"~",e.endTime),r.a.createElement("div",{className:"condition-months"},r.a.createElement("span",null,"\u6d89\u53ca\u6708\u4efd\uff1a",e.includeMonths)))}},dataType:{Name:"\u536b\u661f\u7f16\u53f7:",Component:qa},waves:{Name:"\u9009\u62e9\u6ce2\u6bb5:",Component:qa},waveAggregations:{Name:"\u5f69\u8272\u5408\u6210:",Component:qa},shape:{Name:"\u7a7a\u95f4\u8303\u56f4:",Component:function(e){return"SHAPE"===e.type?r.a.createElement(Qe.TMap,{className:"condition-info-map"},r.a.createElement(Ra,{options:{enables:[]}}),r.a.createElement(La,{data:e.value}),r.a.createElement(Da,{shapes:[e.value]})):"TILE"===e.type?r.a.createElement(r.a.Fragment,null,e.value):"ADMINISTRATIVE_REGION"===e.type?r.a.createElement(r.a.Fragment,null,e.description):null}},description:{Name:"\u4efb\u52a1\u63cf\u8ff0:",Component:qa},noInfo:{Name:null,Component:function(e){return r.a.createElement("span",null,e.message," ")}}},Fa=function(e){var t=e.infos,a=e.onCancel,n=e.conditionModalShow,c=e.conditionModalLoading;return r.a.createElement(We.a,{title:"\u4efb\u52a1\u65f6\u7a7a\u4fe1\u606f",visible:n,onCancel:function(){a()},footer:null},r.a.createElement("div",{className:"condition-modal-loading"},r.a.createElement(Ma.a,{spinning:c},t&&r.a.createElement("ul",{className:"condition-info"},Object.keys(t).map((function(e){return Pa[e]&&t[e]?r.a.createElement("li",{key:e},r.a.createElement("span",null,Pa[e].Name),r.a.createElement("span",null,Pa[e].Component(t[e]))):null}))))))},Ka=a(575),Ya=a(2),Ua=a.n(Ya),Ga=(a(987),function(e){return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,c=t.confirm,l=t.clearFilters;return r.a.createElement("div",{className:"filter-list-dropdown"},r.a.createElement(Le.a,{className:"dropdown-input",placeholder:"\u6309".concat(e,"\u7b5b\u9009"),value:n?n[0]:null,onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:c}),r.a.createElement(ke.a,{className:"dropdown-OK",type:"primary",onClick:c,size:"small"},"\u786e\u8ba4"),r.a.createElement(ke.a,{className:"dropdown-cancel",onClick:l,size:"small"},"\u91cd\u7f6e"))},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},filterIcon:function(e){return r.a.createElement(Ka.a,{className:Ua()(e?"table-filter-icon":void 0)})}}}),Va=fa.a.Column,Ba={normal:"NORMAL",gazing:"GAZING"},za=function(e){var t=e.manner,a=Object(n.useState)(),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(),o=Object(f.a)(u,2),s=o[0],m=o[1],b=Object(n.useState)(!1),v=Object(f.a)(b,2),g=v[0],O=v[1],k=Object(n.useState)(!0),h=Object(f.a)(k,2),y=h[0],C=h[1],S=Object(n.useState)({}),T=Object(f.a)(S,2),x=T[0],w=T[1],I=Object(n.useState)(null),N=Object(f.a)(I,2),A=N[0],M=N[1],L=Object(n.useState)(!1),D=Object(f.a)(L,2),R=D[0],q=D[1],P=Object(n.useState)(!1),F=Object(f.a)(P,2),K=F[0],Y=F[1];Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.queryTasksByMode(Ba[t]);case 3:a=e.sent,i(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:return e.prev=10,C(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))()}),[t]);var U=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.queryDownloadCondition(t);case 3:a=e.sent,M(a),Y(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),G=function(e,t){i(l.map((function(a){return a===e?Object(E.a)(Object(E.a)({},a),{},{allowOperation:"PAUSE"===t?"RESUME":"PAUSE"}):a})))},V=function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.changeStatus(t,a);case 3:G(t,a),j.b.success("".concat(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.changeStatus(t,"DELETE");case 3:i(a.filter((function(e){return e.id!==t.id}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),z=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.queryBatchInfos(t);case 3:a=e.sent,m(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement("div",{className:"task-list"},r.a.createElement(Oe.a,null,r.a.createElement(fa.a,{size:"small",dataSource:l,rowKey:function(e){return e.id},loading:y,pagination:{showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,defaultPageSize:30}},r.a.createElement(Va,{title:"\u4efb\u52a1ID",dataIndex:"id",key:"id"}),r.a.createElement(Va,Object.assign({title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name",key:"name"},Ga("name"))),r.a.createElement(Va,{title:"\u4efb\u52a1\u65f6\u7a7a\u4fe1\u606f",render:function(e){return r.a.createElement(ke.a,{type:"link",onClick:function(){var t;t=e.id,U(t),q(!0),Y(!0)}},"\u67e5\u770b")}}),r.a.createElement(Va,{title:"\u4efb\u52a1\u8fdb\u5ea6",key:"progress",render:function(e){return 0===e.totalCount?"\u65e0\u4efb\u52a1":r.a.createElement(Sa.a,{content:r.a.createElement("span",null,e.finishedCount," / ",e.totalCount)},r.a.createElement(Ta.a,{percent:Math.floor(e.finishedCount/e.totalCount*100),status:0===e.failedCount?null:"exception"}))}}),"gazing"===t?r.a.createElement(Va,{title:"\u6700\u540e\u66f4\u65b0\u65f6\u95f4",key:"updatedAt",dataIndex:"updatedAt"}):null,r.a.createElement(Va,{title:"\u521b\u5efa\u8005",key:"creator",dataIndex:"creator"}),r.a.createElement(Va,{title:"\u64cd\u4f5c",key:"action",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"link",onClick:function(){O(!0),w(x),z(e)}},"\u67e5\u770b\u8fdb\u5ea6"),r.a.createElement(ke.a,{type:"link",disabled:"PAUSE"!==e.allowOperation,onClick:function(){V(e,"PAUSE")}},"\u6682\u505c"),r.a.createElement(ke.a,{type:"link",disabled:"RESUME"!==e.allowOperation,onClick:function(){V(e,"RESUME")}},"\u91cd\u542f"),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){B(e,l)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}})),r.a.createElement(Fa,{infos:A,onCancel:function(){M(null),q(null)},conditionModalLoading:K,conditionModalShow:R}),r.a.createElement(We.a,{width:850,title:"\u8be6\u60c5",visible:g,onCancel:function(){w({}),O(!1)},footer:[r.a.createElement(ke.a,{key:"submit",type:"primary",onClick:function(){return O(!1)}},"\u786e\u8ba4")]},r.a.createElement("h3",null,"\u6267\u884c\u8fdb\u5ea6:"),r.a.createElement(Aa,{batchInfos:s}))))},Ha=(a(988),function(){var e=Object(P.g)(),t=oe().get("manner")||"normal",a=R().headerNav,c=a.mount,l=a.unMount,i=a.active,u=a.setActive,o=Object(n.useCallback)((function(t){e.push("/app/data/satellite-tasks?manner=".concat(t))}),[e]);return Object(n.useEffect)((function(){return c({type:"tabs",items:[{name:"\u5e38\u89c4\u6a21\u5f0f",key:"normal"},{name:"\u51dd\u89c6\u6a21\u5f0f",key:"gazing"}],onChange:o}),function(){l()}}),[c,o,l]),Object(n.useEffect)((function(){u(t)}),[t,u]),r.a.createElement(r.a.Fragment,null,"normal"===i&&r.a.createElement(za,{manner:"normal"}),"gazing"===i&&r.a.createElement(za,{manner:"gazing"}))}),Ja=fa.a.Column,Wa=function(e){var t=e.loading,a=e.tasks,c=e.fetchTasksList,l=Object(n.useState)(),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(!1),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(!1),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.queryWaveInfo(t);case 3:a=e.sent,o(a),h(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),E=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.deleteWaveTask(t);case 3:c(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c]);return r.a.createElement("div",{className:"wave-tasks-list"},r.a.createElement(Oe.a,null,r.a.createElement(fa.a,{size:"small",dataSource:a,rowKey:function(e){return e.id},pagination:{showTotal:function(){return"\u5171".concat(a.length,"\u6761")},showSizeChanger:!0,defaultPageSize:30},loading:t},r.a.createElement(Ja,{title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name",key:"name"}),r.a.createElement(Ja,{title:"\u4efb\u52a1\u4fe1\u606f",dataIndex:"id",key:"id",render:function(e){return r.a.createElement(ke.a,{type:"link",onClick:function(){!function(e){y(e),v(!0),h(!0)}(e)}},"\u8be6\u60c5")}}),r.a.createElement(Ja,{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",key:"createdAt"}),r.a.createElement(Ja,{title:"\u64cd\u4f5c",key:"action",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.b,{to:"/app/data-wave?type=".concat(e.geometryType,"&id=").concat(e.id,"&name=").concat(e.name)},r.a.createElement(ke.a,{type:"link",disabled:!e.operations[0].enable},"\u67e5\u770b")),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){E(e.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link",disabled:!e.operations[1].enable},"\u5220\u9664")))}}))),r.a.createElement(Fa,{infos:u,conditionModalShow:b,conditionModalLoading:k,onCancel:function(){o({}),v(!1)}}))},Qa=function(e){var t=e.fetchTasksList,a=e.setLoading,c=Object(n.useState)(null),l=Object(f.a)(c,2),i=l[0],u=l[1],o=Object(n.useState)([]),s=Object(f.a)(o,2),m=s[0],b=s[1],v=Object(n.useState)(!1),g=Object(f.a)(v,2),O=g[0],k=g[1],h=Object(n.useMemo)((function(){return[{filterType:"TIME_RANGER",valueKey:"timeRange",required:!0},{filterType:"SPACE",valueKey:"space",required:!0,spaceOptions:[{key:"\u624b\u52a8\u5212\u533a",value:"SHAPE"},{key:"GeoJson",value:"GEOJSON"},{key:"\u7ecf\u7eac\u5ea6",value:"POINTER"}]},{filterType:"TREE_SELECT",valueKey:"waves",treeData:m,required:!0,multiple:!0},{filterType:"INPUT",valueKey:"name",label:"\u4efb\u52a1\u540d\u79f0",required:!0}]}),[m]),y=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=10;break}return k(!0),a(!0),r=n.timeRange,c=n.space.value,"POINTER"===n.space.type&&(c=JSON.stringify({type:"Point",coordinates:[n.space.lon,n.space.lat]})),e.next=9,Te.createWaveTask({timeRange:{beginTime:r.dates[0].format("YYYY-MM-DDT00:00:00"),endTime:r.dates[1].format("YYYY-MM-DDT23:59:59"),includeMonths:r.includeMonths},shape:{type:"SHAPE",value:c},waves:n.waves},n.name);case 9:t();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),j.b.error(e.t0.message);case 15:return e.prev=15,k(!1),a(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,12,15,19]])})));return function(t){return e.apply(this,arguments)}}(),[t,a]),E=Object(n.useMemo)((function(){return!i||!i.timeRange.dates||!i.timeRange.dates.length||!i.timeRange.includeMonths||!i.waves||!i.waves.length||!i.name}),[i]);return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.getAllWaves();case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(Oe.a,{className:"create-task-card"},r.a.createElement(ua,{enabledFilters:h,layout:"inline",value:i,onChange:function(e){u(e)}}),r.a.createElement(he.a.Item,null,r.a.createElement(ke.a,{className:"waves-submit-button",type:"primary",disabled:E,onClick:function(){y(i)},loading:O},"\u521b\u5efa")))},_a=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Te.queryWaveDataInfo(e);case 4:a=t.sent,c(a);case 6:case"end":return t.stop()}}),t)})))()}),[e]),{taskDatas:r}},Xa={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};function Za(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250,c=Math.ceil(t),l="now"in window.performance?performance.now():(new Date).getTime(),i=Math.ceil(e.scrollLeft),u=Math.ceil(e.scrollLeft)+c,o=Math.ceil(e.scrollWidth-e.offsetWidth),s=function t(){var s="now"in window.performance?performance.now():(new Date).getTime(),m=Math.min(1,(s-l)/r),p=Xa[n](m),d=Math.ceil(i+p*c);return d>o?e.scrollLeft=o:d<0?e.scrollLeft=0:(e.scrollLeft=d,void(d!==u&&(a=window.requestAnimationFrame(t))))};return s(),function(){a&&window.cancelAnimationFrame(a)}}var $a=function(e){var t=e.img,a=e.showLargeImg,c=e.appendScroll,l=e.onWheel,i=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=i.current;if(e){var t=Za(e,-e.scrollLeft,"easeInOutCubic",0);return c((function(a){a.stopPropagation(),a.preventDefault(),0!==e.deltaY&&(t=Za(e,a.deltaY,"easeInOutCubic",0)),0!==e.deltaX&&(t=Za(e,a.deltaX,"easeInOutCubic",0))})),e.addEventListener("wheel",l),function(){e.removeEventListener("wheel",l),t()}}}),[c,l]),r.a.createElement("div",{className:"wave-img-list",key:t.simageUrl,ref:i},t.data.map((function(e){return r.a.createElement("div",{className:"wave-img-list-simg",key:e.simageUrl+e.limageUrl,onClick:function(){a(e)}},r.a.createElement("img",{src:"https://tile-cdn.terraqt.com/".concat(e.simageUrl),alt:"img",key:e.simageUrl}),r.a.createElement("div",{className:"wave-img-list-time",key:e.limageUrl},e.time))})))},en={modalShow:!1,imgUrl:""},tn=function(e,t){var a=t.type,n=t.value;return"imageShow"===a?Object(E.a)(Object(E.a)({},e),{},{modalShow:!0,imgUrl:n}):"imageHide"===a?Object(E.a)(Object(E.a)({},e),{},{modalShow:!1,imgUrl:""}):e},an=function(){var e=function(e,t){var a=Object(n.useReducer)(e,t),r=Object(f.a)(a,2),c=r[0],l=r[1];return[c,Object(n.useCallback)((function(e,t){l({type:e,value:t})}),[])]}(tn,en),t=Object(f.a)(e,2);return[t[0],t[1]]},nn=function(e){var t=e.taskId,a=an(),c=Object(f.a)(a,2),l=c[0],i=c[1],u=_a(t).taskDatas,o=Object(n.useRef)([]),s=R().headerNav,m=s.mount,p=s.unMount,d=Object(P.g)(),b=oe().get("name"),v=Object(n.useCallback)((function(e){e&&d.push(e)}),[d]),g=Object(n.useCallback)((function(e){o.current=[].concat(Object(y.a)(o.current),[e])}),[]),O=Object(n.useCallback)((function(e){o.current.forEach((function(t){return t(e)}))}),[]);Object(n.useEffect)((function(){return m({type:"breadcrumb",items:[{name:"\u6570\u636e\u8c03\u8bd5",key:"/app/data-wave"},{name:b,key:null}],onChange:v}),function(){p()}}),[m,v,b,p]);var k=Object(n.useCallback)((function(e){var t="https://tile-cdn.terraqt.com/".concat(e.limageUrl);i("imageShow",t)}),[i]);return r.a.createElement(r.a.Fragment,null,u.map((function(e){return r.a.createElement(Oe.a,{className:"wave-img-list-card",title:e.title,key:e.title},r.a.createElement($a,{img:e,showLargeImg:k,appendScroll:function(e){g(e)},onWheel:function(e){O(e,o)}}))})),r.a.createElement(Qe.ImageViewer,{visible:l.modalShow,url:l.imgUrl,onClose:function(){i("imageHide")}}))},rn=(a(989),a(621)),cn=a.n(rn),ln=a(625),un=a.n(ln),on=a(418),sn=a.n(on),mn=a(421),pn=a.n(mn),dn=a(420),fn=a.n(dn),bn=a(419),vn=a.n(bn),gn=a(622),On=a.n(gn),kn=function(e){var t=e.data;return r.a.createElement(cn.a,null,r.a.createElement(On.a,{data:t,margin:{top:8,right:2,left:2,bottom:28}},r.a.createElement(vn.a,{type:"monotone",dataKey:"value",stroke:"#0c9797"}),r.a.createElement(fn.a,{dataKey:"time",angle:28,dx:64,dy:40}),r.a.createElement(pn.a,null),r.a.createElement(un.a,{strokeDasharray:"4 6"}),r.a.createElement(sn.a,null)))},hn=function(e){var t=e.taskId,a=R().headerNav,c=a.mount,l=a.unMount,i=Object(P.g)(),u=oe().get("name"),o=_a(t).taskDatas||[],s=Object(n.useCallback)((function(e){e&&i.push(e)}),[i]);return Object(n.useEffect)((function(){return c({type:"breadcrumb",items:[{name:"\u6570\u636e\u8c03\u8bd5",key:"/app/data-wave"},{name:u,key:null}],onChange:s}),function(){l()}}),[c,s,u,l]),o.map((function(e){return r.a.createElement(Oe.a,{className:"wave-chart-card",title:e.title,key:e.title},r.a.createElement(kn,{data:e.data}))}))},yn=(a(1132),function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,Te.getWaveTasksList();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]),m=oe(),b=m.get("type"),v=m.get("id"),g=Object(n.useMemo)((function(){return a.find((function(e){return e.id===Number(v)}))||{}}),[v,a]);return Object(n.useEffect)((function(){s()}),[s]),"POLYGON"===b?r.a.createElement(nn,{taskId:g.id}):"POINT"===b?r.a.createElement(hn,{taskId:g.id}):r.a.createElement("div",{className:"task-create"},r.a.createElement(Qa,{fetchTasksList:s,setLoading:o}),r.a.createElement(Wa,{tasks:a,fetchTasksList:s,loading:u,setLoading:o}))}),En=function(e){var t=e.setSelectedTag,a=e.tags;return r.a.createElement("div",{className:"sample-tag-background"},r.a.createElement($e.a,{className:"create-tag-cascader",popupClassName:"sample-tag-menu",popupVisible:"true",options:a,expandTrigger:"hover",changeOnSelect:!0,onChange:function(e){return t(e[e.length-1])}}))},jn=(a(528),a(155)),Cn=function(e){var t=e.searchResult,a=e.setSelectedTag,c=e.selectedTag,l=Object(P.g)(),i=Object(n.useCallback)((function(){a(null),l.push("/app/data/tag-samples")}),[l,a]);return r.a.createElement(Oe.a,{className:"sample-search-result-card"},r.a.createElement(ye.a.Group,{className:"result-list",value:c,onChange:function(e){a(e.target.value)}},r.a.createElement(jn.b,{dataSource:t,itemLayout:"horizontal",footer:r.a.createElement(ke.a,{className:"back-btn",type:"primary",onClick:i},"\u8fd4\u56de\u5217\u8868"),renderItem:function(e){return r.a.createElement(jn.b.Item,null,r.a.createElement(ye.a,{value:e.id}),r.a.createElement(jn.b.Item.Meta,{title:e.fullPathTitle}))}})))},Sn=a(355),Tn=[{label:"\u6807\u7b7e\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0},{label:"\u6807\u7b7e\u5c42\u7ea7",filterType:"RADIO_LIST",valueKey:"position",required:!0,optionSource:[{value:"CHILD",name:"\u5f53\u524d\u9009\u4e2d\u5b50\u7ea7"},{value:"BROTHER",name:"\u5f53\u524d\u9009\u4e2d\u540c\u7ea7"}]}],xn=[{label:"\u6807\u7b7e\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0}],wn=function(e){var t=e.editType,a=e.modalShow,c=e.setModalShow,l=e.setSelectedTag,i=e.selectedTag,u=e.getAllSamples,o=Object(n.useState)({}),s=Object(f.a)(o,2),m=s[0],b=s[1],v=Object(n.useState)(!1),g=Object(f.a)(v,2),O=g[0],k=g[1],h=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,t=i.split("/")[0],e.next=5,Te.createLabel(t,m.name,m.position);case 5:u(),b({});case 7:return e.prev=7,k(!1),c(!1),e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[1,,7,11]])}))),[u,i,c,m.name,m.position]),y=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),t=String(i).includes("/")?i.split("/")[1]:Number(i),e.prev=2,e.next=5,Te.updateLabelName(t,m.name);case 5:u();case 6:return e.prev=6,b({}),k(!1),c(!1),e.finish(6);case 11:case"end":return e.stop()}}),e,null,[[2,,6,11]])}))),[u,i,c,m.name]),E=Object(n.useCallback)((function(){"create"===t?h():y()}),[h,t,y]),j=Object(n.useCallback)((function(){l(null),c(!1)}),[c,l]),C=Object(n.useMemo)((function(){return!m.name}),[m.name]);return r.a.createElement(Sn.DraggableModalProvider,null,r.a.createElement(Sn.DraggableModal,{initialWidth:500,initialHeight:250,title:{create:"\u65b0\u5efa",update:"\u7f16\u8f91"}[t],visible:a,onOk:E,onCancel:j,okButtonProps:{disabled:C,loading:O}},r.a.createElement(ua,{enabledFilters:"create"===t?Tn:xn,value:m,onChange:b})))},In=(a(1134),Pe.a.Option),Nn=Le.a.Search,An=[{name:"\u540d\u79f0",value:"NAME"},{name:"\u7f16\u53f7",value:"CODE"}],Mn=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)("NAME"),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)([]),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useState)(null),E=Object(f.a)(y,2),j=E[0],C=E[1],S=Object(n.useState)(!1),T=Object(f.a)(S,2),w=T[0],I=T[1],N=Object(P.g)(),A=oe().get("type"),M=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.getAllLabel();case 2:t=e.sent,x(t,!0).forEach((function(e){var t=e.children;e.value=e.code+"/"+e.id,e.label=e.title,e.key=e.id,e.children=t.length?t:null})),c(t);case 6:case"end":return e.stop()}}),e)}))),[]),L=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.searchLabel(b,t);case 2:a=e.sent,h(a),N.push("/app/data/tag-samples?type=search");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N,b]),D=Object(n.useCallback)((function(){I(!0),o("update")}),[]),R=Object(n.useCallback)((function(){I(!0),o("create")}),[]);return Object(n.useEffect)((function(){M()}),[M]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"label-top-tools"},r.a.createElement("div",null,r.a.createElement(ke.a,{className:"tag-create-btn",type:"primary",onClick:R,disabled:!j||"search"===A},"\u65b0\u589e"),r.a.createElement(ke.a,{className:"tag-edit-btn",type:"primary",onClick:D,disabled:!j},"\u7f16\u8f91")),r.a.createElement(Le.a.Group,{compact:!0,className:"input-group"},r.a.createElement(Pe.a,{value:b,onChange:function(e){return v(e)}},An.map((function(e){return r.a.createElement(In,{value:e.value,key:e.value},e.name)}))),r.a.createElement(Nn,{className:"sample-tag-search",placeholder:"\u8bf7\u8f93\u5165",allowClear:!0,onSearch:function(e){C(null),L(e)}}))),r.a.createElement(wn,{modalShow:w,setModalShow:I,selectedTag:j,setSelectedTag:C,editType:u,getAllSamples:M}),"search"===A?r.a.createElement(Cn,{searchResult:k,selectedTag:j,setSelectedTag:C}):r.a.createElement(En,{setSelectedTag:C,tags:a}))},Ln=function(e){var t=e.tags,a=e.loading,c=Object(P.g)(),l=Object(n.useCallback)((function(){c.push("/app/data/tag-regions")}),[c]);return r.a.createElement(Oe.a,{className:"region-tag-card"},r.a.createElement(jn.b,{className:"serach-result-list",dataSource:t,itemLayout:"horizontal",loading:a,footer:r.a.createElement(ke.a,{className:"back-btn",type:"primary",onClick:l},"\u8fd4\u56de\u5217\u8868"),renderItem:function(e){return r.a.createElement(jn.b.Item,null,r.a.createElement(jn.b.Item.Meta,{title:e.fullPathTitle}))}}))};function Dn(e){return Rn.apply(this,arguments)}function Rn(){return(Rn=Object(d.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([C.getRegion(t),C.getDescendant(t)]);case 2:return a=e.sent,n=Object(f.a)(a,2),r=n[0],c=n[1],r.children=c,x([r]).forEach((function(e){e.label=e.title})),e.abrupt("return",[r]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qn(e){return Pn.apply(this,arguments)}function Pn(){return(Pn=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getDescendant(t);case 2:return x(a=e.sent).forEach((function(e){e.label=e.title})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fn=function(e){return e[e.length-1]},Kn=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="WORLD"===t?qn:Dn,e.next=3,a(t);case 3:n=e.sent,c(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e("WORLD")}),[]),r.a.createElement("div",{className:"region-tag-background"},r.a.createElement($e.a,{className:"region-tag-cascader",popupClassName:"region-tag-menu",popupVisible:"true",options:a,expandTrigger:"hover",displayRender:Fn}))},Yn=(a(1135),Pe.a.Option),Un=Le.a.Search,Gn=[{name:"\u540d\u79f0",value:"NAME"},{name:"\u7f16\u53f7",value:"CODE"}],Vn=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("NAME"),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(!1),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(P.g)(),O=oe().get("type"),k=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,Te.searchRegion(u,t).then((function(e){return c(e)}));case 4:g.push("/app/data/tag-regions?type=search");case 5:return e.prev=5,v(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t){return e.apply(this,arguments)}}(),[u,g]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"region-tag-tools"},r.a.createElement(Le.a.Group,{className:"region-tag-search",compact:!0},r.a.createElement(Pe.a,{value:u,onChange:function(e){o(e)}},Gn.map((function(e){return r.a.createElement(Yn,{value:e.value,key:e.value},e.name)}))),r.a.createElement(Un,{className:"search-input",placeholder:"\u8bf7\u8f93\u5165",allowClear:!0,onSearch:function(e){return k(e)}}))),"search"===O?r.a.createElement(Ln,{tags:a,loading:b}):r.a.createElement(Kn,null))},Bn=(a(529),a(181)),zn=a(571),Hn=a(568),Jn=fa.a.Column,Wn=function(e){var t=e.files,a=e.fetchFileList,c=e.loading,l=e.setLoading,i=Object(n.useState)(!1),u=Object(f.a)(i,2),o=u[0],m=u[1],b=Object(n.useState)([]),v=Object(f.a)(b,2),g=v[0],O=v[1],k=Object(n.useState)([]),h=Object(f.a)(k,2),y=h[0],E=h[1],C=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,Jt.deleteFile(t?[t]:g);case 4:j.b.success("\u5220\u9664\u6210\u529f"),a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.queryChangeLogs(t,"SAMPLE_FILE");case 3:a=e.sent,E(a),m(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{className:"sample-file-card"},r.a.createElement("span",null,r.a.createElement(q.b,{to:"/app/sample-file?type=info"},r.a.createElement(ke.a,{type:"primary"},r.a.createElement(zn.a,null),"\u65b0\u589e\u6587\u4ef6")),r.a.createElement(ke.a,{className:"file-list-delete-btn",disabled:0===g.length,onClick:function(){C()}},r.a.createElement(Hn.a,null),"\u6279\u91cf\u5220\u9664")),r.a.createElement(fa.a,{size:"small",className:"sample-file-table",dataSource:t,rowKey:function(e){return e.id},pagination:{showTotal:function(){return"\u5171".concat(t.length,"\u6761")},showSizeChanger:!0,defaultPageSize:30},rowSelection:{setDeleteIds:O,onChange:O},loading:c},r.a.createElement(Jn,{title:"ID",dataIndex:"id",key:"id",render:function(e,t){return r.a.createElement(q.b,{to:"/app/sample-file?type=map&id=".concat(t.id)},e)}}),r.a.createElement(Jn,{className:"file-list-column-fileName",title:"\u6587\u4ef6\u540d\u79f0",dataIndex:"fileName",key:"fileName"}),r.a.createElement(Jn,{title:"\u5f71\u50cf\u65f6\u95f4",dataIndex:"imageTime",key:"imageTime"}),r.a.createElement(Jn,{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"uploadTime",key:"uploadTime"}),r.a.createElement(Jn,{title:"\u4e0a\u4f20\u7528\u6237",dataIndex:"uploader",key:"uploader"}),r.a.createElement(Jn,{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"link",onClick:function(){S(t.id)}},"\u53d8\u66f4\u8bb0\u5f55"),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){C(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}}))),r.a.createElement(We.a,{width:450,title:"\u8be6\u60c5",visible:o,onCancel:function(){m(!1)},footer:[r.a.createElement(ke.a,{key:"submit",type:"primary",onClick:function(){return m(!1)}},"\u786e\u8ba4")]},r.a.createElement(Bn.a,null,y.length<1&&r.a.createElement("span",null,"\u6682\u65e0\u64cd\u4f5c\u8bb0\u5f55"),y.map((function(e){return r.a.createElement(Bn.a.Item,{key:e.time},r.a.createElement("span",{className:"operation-record-user"},e.user),r.a.createElement("span",null,e.description)," ",r.a.createElement("br",null),r.a.createElement("span",null,s()(e.time).format("YYYY-HH-MM hh:mm:ss")))})))))},Qn={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:18}}},_n=fa.a.Column,Xn=function(e){var t=e.file,a=e.fetchFileList,c=R().headerNav,l=Object(n.useState)(t),i=Object(f.a)(l,2),u=i[0],o=i[1],m=Object(P.g)(),b=c.mount,v=c.unMount,g=Object(n.useMemo)((function(){var e=u.tagMapper||{};return Object.keys(e).map((function(t){return{tag:Number(t),mapper:e[t]}}))}),[u]),O=function(){m.push("/app/sample-file?type=list")},k=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.updateFile(u);case 3:a(),Object(I.d)("file-info"),j.b.success("\u63d0\u4ea4\u6210\u529f~"),O(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j.b.error(e.t0.message?e.t0.message:"\u670d\u52a1\u5668\u672a\u77e5\u9519\u8bef");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(t);case 2:a=e.sent,JSON.parse(a[0].text).features?y(a[0].text):j.b.error("\u8bf7\u4f7f\u7528\u6b63\u786e\u7684 geojson \u683c\u5f0f\uff01");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.uploadFile(t);case 3:a=e.sent,o(a),Object(I.e)("file-info",JSON.stringify(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),C=Object(n.useCallback)((function(e){e&&m.push(e)}),[m]);return Object(n.useEffect)((function(){return b({type:"breadcrumb",items:[{name:"\u6837\u672c\u4e0a\u4f20",key:"/app/sample-file?type=list"},{name:"\u65b0\u589e\u6587\u4ef6",key:null}],onChange:C}),function(){v()}}),[b,C,v]),Object(n.useEffect)((function(){var e=JSON.parse(Object(I.a)("file-info"));e&&o(e)}),[]),Object(n.useEffect)((function(){t.id&&o(t)}),[t]),r.a.createElement(Oe.a,{className:"file-info-card"},r.a.createElement(he.a,Qn,r.a.createElement(he.a.Item,{label:"\u6587\u4ef6\u9009\u62e9",required:"true"},r.a.createElement(ke.a,{type:"primary",ghost:!0,disabled:!!u.id},r.a.createElement(Je.a,null),r.a.createElement("label",{htmlFor:"file",className:"input-file-label"},"\u4e0a\u4f20\u6807\u6ce8\u6587\u4ef6")),r.a.createElement("input",{className:"input-file",name:"file",id:"file",type:"file",accept:".geojson",onChange:h})),r.a.createElement(he.a.Item,{label:"\u6587\u4ef6\u540d\u79f0",required:"true"},r.a.createElement(Le.a,{className:"form-item",placeholder:"\u8bf7\u8f93\u5165",value:u.fileName,onChange:function(e){o(Object(E.a)(Object(E.a)({},u),{},{fileName:e.target.value}))}})),r.a.createElement(he.a.Item,{label:"\u5f71\u50cf\u65f6\u95f4",required:"true"},r.a.createElement(Ie.a,{className:"form-item",value:u.imageTime?s()(u.imageTime):null,onChange:function(e){o(Object(E.a)(Object(E.a)({},u),{},{imageTime:e.format().slice(0,19)}))}})),r.a.createElement(he.a.Item,{label:"\u64cd\u4f5c\u4eba\u5458",required:"true"},r.a.createElement(Le.a,{className:"form-item",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u59d3\u540d",disabled:void 0!==t.uploader,value:u.uploader,onChange:function(e){o(Object(E.a)(Object(E.a)({},u),{},{uploader:e.target.value}))}})),r.a.createElement(he.a.Item,{label:"\u6620\u5c04\u5173\u7cfb"},r.a.createElement(fa.a,{dataSource:g,rowKey:function(e){return e.tag},className:"tag-table",bordered:!0,pagination:{defaultPageSize:30,showSizeChanger:!0}},r.a.createElement(_n,{title:"\u6807\u7b7e",dataIndex:"tag",key:"tag"}),r.a.createElement(_n,{title:"\u5730\u7269\u6807\u7b7e",dataIndex:"crop",key:"crop",render:function(e,t){var a=t.mapper&&t.mapper.id;return r.a.createElement(Gt,{value:a,onChange:function(e){u.tagMapper[t.tag]={id:e,parentId:null,name:null,children:null,code:null},o(Object(E.a)({},u))},changeOnSelect:!0})}}))),r.a.createElement(he.a.Item,{wrapperCol:{sm:{span:14,offset:4}},required:"true"},r.a.createElement(ke.a,{type:"primary",onClick:k},"\u63d0\u4ea4"),r.a.createElement(ke.a,{className:"cancel-btn",onClick:function(){Object(I.d)("file-info"),O()}},"\u53d6\u6d88"))))},Zn=a(360);function $n(e){return function(t){return t.map((function(t){var a,n=e.find((function(e){return e.tagCode===(t.tag&&t.tag.code)})),r=n&&n.settings&&n.settings.borderColor,c=r?"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")"):"#fdd835";return Object(E.a)(Object(E.a)({},t),{},{data:{type:"Feature",properties:{id:t.id},geometry:(a=t.shape,"MultiPolygon"===a.type?{type:"Polygon",coordinates:a.coordinates[0]}:a)},properties:{"\u6837\u672cid":t.id,"\u6807\u8bb0\u4eba":t.creator,"\u72b6\u6001":t.status,"\u5730\u7269\u6807\u7b7e":t.tagDescription,"\u5f71\u50cf\u65f6\u95f4":s()(t.imageTime).format("YYYY-MM-DD")},style:{color:c}})}))}}function er(){var e=R().account.tagColors,t=Object(n.useRef)($n(e));return Object(n.useEffect)((function(){t.current=$n(e)}),[e]),t.current}var tr=Zn.TMap.EditablePopupedGeoJSON,ar=Zn.TMap.BoundsFit,nr=function(){var e=oe(),t=Object(P.g)(),a=er(),c=R().headerNav,l=e.get("id"),i=c.mount,u=c.unMount,o=Object(n.useState)([]),s=Object(f.a)(o,2),m=s[0],b=s[1],v=Object(n.useMemo)((function(){return m.map((function(e){return e.data}))}),[m]),g=Object(n.useCallback)((function(e){e&&t.push(e)}),[t]);return Object(n.useEffect)((function(){return i({type:"breadcrumb",items:[{name:"\u6837\u672c\u4e0a\u4f20",key:"/app/sample-file?type=list"},{name:"\u9884\u89c8",key:null}],onChange:g}),function(){u()}}),[i,g,u]),Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.previewSampleTags(l);case 2:t=e.sent,b(a(t));case 4:case"end":return e.stop()}}),e)})))()}),[a,l]),r.a.createElement(Zn.TMap,{className:"file-tmap"},r.a.createElement(ar,{shapes:v}),m.map((function(e){return r.a.createElement(tr,{key:e.id,data:e.data,properties:e.properties,style:e.style})})))},rr=(a(1144),function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,Jt.queryFileList();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]),m=oe(),b=m.get("type"),v=m.get("id"),g=Object(n.useMemo)((function(){return a.find((function(e){return e.id===Number(v)}))||{}}),[a,v]);return Object(n.useEffect)((function(){s()}),[s]),"info"===b?r.a.createElement(Xn,{file:g,fetchFileList:s}):"map"===b?r.a.createElement(nr,null):r.a.createElement(Wn,{files:a,fetchFileList:s,loading:u,setLoading:o})}),cr=[{filterType:"DATES",valueKey:"dates"},{filterType:"SPACE",valueKey:"shape",required:!0},{filterType:"MARK_TAG",valueKey:"markTag",changeOnSelect:!0,commonlyUsedEnable:!0}],lr=function(e){var t=e.setSamples,a=Object(n.useState)({}),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(!1),o=Object(f.a)(u,2),s=o[0],m=o[1],b=Object(n.useMemo)((function(){return l.shape&&l.shape.value}),[l]),v=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var a,n,r,c,i,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),a=l.dates?l.dates.map((function(e){return e.format().slice(0,19)})):[],n=Object(f.a)(a,2),r=n[0],c=n[1],"TILE"===(i=Object(E.a)({},l.shape)).type&&(i.value=JSON.stringify(i.value.split(";").filter((function(e){return e.length})))),u={beginTime:r,endTime:c,tagIds:l.markTag?[l.markTag]:null,shape:i},e.prev=5,e.next=8,Jt.querySamples(u);case 8:if(0!==(o=e.sent).length){e.next=11;break}return e.abrupt("return",j.b.info("\u672a\u67e5\u8be2\u5230\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u6837\u672c\uff01"));case 11:t(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),j.b.error(e.t0.message);case 17:return e.prev=17,m(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,14,17,20]])}))),[l,t]);return r.a.createElement(Oe.a,{className:"sample-query-filters"},r.a.createElement(ua,{value:l,enabledFilters:cr,onChange:i,layout:"vertical"}),r.a.createElement(ke.a,{type:"primary",block:!0,disabled:!b,onClick:v,loading:s},"\u67e5\u8be2"))},ir=(a(1145),Qe.TMap.Toolbar),ur=Qe.TMap.EditablePopupedGeoJSON,or=Qe.TMap.BoundsFit,sr=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=er(),i=Object(n.useMemo)((function(){return l(a)}),[l,a]),u=Object(n.useMemo)((function(){return i.map((function(e){return e.data}))}),[i]);return r.a.createElement("div",{className:"sample-query-container"},r.a.createElement(lr,{setSamples:c}),r.a.createElement(Qe.TMap,{className:"sample-map"},r.a.createElement(ir,{options:{enables:[]}}),i.map((function(e){return r.a.createElement(ur,{key:e.id,data:e.data,properties:e.properties,style:e.style})})),r.a.createElement(or,{shapes:u})))},mr=new Map([["NORMAL","\u8fdb\u884c\u4e2d"],["ARCHIVED","\u5df2\u5f52\u6863"]]),pr=new Map([["NORMAL","\u666e\u901a"],["RANGE","\u533a\u95f4"]]),dr=new Map([["SATELLITE_IMAGE","\u536b\u661f"],["FIELD_OPERATION_IMAGE","\u5916\u4e1a"]]),fr=Object(P.i)((function(e){var t=e.activeType,a=e.onTypeChange,c=e.history,l=Object(n.useCallback)((function(e){var t=e.target.value;a(t)}),[a]),i=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.checkCreateTask();case 3:c.push("/app/sample-task/create"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),[c]);return r.a.createElement(he.a.Item,null,r.a.createElement("div",{className:"list-header"},r.a.createElement(ke.a,{type:"primary",onClick:i},"\u65b0\u5efa\u4efb\u52a1"),r.a.createElement("div",null,r.a.createElement(ye.a.Group,{onChange:l,value:t},Object(y.a)(mr).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement(ye.a.Button,{key:a,value:a},n)}))))))})),br=(a(404),function(e){var t=e.dataSource,a=e.loading,c=e.columns,l=e.pagination,i=void 0!==l&&l,u=e.rowKey,o=void 0===u?"id":u,s=new Map([]),m=Object(n.useMemo)((function(){return c.map((function(e){var t=e.type,a=e.render||s.get(t)||function(e){return e||"-"};return Object(E.a)(Object(E.a)({},e),{},{render:a})}))}),[s,c]),p=Object(n.useMemo)((function(){return Object.assign({},{size:"small"},{columns:m,dataSource:t,pagination:i,loading:a,rowKey:o})}),[m,t,a,i,o]);return r.a.createElement(fa.a,p)}),vr=function(e){var t=e.tasks,a=e.loading,c=e.onClickTaskInfo,l=e.setUpdateTask,i=e.deleteTask,u=e.archiveTask,o=Object(n.useMemo)((function(){return[Object(E.a)({title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name"},Ga("name")),{title:"\u4efb\u52a1\u4fe1\u606f",dataIndex:"id",render:function(e,t){return r.a.createElement(ke.a,{type:"link",onClick:function(){return c(e)}},"\u67e5\u770b")}},{title:"\u603b\u6837\u672c\u6570\u91cf",dataIndex:"sampleStats",render:function(e){return"".concat(e.marketCount,"/").concat(e.targetCount)}},{title:"\u5f85\u5ba1\u6838",render:function(e){return e.sampleStats.unauditedCount||"-"}},{title:"\u4efb\u52a1\u6a21\u5f0f",dataIndex:"mode",render:function(e){return pr.get(e)}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",render:function(e){return s()(e).format("YYYY-MM-DD")}},{title:"\u5e95\u56fe\u5904\u7406",render:function(e){return e.totalCount?r.a.createElement(Sa.a,{content:r.a.createElement("span",null,e.finishedCount," / ",e.totalCount)},r.a.createElement(Ta.a,{percent:Math.floor(e.finishedCount/e.totalCount*100)})):"-"}},{title:"\u64cd\u4f5c",render:function(e,t){return r.a.createElement(r.a.Fragment,null,t.allowOperations.includes("AUDIT")&&r.a.createElement(q.b,{to:"/app/sample-task/audit/".concat(t.id,"?taskName=").concat(t.name)},r.a.createElement(ke.a,{type:"link"},"\u5ba1\u6838")),t.allowOperations.includes("MARK")&&r.a.createElement(q.b,{to:"/app/sample-task/mark/".concat(t.id,"?taskName=").concat(t.name)},r.a.createElement(ke.a,{type:"link"},"\u6807\u6ce8")),t.allowOperations.includes("EDIT")&&r.a.createElement(ke.a,{type:"link",onClick:function(){return l(t)}},"\u7f16\u8f91"),t.allowOperations.includes("ARCHIVED")&&r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5f52\u6863?",onConfirm:function(){u(t.id)},okText:"\u5f52\u6863",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5f52\u6863")),t.allowOperations.includes("DELETE")&&r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){i(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}}]}),[i,u,c,l]);return r.a.createElement(br,{dataSource:t,pagination:{showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,defaultPageSize:30},loading:a,columns:o})},gr=function(e){var t=e.task,a=e.setTask,c=e.fetchTasks,l=function(e){var t=Object(n.useState)({}),a=Object(f.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",c({}));case 2:return t.next=4,Jt.queryTaskInfoById(e);case 4:a=t.sent,c(a);case 6:case"end":return t.stop()}}),t)})))()}),[e]),[r,c]}(t&&t.id),i=Object(f.a)(l,1)[0],u=Object(n.useState)({}),o=Object(f.a)(u,2),m=o[0],b=o[1],v=Object(n.useState)(!1),g=Object(f.a)(v,2),O=g[0],k=g[1],h=Object(n.useMemo)((function(){return[{filterType:"TIME_RANGER",valueKey:"timeRange",required:!0},{filterType:"INPUT",valueKey:"name",label:"\u4efb\u52a1\u540d\u79f0",required:!0}]}),[]),y=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,Jt.updateTask(t.id,n.name,{beginTime:n.timeRange.dates[0].format().slice(0,19),endTime:n.timeRange.dates[1].format().slice(0,19),includeMonths:n.includeMonths},r.dataType,n.waveAggregations?n.waveAggregations.map((function(e){return{id:e}})):n.waveAggregations);case 4:a(null),c(),j.b.success("\u4fee\u6539\u6210\u529f!"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j.b.error(e.t0.message);case 12:return e.prev=12,k(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[c,a]),E=Object(n.useMemo)((function(){return!m.timeRange||!m.timeRange.dates.length||!m.name}),[m.timeRange,m.name]);return Object(n.useEffect)((function(){if(t&&Object.keys(i).length){var e={timeRange:{dates:[s()(i.timeRange.beginTime),s()(i.timeRange.endTime)],includeMonths:i.timeRange.includeMonths},waveAggregations:i.waveAggregations?i.waveAggregations.map((function(e){return e.id})):i.waveAggregations,name:t.name};b(e)}}),[t,i]),r.a.createElement(We.a,{title:"\u7f16\u8f91",visible:!!t,maskClosable:!1,onCancel:function(){a(null)},okButtonProps:{disabled:E},onOk:function(){y(t,m,i)},zIndex:100,confirmLoading:O},r.a.createElement(ua,{onChange:b,value:m,enabledFilters:h}))},Or=function(e){var t=Object(n.useState)("NORMAL"),a=Object(f.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),u=Object(f.a)(i,2),o=u[0],s=u[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),v=b[0],g=b[1],O=Object(n.useState)(null),k=Object(f.a)(O,2),h=k[0],y=k[1],C=Object(n.useState)([]),S=Object(f.a)(C,2),T=S[0],x=S[1],w=Object(n.useState)(!1),I=Object(f.a)(w,2),N=I[0],A=I[1],M=Object(n.useState)(!1),L=Object(f.a)(M,2),D=L[0],R=L[1],q=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t||c,e.prev=1,g(!0),e.next=5,Jt.getTaskList(a);case 5:n=e.sent,x(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j.b.error(e.t0.message);case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[c]),P=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",y(null));case 2:return e.next=4,Jt.queryTaskInfoById(t);case 4:a=e.sent,R(!1),y(Object(E.a)(Object(E.a)({},a),{},{waveAggregations:a.waveAggregations?a.waveAggregations.map((function(e){return e.description})):null,timeRange:{beginTime:a.timeRange.beginTime.slice(0,10),endTime:a.timeRange.endTime.slice(0,10),includeMonths:a.timeRange.includeMonths.reduce((function(e,t){return"".concat(e).concat(t,"\u6708\u3001")}),"")}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),F=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),A(!0),e.prev=2,e.next=5,P(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),A(!1);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),[P]),K=Object(n.useCallback)((function(){y({}),A(!1)}),[]),Y=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.deleteTask(t);case 2:q();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[q]),U=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.archiveTask(t);case 2:q();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[q]),G=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(t),q(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[q]);return Object(n.useEffect)((function(){q()}),[]),r.a.createElement("div",{className:"sample-task-list-container"},r.a.createElement(Oe.a,null,r.a.createElement(fr,{activeType:c,onTypeChange:G}),r.a.createElement(vr,{tasks:T,loading:v,onClickTaskInfo:F,setUpdateTask:s,deleteTask:Y,archiveTask:U})),r.a.createElement(Fa,{infos:h,onCancel:K,conditionModalShow:N,conditionModalLoading:D}),r.a.createElement(gr,{task:o,setTask:s,fetchTasks:q}))},kr=function(e,t){var a=e.name,n=e.description,r=e.mode,c=e.timeRange,l=e.shape,i=e.satellite,u=e.waveAggregations,o=e.imageSource,s=Object(f.a)(c.dates,2),m=s[0],p=s[1],d=c.includeMonths;return"TILE"===l.type&&(l=Object(E.a)(Object(E.a)({},l),{},{value:JSON.stringify(l.value.split(";"))})),{name:a,description:n,mode:r,tileList:t,condition:{timeRange:{beginTime:m&&m.format("YYYY-MM-DDTHH:mm:ss"),endTime:p&&p.format("YYYY-MM-DDTHH:mm:ss"),includeMonths:d},shape:l,dataType:i,waveAggregations:u.map((function(e){return{id:e}})),imageSource:o}}},hr=function(e){var t=e.id,a=e.name,n=e.description,r=e.mode,c=e.condition,l=c.timeRange,i=c.shape,u=c.dataType,o=c.waveAggregations,m=c.imageSource,p=l.beginTime,d=l.endTime,f=l.includeMonths;return{id:t,name:a,description:n,mode:r,timeRange:{beginTime:s()(p),endTime:s()(d),includeMonths:f},shape:Object(E.a)(Object(E.a)({},i),{},{value:"SHAPE"===i.type?JSON.parse(i.value):i.value}),satellite:u,waveAggregations:o,imageSource:"GOOGLE_EARTH"===m?"FIELD_OPERATION_IMAGE":m}},yr=function(e,t){return e.map((function(e){var a=t.find((function(t){return t.tile===e.tile})).shape;return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(a)})}))},Er=function(e,t){var a=Object(f.a)(t,2),n=a[0],r=a[1];return{shape:{type:"TILE",value:'["'.concat(e,'"]')},timeRange:{beginTime:n.format("YYYY-MM-DDTHH:mm:ss"),endTime:r.format("YYYY-MM-DDTHH:mm:ss")}}},jr=function(e){var t=e.tile,a=e.historyTagCode,n=e.beginTime,r=e.endTime;return{shape:{type:"TILE",value:'["'.concat(t,'"]')},beginTime:n.format("YYYY-MM-DDTHH:mm:ss"),endTime:r.format("YYYY-MM-DDTHH:mm:ss"),tagIds:a?[a]:[]}},Cr=a(112),Sr=a.n(Cr),Tr=a(193),xr=a.n(Tr),wr=ua.FilterMounter,Ir=function(e){var t=e.visible,a=e.onCancel,c=e.onOk,l=e.item,i=Object(n.useState)([{id:1}]),u=Object(f.a)(i,2),o=u[0],s=u[1],m=Object(n.useMemo)((function(){return l?"".concat(l.tile," - \u8bbe\u7f6e\u6837\u672c"):"\u7edf\u4e00\u8bbe\u7f6e\u6837\u672c"}),[l]),p=Object(n.useCallback)((function(e,t){o[t]=Object(E.a)(Object(E.a)({},o[t]),e),s(Object(y.a)(o))}),[o]),d=Object(n.useCallback)((function(e){o.splice(e,1),s(Object(y.a)(o))}),[o]),b=Object(n.useMemo)((function(){return[{title:"\u5730\u7269\u6807\u7b7e",dataIndex:"label",render:function(e,t,a){return r.a.createElement(wr,{key:"label",filterOptions:{label:" ",filterType:"MARK_TAG",valueKey:"label",required:!1,changeOnSelect:!0,hideLabel:!0},value:t,onChange:function(e,n){return p(Object(E.a)(Object(E.a)({},t),{},Object(xe.a)({},e,n)),a)}})}},{title:"\u6837\u672c\u603b\u91cf",dataIndex:"targetCount",render:function(e,t,a){return r.a.createElement(wr,{key:"targetCount",filterOptions:{label:" ",filterType:"INPUT",valueKey:"targetCount",required:!1,hideLabel:!0},value:t,onChange:function(e,n){return p(Object(E.a)(Object(E.a)({},t),{},Object(xe.a)({},e,n)),a)}})}},{title:"\u64cd\u4f5c",render:function(e,t,a){return a?r.a.createElement(ke.a,{type:"link",onClick:function(){return d(a)}},"\u5220\u9664"):null}}]}),[d,p]),v=Object(n.useCallback)((function(){var e=o.concat([{}]);s(e)}),[o]),g=Object(n.useMemo)((function(){return r.a.createElement("div",{className:"add-btn",onClick:v},"+ \u65b0\u589e")}),[v]),O=Object(n.useCallback)((function(){c(o)}),[o,c]);return Object(n.useEffect)((function(){l&&l.labelTargets?s(xr()(l.labelTargets)):s([{}])}),[l]),r.a.createElement(We.a,{zIndex:401,title:m,visible:t,onCancel:a,onOk:O,wrapClassName:"tile-config-modal"},r.a.createElement(br,{columns:b,dataSource:o}),g)},Nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e,t){return r.a.createElement("div",{className:"label-target",key:t},r.a.createElement("span",{className:"label"},e.name),r.a.createElement("span",{className:"count"},e.markedCount," / ",e.targetCount)," ")}))},Ar=function(e){var t=e.dataSource,a=e.options,c=e.onChange,l=Object(n.useState)([]),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(null),m=Object(f.a)(s,2),p=m[0],d=m[1],b=Object(n.useState)(!1),v=Object(f.a)(b,2),g=v[0],O=v[1],k=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d(e),O(!0)}),[]),h=Object(n.useMemo)((function(){var e=[{title:"Tile \u7f16\u53f7",render:function(e){return a.editable?e.tile:r.a.createElement(ke.a,{type:"link",onClick:function(){return a.onTileClick(null,e.tile)}},e.tile)}},{title:"\u603b\u6837\u672c\u6570\u91cf",render:function(e){return a.editable?e.targetCount:r.a.createElement(da.a,{placement:"top",title:Nr(e.labelTargets)},r.a.createElement("span",null,e.markedCount," / ",e.targetCount))}}];return a.editable?e.push({title:"\u64cd\u4f5c",render:function(e){return r.a.createElement(ke.a,{type:"link",onClick:function(){return k(e)}},"\u7f16\u8f91")}}):e.push({title:"\u5f85\u5ba1\u6838",dataIndex:"unauditedCount"}),e}),[a,k]),y=Object(n.useCallback)((function(){d(null),O(!1)}),[]),j=Object(n.useCallback)((function(e){if(p){var t=u.findIndex((function(e){return e.tile===p.tile}));return u[t].labelTargets=e,u}return u.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{labelTargets:e})}))}),[u,p]),C=Object(n.useCallback)((function(e){var t=j(e);c(t),d(null),O(!1)}),[c,j]);return Object(n.useEffect)((function(){o(function(e){return xr()(e).map((function(e){var t=(e.labelTargets||[]).reduce((function(e,t){return e+parseInt(t.targetCount||0)}),0);return Object(E.a)(Object(E.a)({},e),{},{targetCount:t})}))}(t))}),[t]),r.a.createElement(r.a.Fragment,null,a.editable&&r.a.createElement(he.a.Item,null,r.a.createElement(ke.a,{type:"primary",onClick:function(){return k()}},"\u7edf\u4e00\u8bbe\u7f6e")),r.a.createElement(br,{columns:h,dataSource:u,rowKey:"tile"}),r.a.createElement(Ir,{visible:g,onCancel:y,onOk:C,item:p}))},Mr=function(e){var t=e.footer,a=e.collection,c=void 0===a?[]:a,l=e.filters,i=e.setFilters,u=e.width,o=void 0===u?400:u,s=Object(n.useCallback)((function(e){return r.a.createElement(ua,{enabledFilters:e.form.enabledFilters,layout:"inline",onChange:function(e){return i(e)},value:l})}),[l,i]);return r.a.createElement("div",{className:"form-collection-container",style:{width:"".concat(o,"px")}},r.a.createElement("div",{className:"collection-list"},c.map((function(e,t){return!Sr()(e)&&r.a.createElement("div",{className:"collection-item",key:t},e.title&&r.a.createElement("div",{className:"collection-title"},e.title),"sky-filter"===e.form.type&&s(e),"tile-list"===e.form.type&&r.a.createElement(Ar,{options:e.form,dataSource:e.form.dataSource,onChange:e.form.onChange}))}))),t&&r.a.createElement("div",{className:"collection-footer"},t))},Lr={task:{imageSource:"SATELLITE_IMAGE",mode:"NORMAL"},tileList:[],filters:{},curSample:{},markedSamples:[],historySamples:[],auditSamples:[],fieldOperationData:[],curTile:{},mousePosition:[0,0]},Dr=function(e,t){var a=t.type,n=t.value;if("setTask"===a){var r=function(e){return"RANGE"===e.mode&&(e.imageSource="SATELLITE_IMAGE"),"FIELD_OPERATION_IMAGE"===e.imageSource&&(e.satellite=null,e.waveAggregations=[]),e}(n);return Object(E.a)(Object(E.a)({},e),{},{task:Object(E.a)(Object(E.a)({},e.task),r)})}return"setTileList"===a?Object(E.a)(Object(E.a)({},e),{},{tileList:n}):"setFilters"===a?Object(E.a)(Object(E.a)({},e),{},{filters:Object(E.a)(Object(E.a)({},e.filters),n)}):"setMarkedSamples"===a?Object(E.a)(Object(E.a)({},e),{},{markedSamples:n}):"setHistorySamples"===a?Object(E.a)(Object(E.a)({},e),{},{historySamples:n}):"setAuditSamples"===a?Object(E.a)(Object(E.a)({},e),{},{auditSamples:n}):"setCurSample"===a?Object(E.a)(Object(E.a)({},e),{},{curSample:n}):"setFieldOperationData"===a?Object(E.a)(Object(E.a)({},e),{},{fieldOperationData:n}):"setCurTile"===a?Object(E.a)(Object(E.a)({},e),{},{curTile:n}):"resetFilters"===a?Object(E.a)(Object(E.a)({},e),{},{filters:{},fieldOperationData:[]}):"setMousePosition"===a?Object(E.a)(Object(E.a)({},e),{},{mousePosition:n}):void 0},Rr=function(){var e=Object(n.useReducer)(Dr,Lr),t=Object(f.a)(e,2),a=t[0],r=t[1];return{taskState:a,taskDispatch:Object(n.useCallback)((function(e,t){r({type:e,value:t})}),[])}},qr=function(e){var t=e.name,a=e.navList,r=Object(P.g)(),c=R().headerNav,l=c.mount,i=c.unMount,u=Object(n.useCallback)((function(e){e&&r.push(e)}),[r]);return Object(n.useEffect)((function(){var e=[{name:"\u6837\u672c\u6807\u6ce8",key:"/app/sample-task"}];return e=a?e.concat(xr()(a)):e.concat([{name:t,key:null}]),l({type:"breadcrumb",items:e,onChange:u}),function(){i()}}),[i,l,u,t,a]),null},Pr=Qe.TMap.BoundsFit,Fr=Qe.TMap.TilePolygon,Kr=Object(P.i)((function(e){qr({name:"\u65b0\u5efa\u4efb\u52a1"});var t=Rr(),a=t.taskState,c=t.taskDispatch,l=e.history.goBack,i=Object(n.useState)(1),u=Object(f.a)(i,2),o=u[0],s=u[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),v=b[0],g=b[1],O=Object(n.useState)(!0),k=Object(f.a)(O,2),h=k[0],j=k[1],C=Object(n.useCallback)((function(e){c("setTask",e)}),[c]),S=Object(n.useCallback)((function(e){c("setTileList",e)}),[c]),T=Object(n.useCallback)((function(){g(!0);var e=a.task.shape,t=e;return"TILE"===e.type&&(t=Object(E.a)(Object(E.a)({},e),{},{value:JSON.stringify(e.value.split(";"))})),Jt.getTileList(t).then((function(e){S(e.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})))})).finally((function(){g(!1)}))}),[S,a.task]),x=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:s(2);case 3:case"end":return e.stop()}}),e)}))),[T]),w=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kr(a.task,a.tileList),e.next=3,Jt.createTask(t);case 3:l();case 4:case"end":return e.stop()}}),e)}))),[l,a.task,a.tileList]),I=Object(n.useMemo)((function(){return new Map([[1,r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{onClick:l},"\u53d6\u6d88"),r.a.createElement(ke.a,{type:"primary",onClick:x,loading:v,disabled:h},"\u4e0b\u4e00\u6b65"))],[2,r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{onClick:function(){return s(1)}},"\u4e0a\u4e00\u6b65"),r.a.createElement(ke.a,{type:"primary",onClick:w},"\u63d0\u4ea4"))]]).get(o)}),[l,v,h,w,o,x]),N=Object(n.useMemo)((function(){var e=[{label:"\u5e95\u56fe\u7c7b\u578b",filterType:"RADIO_LIST",valueKey:"imageSource",required:!0,optionSource:Object(y.a)(dr).map((function(e){var t=Object(f.a)(e,2),a=t[0];return{name:t[1],value:a}}))}];return"RANGE"===a.task.mode&&(e[0]=Object(E.a)(Object(E.a)({},e[0]),{},{optionSource:Object(y.a)(dr).filter((function(e){var t=Object(f.a)(e,2);t[0];return"\u5916\u4e1a"!==t[1]})).map((function(e){var t=Object(f.a)(e,2),a=t[0];return{name:t[1],value:a}}))})),"SATELLITE_IMAGE"===a.task.imageSource&&(e=e.concat([{filterType:"SATELLITE",valueKey:"satellite",required:!0},{filterType:"WAVE_AGGREGATION",valueKey:"waveAggregations",label:"\u5f69\u8272\u5408\u6210",satelliteType:a.task.satellite,mode:"multiple",disabled:!a.task.satellite,required:!0}])),new Map([[1,[{title:"\u4efb\u52a1\u4fe1\u606f",form:{type:"sky-filter",enabledFilters:[{filterType:"INPUT",valueKey:"name",label:"\u4efb\u52a1\u540d\u79f0",required:!0},{filterType:"TIME_RANGER",valueKey:"timeRange",required:!0},{filterType:"SPACE",valueKey:"shape",required:!0},{label:"\u4efb\u52a1\u7c7b\u578b",filterType:"RADIO_LIST",valueKey:"mode",required:!0,optionSource:Object(y.a)(pr).map((function(e){var t=Object(f.a)(e,2),a=t[0];return{name:t[1],value:a}}))},{filterType:"INPUT",valueKey:"description",label:"\u4efb\u52a1\u63cf\u8ff0"}]}},{title:"\u8bbe\u7f6e\u5e95\u56fe",form:{type:"sky-filter",enabledFilters:e}}]],[2,[{title:"\u8bbe\u7f6e\u6837\u672c",form:{type:"tile-list",editable:!0,dataSource:a.tileList,onChange:S}}]]]).get(o)}),[o,a.task,a.tileList,S]),A=Object(n.useMemo)((function(){return a.tileList.map((function(e){return e.shape}))}),[a.tileList]),M=Object(n.useCallback)((function(){var e=a.task,t=e.imageSource,n=e.mode,r=e.name,c=e.satellite,l=e.shape,i=e.timeRange,u=e.waveAggregations;j(!0),n&&r&&l&&l.value&&i&&("SATELLITE_IMAGE"===t?c&&u&&u.length>0&&j(!1):"FIELD_OPERATION_IMAGE"===t&&j(!1))}),[a.task]);return Object(n.useEffect)((function(){M()}),[M]),r.a.createElement("div",{className:"sample-task-layout"},r.a.createElement(Mr,{collection:N,footer:I,filters:a.task,setFilters:C}),r.a.createElement("div",{className:"t-map"},r.a.createElement(Qe.TMap,null,r.a.createElement(Pr,{flyEnable:!1,shapes:A}),a.tileList.map((function(e){return r.a.createElement(Fr,{key:e.tile,text:e.tile,data:e.shape})})))))})),Yr=Object(n.createContext)({}),Ur=function(e){var t=e.children,a={taskReducer:Rr()};return r.a.createElement(Yr.Provider,{value:a},t)},Gr=function(){return Object(n.useContext)(Yr)},Vr=function(e){var t=e.label,a=e.sampleImages,c=e.selectedImageIds,l=e.setSelectedImageIds,i=Object(n.useState)(!1),u=Object(f.a)(i,2),o=u[0],s=u[1];return r.a.createElement(he.a.Item,{className:"image-filter-form-item",label:t},r.a.createElement(ke.a,{type:"link",disabled:!a.length,onClick:function(){return s(!0)}},"\u7b5b\u9009",a.length&&r.a.createElement("span",null,"(",a.length,")")),r.a.createElement(Hr,{visible:o,setVisible:s,images:a,value:c,onChange:l}))},Br=(a(1164),Object(n.memo)((function(e){var t=e.value,a=e.onSelect,c=e.item,l=c.id,i=c.url,u=Object(we.a)(c,["id","url"]),o=Object(n.useMemo)((function(){return t&&t.includes(l)}),[l,t]);return r.a.createElement("li",null,r.a.createElement("div",{className:"image-filter-item"},i?r.a.createElement(Ye.a,{value:l,checked:o,onChange:function(e){return a(e.target.value,t)}},r.a.createElement("img",{src:i,alt:""})):r.a.createElement("h3",null,"\u65e0\u5f71\u50cf"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u5f71\u50cf\u65f6\u95f4: ",u.time.slice(0,16)))))}))),zr=function(e){var t=e.visible,a=e.setVisible,c=e.images,l=e.onChange,i=e.value,u=Object(n.useCallback)((function(e,t){var a=t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Object(y.a)(t),[e]);l(a)}),[l]),o=Object(n.useCallback)((function(){l([]),a(!1)}),[l,a]);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"images-filter-modal"},r.a.createElement("div",{className:"image-filter-modal-head"},r.a.createElement(ke.a,{type:"default",onClick:o},"\u53d6\u6d88"),r.a.createElement(ke.a,{type:"primary",onClick:function(){a(!1)}},"\u786e\u5b9a")),r.a.createElement("ul",{className:"images-filter-lists"},c.map((function(e){return r.a.createElement(Br,{value:i,key:e.id,item:e,onSelect:u})})))))};zr.FormItem=Vr;var Hr=zr,Jr=function(e){var t=Gr().taskReducer,a=t.taskState,r=t.taskDispatch,c=a.curTile,l=a.filters,i=a.task,u=Object(n.useState)(null),o=Object(f.a)(u,2),s=o[0],m=o[1],b=Object(n.useState)([]),v=Object(f.a)(b,2),g=v[0],O=v[1],k=function(e,t,a){var r=Object(n.useState)([]),c=Object(f.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){e&&t&&Object(d.a)(p.a.mark((function n(){var r,c;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jt.querySampleImages(a,e,t);case 2:r=n.sent,c=r.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{time:e.imageTime,path:e.url,url:"https://tile-cdn.terraqt.com/".concat(e.url)})})),i(c);case 5:case"end":return n.stop()}}),n)})))()}),[a,e,t]),[l,i]}(c.tile,l.waveAggregationId,i.id),h=Object(f.a)(k,1)[0],y=Object(n.useMemo)((function(){return{title:"\u536b\u661f\u5f71\u50cf",form:{type:"sky-filter",enabledFilters:[]}}}),[]),j=Object(n.useMemo)((function(){return h.filter((function(e){return g.find((function(t){return t===e.id}))})).map((function(e){return Object(E.a)(Object(E.a)({},e),{},{value:e.id,name:e.imageTime.slice(0,16),path:e.path})}))}),[g,h]),C=Object(n.useMemo)((function(){return j.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{disabled:e.id===l.mainImageId||e.id===l.topLeftImageId||e.id===l.topRightImageId})}))}),[l.mainImageId,l.topLeftImageId,l.topRightImageId,j]),S=Object(n.useCallback)((function(e,t){var a;if(t){var n=j.find((function(e){return e.id===t}));a=n.path,"mainImageId"===e&&m(a)}else a=s;setTimeout((function(){return r("setFilters",{mainImagePath:a})}))}),[j,s,r]),T=Object(n.useCallback)((function(e,t){var a=j.find((function(e){return e.id===t})).path,n={};switch(e){case"topLeftImageId":n.topLeftImagePath=a;break;case"topRightImageId":n.topRightImagePath=a;break;case"mainImageId":n.mainImagePath=a}setTimeout((function(){return r("setFilters",n)}))}),[j,r]),x=Object(n.useMemo)((function(){return{title:"\u5206\u5c4f\u9009\u62e9",form:{type:"sky-filter",enabledFilters:[{label:"\u5de6\u4e0a - \u9009\u62e9\u5f71\u50cf",filterType:"SELECT",valueKey:"topLeftImageId",optionSource:C,required:!0,onChange:T},{label:"\u53f3\u4e0a - \u9009\u62e9\u5f71\u50cf",filterType:"SELECT",valueKey:"topRightImageId",optionSource:C,required:!0,onChange:T},{label:"\u5e95\u90e8 - \u9009\u62e9\u5f71\u50cf",filterType:"SELECT",valueKey:"mainImageId",optionSource:C,onChange:T}]}}}),[C,T]);return{satelliteImages:h,selectedImageIds:g,setSelectedImageIds:O,images:j,contrastImages:C,onImageChange:S,multiMap:x,satellite:y}},Wr=function(e){var t=Gr().taskReducer,a=t.taskState,r=t.taskDispatch,c=a.filters,l=a.task,i=function(e){var t=Gr().taskReducer,a=t.taskState,r=t.taskDispatch,c=a.curTile,l=a.task,i=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,i,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.timeRange,i=n.beginTime,u=n.endTime,r("setHistorySamples",[]),e.next=4,Jt.querySamples(jr({tile:c.tile,historyTagCode:a,beginTime:i,endTime:u}));case 4:o=e.sent,j.b.success("\u83b7\u53d6\u6807\u7b7e\u6807\u6ce8\u6210\u529f"),r("setHistorySamples",o);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,c.tile,r]),u=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return r("setHistorySamples",[]),e.abrupt("return");case 3:i();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[i,r]),o=Object(n.useMemo)((function(){return{form:{type:"sky-filter",enabledFilters:[{filterType:"TITLE",valueKey:"historySampleEnable",label:"\u5386\u53f2\u6837\u672c",colon:!1,className:"audit-main-item",onChange:u}]}}}),[u]);return Object(n.useEffect)((function(){r("setFilters",{historyTagCode:null}),r("setHistorySamples",[])}),[r]),{historySample:o,onTagChange:i}}(),u=i.historySample,o=i.onTagChange,s=function(e){var t=Gr().taskReducer,a=t.taskState,r=t.taskDispatch,c=a.curTile,l=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.queryFieldOperationData(Er(c.tile,a));case 2:n=e.sent,Sr()(n)&&j.b.warn("\u6682\u65e0\u6570\u636e"),r("setFieldOperationData",n.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shape:JSON.parse(e.shape)})})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[r,c]),i=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){!a&&r("setFieldOperationData",[]),r("setFilters",{fieldDates:null})}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[r]),u=Object(n.useCallback)((function(e){var t=a.task.timeRange,n=t.beginTime,r=t.endTime;return e.isBefore(n)||e.isAfter(r)}),[a.task]);return{onFieldDateChange:l,fieldOperation:Object(n.useMemo)((function(){return{form:{type:"sky-filter",enabledFilters:[{filterType:"TITLE",valueKey:"fieldOperationEnable",label:"\u5916\u4e1a\u6570\u636e",colon:!1,className:"audit-main-item",onChange:i}]}}}),[i]),getDisabledDate:u}}(),m=s.onFieldDateChange,f=s.fieldOperation,b=s.getDisabledDate,v=Jr(),g=v.satelliteImages,O=v.selectedImageIds,k=v.setSelectedImageIds,h=v.images,C=v.contrastImages,S=v.onImageChange,T=v.multiMap,x=v.satellite,w=Object(n.useCallback)((function(e){r("setFilters",e)}),[r]),I=Object(n.useMemo)((function(){var e=[{label:"\u5f69\u8272\u5408\u6210",filterType:"SELECT",valueKey:"waveAggregationId",optionSource:(l.waveAggregations||[]).map((function(e){var t=e.id;return{name:e.description,value:t}}))},{label:"\u7b5b\u9009\u5f71\u50cf",filterType:"CUSTOM",valueKey:"selectedImageIds",sampleImages:g,Component:Hr.FormItem,selectedImageIds:O,setSelectedImageIds:k}],t=[{label:"\u4e3b\u5f71\u50cf",filterType:"SELECT",valueKey:"mainImageId",optionSource:h,onChange:S},{label:"\u5bf9\u6bd4\u5f71\u50cf",filterType:"RADIO_LIST",valueKey:"contrastImageId",optionSource:C,className:"contrast-image-container",onChange:S}];return"NORMAL"===l.mode&&(e=e.concat(t)),e}),[C,h,S,g,O,k,l]),N=Object(n.useMemo)((function(){return new Map([["\u5730\u7269\u6807\u7b7e",[{label:"\u5730\u7269\u6807\u7b7e",filterType:"MARK_TAG",valueKey:"historyTagCode",colon:!1,changeOnSelect:!0,onChange:o}]],["\u65f6\u95f4\u8303\u56f4",[{label:"\u65f6\u95f4\u8303\u56f4",filterType:"DATES",colon:!1,valueKey:"fieldDates",onChange:m,disabledDate:b}]],["\u536b\u661f\u5f71\u50cf",I]])}),[I,b,m,o]),A=Object(n.useCallback)((function(e,t){return Object.assign({},e,{form:Object(E.a)(Object(E.a)({},e.form),{},{enabledFilters:[].concat(Object(y.a)(e.form.enabledFilters),Object(y.a)(N.get(t)))})})}),[N]);return{collection:Object(n.useMemo)((function(){var e=[];return c.historySampleEnable?e.push(A(u,"\u5730\u7269\u6807\u7b7e")):e.push(u),"SATELLITE_IMAGE"===l.imageSource?(e.push(A(x,"\u536b\u661f\u5f71\u50cf")),"RANGE"===l.mode&&e.push(T)):"FIELD_OPERATION_IMAGE"===l.imageSource&&(c.fieldOperationEnable?e.push(A(f,"\u65f6\u95f4\u8303\u56f4")):e.push(f)),e}),[c,A,u,l,x,T,f]),setFilters:w}},Qr=function(e){var t=e.footer,a=Wr(),n=a.collection,c=a.setFilters,l=Gr().taskReducer.taskState.filters;return r.a.createElement(Mr,{collection:n,filters:l,setFilters:c,width:350,footer:t})},_r=a(43),Xr=a.n(_r),Zr=a(47),$r={maps:[]},ec=Object(n.createContext)();function tc(e,t){var a=t.type,n=t.value;if("addSyncMap"===a)return Object(E.a)(Object(E.a)({},e),{},{maps:[].concat(Object(y.a)(e.maps),[n])});if("syncEvent"===a){var r=n.target,c=r.keyboard._leaflet_id,l=r.getCenter(),i=r.getZoom();return e.maps.forEach((function(e){var t=e.keyboard._leaflet_id;c!==t&&e.setView(l,i)})),Object(E.a)({},e)}}var ac=function(e){var t=Object(Zr.c)().map,a=Object(n.useContext)(ec).dispatch;return Object(n.useEffect)((function(){if(t){a("addSyncMap",t);var e=function(e){return a("syncEvent",e)};return t.on("dragend zoomend",e),function(){t.off("dragend zoomend",e)}}}),[a,t]),null},nc=function(e){var t=e.children,a=Object(n.useReducer)(tc,$r),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useCallback)((function(e,t){i({type:e,value:t})}),[i]);return r.a.createElement(ec.Provider,{value:{state:l,dispatch:u}},t)},rc=(a(537),a(221)),cc=a(191),lc=a.n(cc),ic=Object(P.i)((function(e){var t=e.map,a=e.match.params,c=e.samples,l=e.visible,i=e.onCancel,u=e.onOk,o=Gr().taskReducer.taskState,m=o.filters,b=o.task,v=o.curTile,g=o.curSample,O=Object(n.useState)({}),k=Object(f.a)(O,2),h=k[0],y=k[1],j=Object(n.useState)([]),C=Object(f.a)(j,2),S=C[0],T=C[1],x=Object(n.useMemo)((function(){return a.taskId}),[a]),w=Object(n.useCallback)((function(e,t,a){var n=Object(E.a)(Object(E.a)({},a),{},Object(xe.a)({},e,t));return y(n),n}),[]),I=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(a,n){var r,c,l,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tool.edit.save(),c=r.geometry,l=JSON.stringify(c),e.next=4,Jt.updateSample(a.id,l,a.imageTime.format().slice(0,19),a.tagId);case 4:i=e.sent,u("update",i);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t,u]),N=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.deleteSample([g.id]);case 2:u("delete",g);case 3:case"end":return e.stop()}}),e)}))),[g,u]),A=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(a){var n,r,c,l,o,s,d,f,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.topLeftImageId,r=m.topRightImageId,c=m.mainImageId,l=t.tool.edit.save(),o=l.geometry,s=JSON.stringify(o),d=[],n&&d.push(n),r&&d.push(r),c&&d.push(c),d=Sr()(d)?null:d,f={taskId:x,shape:s,tagCode:a.tagId,imageIds:d,imageSource:b.imageSource,tile:v.tile,mode:b.mode},e.prev=9,e.next=12,Jt.createSample(f);case 12:g=e.sent,u("create",g),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),i();case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),[t,x,u,i,m,b,v]),M=Object(n.useCallback)((function(e,t,a,n){var r=w("tagId",e,t);-1===r.id?n&&A(r):n&&I(r,a)}),[A,w,I]),L=Object(n.useMemo)((function(){return r.a.createElement("div",{className:"sample-edit-footer"},r.a.createElement(ke.a,{onClick:i},"\u53d6\u6d88"),-1!==h.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"primary",onClick:function(){return I(h,c)}},"\u63d0\u4ea4"),r.a.createElement(ke.a,{danger:!0,onClick:N},"\u5220\u9664\u6837\u672c")),-1===h.id&&r.a.createElement(ke.a,{type:"primary",onClick:function(){return A(h)}},"\u63d0\u4ea4"))}),[A,N,h,i,c,I]),D=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.id&&-1!==g.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jt.queryChangeLogs(g.id,"SAMPLE");case 4:t=e.sent,T(t);case 6:case"end":return e.stop()}}),e)}))),[g.id]);return Object(n.useEffect)((function(){D()}),[D]),Object(n.useEffect)((function(){var e=-1===g.id?g:Object(E.a)(Object(E.a)({},g),{},{imageTime:s()(g.imageTime),tagId:lc()(g,"tag.id")});y(e)}),[g]),r.a.createElement(rc.a,{className:"sample-edit-drawer",title:"\u6837\u672c\u8be6\u60c5",placement:"right",visible:l,onClose:i,maskClosable:!1,mask:!1,footer:L},r.a.createElement(he.a,null,-1!==g.id&&r.a.createElement(he.a.Item,{label:"\u5f71\u50cf\u65f6\u95f4",placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4"},r.a.createElement(Ie.a,{className:"sample-edit-date",value:h.imageTime,onChange:function(e,t){return w("imageTime",e,h)}})),r.a.createElement(he.a.Item,{label:"\u5730\u7269\u6807\u7b7e",placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e"},r.a.createElement(Gt,{commonlyUsedEnable:!0,value:h.tagId,changeOnSelect:!0,onChange:function(e){return w("tagId",e,h)}}),r.a.createElement(Gt.CommonlyUsedList,{value:h.tagId,onChange:function(e,t){return M(e,h,c,t)}}))),g.id&&-1!==g.id&&r.a.createElement(he.a.Item,{label:"\u64cd\u4f5c\u8bb0\u5f55"},r.a.createElement(Bn.a,{reverse:!1},S.length<1&&r.a.createElement("span",null,"\u6682\u65e0\u64cd\u4f5c\u8bb0\u5f55"),S.map((function(e){return r.a.createElement(Bn.a.Item,{key:h.id+e.time},r.a.createElement("span",{className:"opreation-record-user"},e.user),r.a.createElement("span",null,e.description)," ",r.a.createElement("br",null),r.a.createElement("span",null,s()(e.time).format("YYYY-MM-DD hh:mm:ss")))})))))})),uc=function(e){var t=e?e.split("/"):null;return t?t.slice(0,t.length-1).join("/"):null},oc=function(e){var t=e.path;return{path:uc(t)}},sc=a(569),mc=Qe.Icons.LassoIcon,pc=Qe.TMap.CoordinateMarker,dc=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],l=a[1],i=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lng,n=t.lat,e.next=3,k.queryIntersectTilesByPoint("MGRS",a,n);case 3:r=e.sent,c=r.reduce((function(e,t){return"".concat(e,'<p style="margin: 3px;">').concat(t,"</p>")}),""),l(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement(pc,{properties:c,onChange:i})},fc=function(e){var t=e.setCurSample,a=e.samples,r=e.setVisible,c=e.setMap,l=e.toggleMainImageVisible,i=Object(Qe.useLeaflet)().map;return Object(n.useEffect)((function(){if(!i)return null;var e=function(e){if(!a.find((function(e){return-1===e.id}))){var n=e.layer,c={id:-1,shape:n.toGeoJSON().geometry};t(c),r(!0),setTimeout((function(){i.tool.edit.edit(n)}))}};return i.on("draw:created",e),function(){i.off("draw:created",e)}}),[i,a,c,t,r]),Object(n.useEffect)((function(){if(!i)return null;var e=function(){return l()};return i.tool.on("toolbar.hiding:enable",e),i.tool.on("toolbar.hiding:disable",e),function(){i.tool.off("toolbar.hiding:enable",e),i.tool.off("toolbar.hiding:disable",e)}}),[i,l]),Object(n.useEffect)((function(){i&&c(i)}),[i,c]),null},bc=Qe.TMap.TqtTileLayer,vc=function(e){var t=e.uavImageData;return r.a.createElement(bc,{path:t.pyramid,shape:t.shape,options:{maxZoom:30},opacity:t.opacity/100})},gc=Qe.TMap.GeoJSON,Oc=function(e){var t=e.task,a=Object(n.useState)(null),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.shape){e.next=2;break}return e.abrupt("return");case 2:if(a=t.shape.value,"TILE"!==t.shape.type){e.next=5;break}return e.abrupt("return");case 5:if("string"!==typeof a){e.next=12;break}return e.next=8,C.getRegionNode(a);case 8:n=e.sent,i(n.boundary),e.next=13;break;case 12:t.shape&&i(t.shape.value);case 13:case"end":return e.stop()}}),e)}))),[t]);return Object(n.useEffect)((function(){u()}),[u]),l?r.a.createElement(gc,{data:l,bringToBack:!0}):null},kc={color:"#fdd835",weight:2,fillOpacity:0,fillColor:"#fff2af"},hc=function(e){var t=e.shape,a=Object(Zr.c)().map;return Object(n.useEffect)((function(){var e=Xr.a.geoJSON(t,{style:kc,onEachFeature:function(e,t){a.addLayer(t),a.tool&&setTimeout((function(){return a.tool.edit.edit(t)}),500)}});return function(){e.eachLayer((function(e){return a.removeLayer(e)}))}}),[t,a]),""},yc=(a(1166),a(312)),Ec=function(e){var t=e.data,a=e.opacityonChange,n=e.imageOnShow;return r.a.createElement("div",{className:"image-layer-slider-container"},r.a.createElement("div",{className:"image-layer-slider"},r.a.createElement("span",null,"\u900f\u660e\u5ea6"),r.a.createElement(yc.a,{value:t.opacity,onChange:a}),r.a.createElement("span",null,t.opacity,"%")),r.a.createElement(ke.a,{type:"primary",onClick:function(){return n(t)}},"\u67e5\u770b\u539f\u56fe"))},jc=a(465),Cc=function(e){var t=Gr().taskReducer,a=t.taskState.mousePosition,r=t.taskDispatch,c=Object(Zr.c)().map,l=e.setVisible,i=e.setCenter;return Object(n.useEffect)((function(){if(c){var e=function(e){c.on("mousemove",t)},t=function(e){l(!1),r("setMousePosition",e.latlng)},a=function(e){c.off("mousemove",t),r("setMousePosition",null),l(!0)};return c.on("mouseover",e),c.on("mouseout",a),function(){c.off("mouseover",e),c.off("mouseout",a)}}}),[c,l,r]),Object(n.useEffect)((function(){i(a)}),[a,i]),null},Sc=function(e){var t=Object(n.useState)(!0),a=Object(f.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),u=Object(f.a)(i,2),o=u[0],s=u[1],m=Object(n.useMemo)((function(){return{radius:7,weight:3,color:"#EA4335",fillColor:"#FFF",fillOpacity:0}}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Cc,{setVisible:l,setCenter:s}),c&&o&&r.a.createElement(jc.a,Object.assign({center:o},m)))},Tc=function(e){var t=e.visible,a=e.data,n=e.onClose;return r.a.createElement(Qe.ImageViewer,{title:a.title,url:a.url,visible:t,onClose:n})},xc=Qe.TMap.Toolbar,wc=Qe.TMap.BoundsFit,Ic=Qe.TMap.GeoJSON,Nc=Qe.TMap.EditablePopupedGeoJSON,Ac=Qe.TMap.RotatedMark,Mc=Qe.TMap.TqtTileLayer,Lc=Ac.UavActiveMark,Dc=Ac.UavEnableMark,Rc=Ac.UavDisableMark,qc=Ac.MobileActiveMark,Pc=Ac.MobileEnableMark,Fc=Ac.MobileDisableMark,Kc=function(e){var t=Gr().taskReducer.taskState,a=t.task,c=t.fieldOperationData,l=t.curTile,i=t.filters.mainImagePath,u=Object(n.useMemo)((function(){return{CurTileShape:l.shape,fitShapes:[l.shape]}}),[l]),o=u.CurTileShape,m=u.fitShapes,b=function(e){var t=Gr().taskReducer,a=t.taskState,r=a.historySamples,c=a.markedSamples,l=a.auditSamples,i=a.curSample,u=t.taskDispatch,o=er(),s=Object(n.useState)({}),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(!1),O=Object(f.a)(g,2),k=O[0],h=O[1],E=Object(n.useState)([]),j=Object(f.a)(E,2),C=j[0],S=j[1],T=Object(n.useState)(null),x=Object(f.a)(T,2),w=x[0],I=x[1],N=Object(n.useState)(null),A=Object(f.a)(N,2),M=A[0],L=A[1],D=Object(n.useState)(!0),R=Object(f.a)(D,2),q=R[0],P=R[1],F=Object(n.useCallback)((function(e){u("setCurSample",e)}),[u]),K=Object(n.useMemo)((function(){var e=Sr()(C)?[].concat(Object(y.a)(r),Object(y.a)(c),Object(y.a)(l)):C;return o(e)}),[l,o,r,C,c]),Y=Object(n.useMemo)((function(){var e=function(e){},t=function(e){e.toolEvent="tool.mark:edit",M.tool.emit(e.toolEvent,e)};return[{Icon:mc,name:"\u5708\u9009",key:"sampleTaskMarkAdd",onActive:function(){M.tool&&(M.tool.on("map.draw:polygon",e),M.tool.draw.polygon.enable())},onDeactive:function(){M.tool&&(M.tool.draw.polygon.disable(),M.tool.off("map.draw:polygon",e))}},{Icon:sc.a,name:"\u7f16\u8f91",key:"sampleTaskMarkEdit",onActive:function(){M.tool&&(M.tool.edit.enable(),M.tool.on("map.edit:begin",t))},onDeactive:function(){M.tool&&(M.tool.edit.disable(),M.tool.off("map.edit:begin",t))}}]}),[M]),U=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(null);case 2:I("sampleTaskMarkAdd");case 3:case"end":return e.stop()}}),e)}))),[I]),G=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1);case 1:case"end":return e.stop()}}),e)}))),[h]),V=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:-1===i.id?(F({}),U()):(S(K.map((function(e){return e.id===b.id?b:e}))),F({})),G();case 2:case"end":return e.stop()}}),e)}))),[U,i.id,G,K,F,b]),B=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="create"===e.t0?3:"update"===e.t0?7:"delete"===e.t0?9:11;break;case 3:return S([].concat(Object(y.a)(K),[a])),F({}),U(),e.abrupt("break",12);case 7:return S(K.map((function(e){return e.id===a.id?a:e}))),e.abrupt("break",12);case 9:return S(K.filter((function(e){return e.id!==a.id}))),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:G();case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[U,G,K,F]),z=Object(n.useCallback)((function(e){var t=lc()(e,"layer.feature.properties.id");if(t){var a=K.find((function(e){return e.id===t}));F(a),v(a),h(!0)}}),[K,F]),H=Object(n.useCallback)((function(){return P(!q)}),[q]);return Object(n.useEffect)((function(){if(M)return M.tool.on("tool.mark:edit",z),function(){M.tool.off("tool.mark:edit",z)}}),[M,z]),{curSample:i,setCurSample:F,tempSample:b,setTempSample:v,visible:k,setVisible:h,localSamples:C,activeKey:w,setActiveKey:I,map:M,setMap:L,mainImageVisible:q,toggleMainImageVisible:H,toggleDatas:Y,onCancel:V,onOk:B,continueCreate:U,onClose:G,samples:K}}(),v=b.curSample,g=b.setCurSample,O=b.visible,k=b.setVisible,h=b.activeKey,j=b.map,C=b.setMap,S=b.toggleDatas,T=b.onCancel,x=b.onOk,w=b.continueCreate,I=b.onClose,N=b.samples,A=b.mainImageVisible,M=b.toggleMainImageVisible,L=function(e){var t=Gr().taskReducer.taskDispatch,a=Object(n.useState)({}),r=Object(f.a)(a,2),c=r[0],l=r[1],i=Object(n.useState)({opacity:100,visible:!1}),u=Object(f.a)(i,2),o=u[0],m=u[1],p=Object(n.useCallback)((function(e){if(Sr()(e))l({});else{var t=e.takeTime?s()(e.takeTime).format("YYYY-MM-DD HH:mm:ss"):"",a=e.comment||"",n="".concat(t," ").concat(a);l(Object(E.a)(Object(E.a)({},e),{},{title:n,url:e.bigImage,opacity:100}))}}),[l]),d=Object(n.useCallback)((function(){p(Object(E.a)(Object(E.a)({},c),{},{visible:!1}))}),[c,p]),b=Object(n.useCallback)((function(e){p(Object(E.a)(Object(E.a)({},e),{},{visible:!0}))}),[p]),v=Object(n.useCallback)((function(){m({opacity:100,visible:!1}),t("setFilters",{mainImageId:null})}),[t]),g=Object(n.useCallback)((function(){p({}),t("setFilters",{mainImageId:null})}),[p,t]),O=Object(n.useCallback)((function(e){if(g(),o.id===e.id)return v();var a=Object(E.a)(Object(E.a)({},o),e);m(Object(E.a)(Object(E.a)({},a),{},{visible:!0})),p(Object(E.a)(Object(E.a)({},a),{},{visible:!1})),t("setFilters",{mainImageId:e.id})}),[g,v,p,t,o]),k=Object(n.useCallback)((function(e,a){v(),p(a),b(a),t("setFilters",{mainImageId:a.id})}),[b,v,p,t]),h=Object(n.useCallback)((function(e){m(Object(E.a)(Object(E.a)({},o),{},{opacity:e}))}),[o]);return{imageViewerData:c,imageViewerOnShow:b,imageViewerOnClose:d,uavImageData:o,onUavClick:O,onMobileClick:k,onImageLayerOpacityChange:h}}(),D=L.uavImageData,R=L.onUavClick,q=L.imageViewerData,P=L.onMobileClick,F=L.imageViewerOnShow,K=L.imageViewerOnClose,Y=L.onImageLayerOpacityChange,U=oc({path:i}).path,G=Object(n.useMemo)((function(){var e=[],t=[],a=[],n=[];return c.forEach((function(r){if("MOBILE_PHONE_CAMERA"===r.source)r.used?n.push(r):a.push(r);else if("UAV_CAMERA"===r.source){var c=Xr.a.geoJSON(r.shape).getBounds().getCenter(),l=c.lat,i=c.lng;r.center={type:"Point",coordinates:[i,l]},r.used?t.push(r):e.push(r)}})),{uavEnableList:e,uavDisableList:t,mobileEnableList:a,mobileDisableList:n}}),[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.TMap,{className:"mark-map",options:{maxZoom:30}},r.a.createElement(ac,null),"RANGE"===a.mode&&r.a.createElement(Sc,null),r.a.createElement(fc,{setCurSample:g,samples:N,setVisible:k,setMap:C,toggleMainImageVisible:M}),r.a.createElement(xc,{options:{enables:["hiding"]},toggleDatas:S,activeKey:h}),r.a.createElement(Oc,{task:a}),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ic,{data:o,bringToBack:!0}),r.a.createElement(wc,{flyEnable:!1,shapes:m})),U&&r.a.createElement(Mc,{path:U,shape:o,visible:A,options:{maxNativeZoom:16}}),!Sr()(v)&&r.a.createElement(ic,{visible:O,onClose:I,samples:N,map:j,onCancel:T,continueCreate:w,onOk:x}),G.uavEnableList&&G.uavEnableList.map((function(e,t){return r.a.createElement(Dc,{key:t,data:e.center,properties:e,onClick:function(e,t){return R(t)}})})),G.uavDisableList&&G.uavDisableList.map((function(e,t){return r.a.createElement(Rc,{key:t,data:e.center,properties:e,onClick:function(e,t){return R(t,j)}})})),G.mobileEnableList&&G.mobileEnableList.map((function(e,t){return r.a.createElement(Pc,{key:t,data:e.shape,properties:e,onClick:P,angle:e.direction})})),G.mobileDisableList&&G.mobileDisableList.map((function(e,t){return r.a.createElement(Fc,{key:t,data:e.shape,properties:e,onClick:P,angle:e.direction})})),D.visible&&r.a.createElement(vc,{uavImageData:D}),!Sr()(q)&&r.a.createElement(r.a.Fragment,null,"MOBILE_PHONE_CAMERA"===q.source&&r.a.createElement(qc,{data:q.shape,properties:q,onClick:P,angle:q.direction}),"UAV_CAMERA"===q.source&&r.a.createElement(Lc,{data:q.center,properties:q,onClick:function(e,t){return R(t)}})),-1===v.id&&r.a.createElement(hc,{shape:v.shape}),!Sr()(N)&&N.map((function(e){return r.a.createElement(Nc,{key:e.id,data:e.data,style:e.style,properties:e.properties,bringToFront:!0})})),r.a.createElement(dc,null)),D.visible&&r.a.createElement(Ec,{data:D,opacityonChange:Y,imageOnShow:F}),r.a.createElement(Tc,{visible:q.visible,data:q,onClose:K}))},Yc=Qe.TMap.GeoJSON,Uc=Qe.TMap.TqtTileLayer,Gc=function(e){var t=e.imagePath,a=Gr().taskReducer.taskState,c=a.task,l=a.curSample,i=a.curTile,u=Object(n.useMemo)((function(){return{shape:i.shape}}),[i]).shape,o=oc({path:t}).path;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.TMap,{className:"mark-map"},u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Yc,{data:u})),r.a.createElement(Oc,{task:c}),r.a.createElement(Sc,null),o&&r.a.createElement(Uc,{path:o,shape:u,options:{maxNativeZoom:16}}),l.shape&&r.a.createElement(Yc,{data:l.shape}),r.a.createElement(ac,null)))},Vc=function(e){var t=Gr().taskReducer.taskState,a=t.task,n=t.filters,c=n.topLeftImagePath,l=n.topRightImagePath;return r.a.createElement("div",{className:"t-map"},r.a.createElement("div",{className:"map-container"},r.a.createElement(nc,null,"RANGE"===a.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"compair-map-container"},r.a.createElement(Gc,{imagePath:c}),r.a.createElement(Gc,{imagePath:l})),r.a.createElement("div",{className:"main-map-container"},r.a.createElement(Kc,null))),"RANGE"!==a.mode&&r.a.createElement("div",{className:"main-map-container"},r.a.createElement(Kc,null)))))},Bc=Object(P.i)((function(e){var t=e.match.params,a=e.footer,c=e.operation,l=void 0===c?"mark":c,i=oe(),u=Gr().taskReducer,o=u.taskState,s=u.taskDispatch,m=Object(n.useMemo)((function(){return t.taskId}),[t]),f=Object(n.useMemo)((function(){return i.get("taskName")}),[i]),b=Object(n.useMemo)((function(){return t.tile}),[t]),v=Object(n.useMemo)((function(){return[{name:f,key:"/app/sample-task/".concat(l,"/").concat(m,"/?taskName=").concat(f)},{name:b}]}),[l,m,f,b]);qr({navList:v});var g=Object(n.useMemo)((function(){return o.tileList.find((function(e){return e.tile===b}))||{}}),[o.tileList,b]),O=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jt.getTask(m);case 4:t=e.sent,s("setTask",hr(t)),s("setTileList",yr(t.tileList,t.tiles));case 7:case"end":return e.stop()}}),e)}))),[m,s]),k=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.queryMarked(m,b);case 2:t=e.sent,s("setMarkedSamples",t);case 4:case"end":return e.stop()}}),e)}))),[s,m,b]);return Object(n.useEffect)((function(){O()}),[O]),Object(n.useEffect)((function(){k()}),[k]),Object(n.useEffect)((function(){return s("setCurTile",g),function(){s("resetFilters")}}),[g,s]),r.a.createElement("div",{className:"sample-task-layout"},r.a.createElement(Qr,{taskId:m,footer:a}),r.a.createElement(Vc,{taskState:o}))})),zc=Qe.TMap.TilePolygon,Hc=Qe.TMap.BoundsFit,Jc=Object(P.i)((function(e){var t=e.history.push,a=e.match.params,c=e.footer,l=e.operation,i=void 0===l?"mark":l,u=oe(),o=Rr(),s=o.taskState,m=s.task,b=s.tileList,v=o.taskDispatch,g=Object(n.useState)({}),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useMemo)((function(){return a.taskId}),[a]),E=Object(n.useMemo)((function(){return u.get("taskName")}),[u]);qr({name:E});var j=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jt.getTask(y);case 4:t=e.sent,v("setTask",hr(t)),v("setTileList",yr(t.tileList,t.tiles));case 7:case"end":return e.stop()}}),e)}))),[y,v]),C=Object(n.useCallback)((function(e,a){var n="/app/sample-task/".concat(i,"/").concat(y,"/").concat(a,"?taskName=").concat(E);t(n)}),[i,t,y,E]),S=Object(n.useMemo)((function(){return[{form:{type:"tile-list",editable:!1,dataSource:b,onTileClick:C}}]}),[C,b]),T=Object(n.useMemo)((function(){return b.map((function(e){return e.shape}))}),[b]);return Object(n.useEffect)((function(){j()}),[j]),r.a.createElement("div",{className:"sample-task-layout"},r.a.createElement(Mr,{collection:S,filters:k,setFilters:h,width:350,footer:c}),r.a.createElement("div",{className:"t-map"},r.a.createElement(Qe.TMap,null,r.a.createElement(Oc,{task:m}),r.a.createElement(Hc,{flyEnable:!1,shapes:T}),b.map((function(e){return r.a.createElement(zc,{key:e.tile,text:e.tile,data:e.shape,onClick:C})})))))})),Wc=(a(538),function(e){return r.a.createElement(Ur,null,r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/app/sample-task/mark/:taskId",component:Jc}),r.a.createElement(P.b,{path:"/app/sample-task/mark/:taskId/:tile",component:Bc})))}),Qc=Object(P.i)((function(e){var t=e.match.params,a=Gr().taskReducer,c=a.taskState.auditSamples,l=a.taskDispatch,i=Object(n.useMemo)((function(){return t.taskId}),[t]),u=Object(n.useMemo)((function(){return t.tile}),[t]),o=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.queryForAudit(i,u);case 2:t=e.sent,l("setAuditSamples",t);case 4:case"end":return e.stop()}}),e)}))),[l,i,u]),s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.map((function(e){return e.id})),e.next=3,Jt.auditSamples(t,"PASS");case 3:case"end":return e.stop()}}),e)}))),[c]);Object(n.useEffect)((function(){o()}),[o]);var m=Object(n.useMemo)((function(){return r.a.createElement(ke.a,{type:"primary",onClick:function(){return s()}},"\u5168\u90e8\u5ba1\u6838\u901a\u8fc7")}),[s]);return r.a.createElement(Bc,{footer:m,operation:"audit"})})),_c=function(e){return r.a.createElement(Jc,{operation:"audit"})},Xc=function(e){return r.a.createElement(Ur,null,r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/app/sample-task/audit/:taskId",component:_c}),r.a.createElement(P.b,{path:"/app/sample-task/audit/:taskId/:tile",component:Qc})))},Zc=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.d,null,r.a.createElement(P.b,{path:"/app/sample-task/list",component:Or}),r.a.createElement(P.b,{path:"/app/sample-task/create",component:Kr}),r.a.createElement(P.b,{path:"/app/sample-task/mark/",component:Wc}),r.a.createElement(P.b,{path:"/app/sample-task/audit",component:Xc}),r.a.createElement(P.a,{to:"/app/sample-task/list"})))},$c=a(349),el=(a(1229),fa.a.Column),tl=function(e){var t=e.rgba,a=Object(we.a)(e,["rgba"]);return r.a.createElement("div",Object.assign({className:"account-mark-colorbar"},a,{style:{background:"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a,")")}}))},al={tagCode:null,settings:{borderColor:{r:241,g:112,b:19,a:100}}},nl=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(al),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(null),k=Object(f.a)(g,2),h=k[0],y=k[1],C=R().account,S=C.tagSettings,T=C.getAllTagSettings,x=C.getAllTagColors,w=Object(n.useCallback)((function(e,t,a){v(Object(E.a)(Object(E.a)({},a),{},Object(xe.a)({},e,t)))}),[]),I=Object(n.useCallback)((function(){c(!1),v(al)}),[]),N=Object(n.useCallback)((function(e){c(!0),y("\u521b\u5efa"),v(e)}),[]),A=Object(n.useCallback)((function(e){c(!0),y("\u786e\u5b9a"),v(e)}),[]),M=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.saveTagSettings(t.tagCode,t.settings);case 3:T(),x(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:return e.prev=10,I(),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[x,T,I]),L=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.deleteTagSettings(t.tagCode);case 3:T(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[T]);return r.a.createElement(Oe.a,{className:"account-mark-color"},r.a.createElement(ke.a,{type:"primary",onClick:function(){return N(b)}},"\u65b0\u5efa\u6807\u7b7e\u989c\u8272"),r.a.createElement(fa.a,{size:"small",className:"mark-color-table",dataSource:S,rowKey:function(e){return e.tagCode},pagination:{showSizeChanger:!0,defaultPageSize:30}},r.a.createElement(el,{title:"\u5730\u7269\u6807\u7b7e",dataIndex:"tagPath",key:"tagPath"}),r.a.createElement(el,{title:"\u6837\u672c\u63cf\u8fb9\u989c\u8272",dataIndex:"settings",key:"settings",render:function(e){return r.a.createElement(tl,{rgba:e.borderColor})}}),r.a.createElement(el,{title:"\u64cd\u4f5c",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"link",onClick:function(){A(e)}},"\u7f16\u8f91"),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onConfirm:function(){return L(e)}},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}})),r.a.createElement(We.a,{className:"mark-color-edit-modal",zIndex:100,title:"\u7f16\u8f91\u6807\u7b7e",visible:a,onCancel:function(){return c(!1)},footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{onClick:I},"\u53d6\u6d88"),r.a.createElement(ke.a,{type:"primary",onClick:function(){M(b)},disabled:!b.tagCode},h))},r.a.createElement(he.a.Item,{label:"\u9009\u62e9\u5730\u7269\u6807\u7b7e"},r.a.createElement(Gt,{value:b.tagCode,changeOnSelect:!0,disabled:"\u786e\u5b9a"===h,onChange:function(e){w("tagCode",e,b)}})),r.a.createElement(he.a.Item,{label:"\u6837\u672c\u63cf\u8fb9\u989c\u8272"},u?r.a.createElement("div",{className:"account-mark-setcolor-popover"},r.a.createElement("div",{className:"account-mark-setcolor-close",onClick:function(){o(!1)}}),r.a.createElement($c.SketchPicker,{color:b.settings.borderColor,onChange:function(e){return w("settings",{borderColor:e.rgb},b)}})):null,r.a.createElement(tl,{onClick:function(){o(!0)},rgba:b.settings.borderColor}))))},rl=(a(1230),function(e){var t=e.onChange,a=e.limitInfo,c=e.icon,l=e.accept,i=Object(n.useState)(!1),u=Object(f.a)(i,2),o=u[0],s=u[1],m=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,t(a);case 3:s(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),b=function(e){e.preventDefault();var t=e.dataTransfer&&e.dataTransfer.files||e.target.files;m(t)};return r.a.createElement("div",{className:"uploader-operation"},r.a.createElement("div",{type:"file",className:"uploader-operation-area"},o?r.a.createElement(Ma.a,null):c,r.a.createElement("h3",null,"\u70b9\u51fb\u6216\u5c06\u6587\u4ef6\u62d6\u62fd\u5230\u8fd9\u91cc\u4e0a\u4f20"),r.a.createElement("p",null,"\u652f\u6301\u6269\u5c55\u540d\uff1a",a),r.a.createElement("input",{onDrop:b,onChange:b,type:"file",multiple:!0,accept:l})))}),cl=(a(1231),fa.a.Column);function ll(e){Object(I.c)("upload-local-records","files",e)}var il=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(t);case 2:return n=e.sent,e.prev=3,e.next=6,Promise.all(n.map(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.upload(t.name,t.base64);case 2:return a=e.sent,e.abrupt("return",Object(E.a)(Object(E.a)({},t),{},{url:a}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:r=e.sent,l=[].concat(Object(y.a)(r),Object(y.a)(a)),c(l),ll(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),j.b.error(e.t0.message);case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}(),[]),i=Object(n.useCallback)((function(){Object(I.c)("upload-local-records","files",null),c([])}),[]);return Object(n.useEffect)((function(){var e=Object(I.b)("upload-local-records","files")||[];c(e)}),[]),r.a.createElement("div",{className:"upload-container"},r.a.createElement(rl,{onChange:function(e){l(e,a)},limitInfo:".png .jpg .gif .pdf .mp4\u7b49\uff0c\u6700\u5927\u652f\u630110M",icon:r.a.createElement(zn.a,null)}),r.a.createElement(Oe.a,{className:"upload-lists"},r.a.createElement(ke.a,{type:"primary",className:"mb12",onClick:i},"\u6e05\u9664\u672c\u5730\u8bb0\u5f55"),r.a.createElement(fa.a,{size:"small",dataSource:a,rowKey:function(e){return e.url},pagination:{showTotal:function(){return"\u5171".concat(a.length,"\u6761")},showSizeChanger:!0,defaultPageSize:30}},r.a.createElement(cl,{title:"\u6587\u4ef6\u540d",dataIndex:"name"}),r.a.createElement(cl,{title:"URL\u5730\u5740\uff08\u70b9\u51fb\u590d\u5236\uff09",render:function(e){return r.a.createElement(ke.a,{type:"link",onClick:function(){return w(e.url)}},e.url)}}),r.a.createElement(cl,{title:"\u64cd\u4f5c",render:function(e){return r.a.createElement("a",{href:e.url,rel:"noopener noreferrer",target:"_blank"},"\u67e5\u770b")}}))))};function ul(){var e=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(e+=performance.now());var t="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)}));return"".concat(t.toUpperCase())}var ol=new(function(){function e(){Object(b.a)(this,e)}return Object(v.a)(e,[{key:"queryAllPublishedRecords",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("PublishedRecordService.getAllPublishedRecords");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{thumbnail:e.thumbnail||"-",resolution:e.resolution||"-"})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"queryAllProducts",value:function(){return g.c.invoke("DataStandardService.getAllProducts")}},{key:"queryPublishedRecords",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("PublishedRecordService.queryPublishedRecords",{cdpCode:t,beginTime:a,endTime:n,shape:r});case 2:if(0!==(c=e.sent).length){e.next=5;break}return e.abrupt("return",c);case 5:return e.abrupt("return",c.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{thumbnail:e.thumbnail||"-",resolution:e.resolution||"-"})})));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"querySpaceInfo",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("PublishedRecordService.querySpaceInfo",{publishedRecordId:t});case 2:return a=e.sent,e.abrupt("return",{shape:{type:"SHAPE",value:JSON.parse(a.geometry)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createProduct",value:function(e){return g.c.invoke("PublishedRecordService.createProduct",{publishedRecord:e})}},{key:"operatePublishedData",value:function(e,t){return g.c.invoke("PublishedRecordService.operatePublishedData",{publishedRecordId:e,operationType:t})}},{key:"verifyDuplicateData",value:function(e){return g.c.invoke("PublishedRecordService.queryNeedToOffline",{wantToOnlineId:e})}},{key:"uploadTiff",value:function(e,t,a){return g.c.invoke("UploadService.uploadFileWithToken",{fileName:e,data:t,token:a})}},{key:"getAllCategories",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("CdpService.getAllCategories",{});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{value:e.code})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"saveCategory",value:function(e){return g.c.invoke("CdpService.saveCategory",{cdp:e})}},{key:"deleteCategory",value:function(e){return g.c.invoke("CdpService.deleteCategory",{id:e})}},{key:"getAllCors",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("CdpService.getCdpsByType",{type:"COR"});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{legend:Object(E.a)(Object(E.a)({},e.legend),{},{items:e.legend&&e.legend.items.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{id:ul()})}))}),cmapLegend:e.cmapLegend&&Object(E.a)(Object(E.a)({},e.cmapLegend),{},{items:e.cmapLegend.items.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{id:ul()})}))}),cdpName:e.pro.name,proCode:e.pro.code,formEnas:e.enas.map((function(e){return e.code})),value:e.code,name:e.name,cmapLegentType:e.cmapLegend?e.cmapLegend.colorType:null})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"saveCor",value:function(e){return g.c.invoke("CdpService.saveCor",{cor:e})}},{key:"deleteCor",value:function(e){return g.c.invoke("CdpService.deleteCdp",{id:e,type:"COR"})}},{key:"getAllDers",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("CdpService.getCdpsByType",{type:"DER"});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{legend:Object(E.a)(Object(E.a)({},e.legend),{},{items:e.legend&&e.legend.items.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{id:ul()})}))}),cmapLegend:e.cmapLegend&&Object(E.a)(Object(E.a)({},e.cmapLegend),{},{items:e.cmapLegend.items.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{id:ul()})}))}),cdpName:e.pro.name,corCode:e.pro.code,formEnas:e.enas.map((function(e){return e.code})),cmapLegentType:e.cmapLegend?e.cmapLegend.colorType:null})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"saveDer",value:function(e){return g.c.invoke("CdpService.saveDer",{der:e})}},{key:"deleteDer",value:function(e){return g.c.invoke("CdpService.deleteCdp",{id:e,type:"DER"})}},{key:"getAllEnas",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.invoke("EnaService.getAllEnas",{});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{value:e.code})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createEna",value:function(e){return g.c.invoke("EnaService.createEna",{ena:e})}},{key:"deleteEna",value:function(e){return g.c.invoke("EnaService.deleteEna",{id:e})}},{key:"updateEna",value:function(e){return g.c.invoke("EnaService.updateEna",{ena:e})}}]),e}()),sl=function(e){var t=e.setStandards,a=e.setTableLoading,c=e.fetchAllStandards,l=Object(n.useState)(null),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)([]),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(!1),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useMemo)((function(){return[{label:"COR\u7f16\u53f7",filterType:"TREE_SELECT",valueKey:"cdpCode",treeData:b},{label:"\u65f6\u95f4\u8303\u56f4",filterType:"DATES",valueKey:"dates"},{label:"\u7a7a\u95f4\u8303\u56f4",filterType:"SPACE",valueKey:"shape",spaceOptions:[{key:"\u884c\u653f\u533a\u57df",value:"ADMINISTRATIVE_REGION"},{key:"\u624b\u52a8\u5212\u533a",value:"SHAPE"},{key:"\u7ecf\u7eac\u5ea6",value:"POINTER"}]}]}),[b]);Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol.queryAllProducts();case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var C=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(n){var r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=11;break}return a(!0),h(!0),r=n.dates,"POINTER"===(c=Object(E.a)({},n.shape)).type&&(c.value=JSON.stringify({type:"Point",coordinates:[c.lon,c.lat]}),c.type="SHAPE"),e.next=9,ol.queryPublishedRecords(n.cdpCode,r&&r.length?r[0].format("YYYY-MM-DDT00:00:00"):void 0,r&&r.length?r[1].format("YYYY-MM-DDT23:59:59"):void 0,c.type?{type:c.type,value:c.value}:null);case 9:l=e.sent,t(l);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j.b.error(e.t0.message);case 16:return e.prev=16,a(!1),h(!1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(t){return e.apply(this,arguments)}}(),[a,t]),S=Object(n.useMemo)((function(){return!u}),[u]),T=Object(n.useCallback)((function(){o({}),c()}),[c]);return r.a.createElement(Oe.a,{className:"standard-publish-card"},r.a.createElement(ua,{layout:"inline",value:u,enabledFilters:y,onChange:o}),r.a.createElement(he.a.Item,null,r.a.createElement(ke.a,{className:"standard-filters-OKbtn",type:"primary",disabled:S,onClick:function(){C(u)},loading:k},"\u67e5\u8be2"),r.a.createElement(ke.a,{className:"standard-filters-cleanbtn",type:"primary",disabled:S,onClick:T},"\u91cd\u7f6e"),r.a.createElement("span",null,r.a.createElement(q.b,{to:"/app/standard-publish?type=info"},r.a.createElement(ke.a,{type:"primary"},"\u6570\u636e\u53d1\u5e03")))))},ml=a(570),pl=We.a.confirm,dl=[{name:"\u4e0a\u7ebf",enable:!1},{name:"\u4e0b\u7ebf",enable:!0},{name:"\u5220\u9664",enable:!0}],fl=[{name:"\u4e0a\u7ebf",enable:!0},{name:"\u4e0b\u7ebf",enable:!1},{name:"\u5220\u9664",enable:!0}],bl=function(e){var t=e.standards,a=e.setStandards,c=e.tableLoading,l=Object(n.useState)(),i=Object(f.a)(l,2),u=i[0],o=i[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),v=b[0],g=b[1],O=Object(n.useState)(!1),k=Object(f.a)(O,2),h=k[0],y=k[1],C=[{title:"ID",dataIndex:"id",filteredValue:t.id,defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},{title:"\u9884\u89c8",dataIndex:"thumbnail",render:function(e){return"-"===e?"-":r.a.createElement("img",{alt:"img",className:"standard-simg",src:"https://tile-cdn.terraqt.com/".concat(e)})}},{title:"\u6279\u6b21\u65f6\u95f4",dataIndex:"batchTime",sorter:function(e,t){return s()(e.batchTime).valueOf()-s()(t.batchTime).valueOf()},render:function(e){return"".concat(e.slice(0,10))}},Object(E.a)({title:"COR",dataIndex:"title"},Ga("title")),{title:"\u884c\u653f\u533a\u5212",dataIndex:"regionName",width:120},{title:"\u7a7a\u95f4\u8303\u56f4",dataIndex:"id",render:function(e){return r.a.createElement(ke.a,{type:"link",onClick:function(){N(e)}},"\u67e5\u770b")}},{title:"\u5f71\u50cf\u65f6\u95f4\u8303\u56f4",dataIndex:"imgTimeRange",render:function(e){return"".concat(e.beginTime.slice(0,10),"~").concat(e.endTime.slice(0,10))}},{title:"\u5206\u8fa8\u7387",dataIndex:"resolution"},Object(E.a)({title:"\u53d1\u5e03\u8005",dataIndex:"uploader"},Ga("uploader")),{title:"\u64cd\u4f5c",dataIndex:"operations",render:function(e,t){return e?e.map((function(e){return M(e,t)})):null}}],S=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ol.operatePublishedData(n.id,r);case 3:a(t.filter((function(e){return e.id!==n.id}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),[a,t]),T=Object(n.useCallback)((function(e,n){a(t.map((function(t){return t.id===e?Object(E.a)(Object(E.a)({},t),{},{operations:"ONLINE"===n?dl:fl}):t})))}),[a,t]),x=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ol.operatePublishedData(t,a);case 3:T(t,a),j.b.success("".concat(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),[T]),w=Object(n.useCallback)((function(e){pl({title:"\u786e\u8ba4\u4e0a\u7ebf\u6b64\u6570\u636e\uff1f",icon:r.a.createElement(ml.a,null),content:"\u7ebf\u4e0a\u5df2\u5b58\u5728\u76f8\u540c\u6570\u636e\uff0c\u9009\u62e9\u786e\u8ba4\uff0c\u51b2\u7a81\u6570\u636e\u5c06\u88ab\u81ea\u52a8\u4e0b\u7ebf",onOk:function(){x(e,"ONLINE")},onCancel:function(){}})}),[x]),I=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol.verifyDuplicateData(t);case 2:a=e.sent;try{0===a.length?x(t,"ONLINE"):w(t)}catch(n){j.b.error(n.message)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,w]),N=function(e){A(e),g(!0),y(!0)},A=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol.querySpaceInfo(t);case 2:a=e.sent,o(a),y(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),M=Object(n.useCallback)((function(e,t){return"\u5220\u9664"===e.name?r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",key:e.name+t.id,onConfirm:function(){S(t,"DELETE")},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link",disabled:!e.enable,key:e.name},"\u5220\u9664")):"\u4e0a\u7ebf"===e.name?r.a.createElement(ke.a,{type:"link",disabled:!e.enable,key:e.name,onClick:function(){return I(t.id)}},"\u4e0a\u7ebf"):r.a.createElement(ke.a,{type:"link",disabled:!e.enable,key:e.name,onClick:function(){return x(t.id,"OFFLINE")}},"\u4e0b\u7ebf")}),[S,x,I]);return r.a.createElement("div",{className:"standards-list"},r.a.createElement(Oe.a,null,r.a.createElement(fa.a,{size:"small",dataSource:t,rowKey:function(e){return e.id},columns:C,loading:c,pagination:{showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,defaultPageSize:30}})),r.a.createElement(Fa,{infos:u,conditionModalShow:v,conditionModalLoading:h,onCancel:function(){o({}),g(!1)}}))},vl=a(572),gl=function(e){var t=e.fetchAllStandards,a=Object(n.useState)({}),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(null),o=Object(f.a)(u,2),s=o[0],m=o[1],b=Object(n.useState)(null),v=Object(f.a)(b,2),g=v[0],O=v[1],k=Object(n.useState)([]),h=Object(f.a)(k,2),y=h[0],E=h[1],C=Object(n.useState)(!1),S=Object(f.a)(C,2),T=S[0],x=S[1],w=R().headerNav,I=w.mount,N=w.unMount,A=Object(n.useMemo)((function(){return[{label:"\u9009\u62e9\u4ea7\u54c1",filterType:"TREE_SELECT",valueKey:"CORs",treeData:y,required:!0},{label:"\u53d6\u503c\u6620\u5c04",filterType:"INPUT_NUM",valueKey:"valueMapper",required:!0,placeholder:"\u8f93\u5165\u4ea7\u54c1\u5bf9\u5e94\u7684\u6570\u503c",disabled:!l.CORs},{label:"\u6279\u6b21\u65f6\u95f4",filterType:"DATE",valueKey:"batchTime",required:!0},{label:"\u5f71\u50cf\u65f6\u95f4",filterType:"DATES",valueKey:"dates",required:!0},{label:"\u7a7a\u95f4\u8303\u56f4",filterType:"SPACE",valueKey:"shape",required:!0,spaceOptions:[{key:"\u884c\u653f\u533a\u57df",value:"ADMINISTRATIVE_REGION"}]},{label:"\u53d1\u5e03\u65b9\u5f0f",filterType:"RADIO_LIST",className:"form-publish-type",valueKey:"publishMethod",optionSource:[{value:"MANUAL",name:"\u624b\u52a8\u53d1\u5e03"},{value:"IMMEDIATE",name:"\u7acb\u5373\u53d1\u5e03",disabled:!0}],required:!0}]}),[y,l.CORs]),M=Object(P.g)(),L=function(){M.push("/app/standard-publish")},D=Object(n.useCallback)((function(e){e&&M.push(e)}),[M]);Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol.queryAllProducts();case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(n.useEffect)((function(){return I({type:"breadcrumb",items:[{name:"\u53d1\u5e03\u7ba1\u7406",key:"/app/standard-publish"},{name:"\u6570\u636e\u53d1\u5e03",key:null}],onChange:D}),function(){N()}}),[I,D,N]);var q=function(){var e=Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=l.dates,e.next=4,ol.createProduct({cdpCode:l.CORs,tiffMeta:{max:null,min:null,dataValue:l.valueMapper},batchTime:l.batchTime.format("YYYY-MM-DDT00:00:00"),imgTimeRange:{beginTime:a[0].format("YYYY-MM-DDT00:00:00"),endTime:a[1].format("YYYY-MM-DDT23:59:59")},tiffUrl:s,shape:l.shape,publishMethod:l.publishMethod});case 4:j.b.success("\u63d0\u4ea4\u6210\u529f~"),L(),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),F=Object(n.useMemo)((function(){return!l||!l.CORs||!l.CORs.length||!l.valueMapper||!l.batchTime||!l.dates||!l.dates.length||!l.shape.value||!l.publishMethod||!s}),[s,l]),K=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dataTransfer&&t.dataTransfer.files||t.target.files,x(!0),e.next=4,st(a);case 4:return n=e.sent,e.prev=5,e.next=8,ol.uploadTiff(n[0].name,n[0].base64,"7aac4d69-26de-4a10-96f6-c03d7339eda2");case 8:r=e.sent,x(!1),j.b.success("\u4e0a\u4f20\u6210\u529f"),m(r),O(n?n[0].name:null),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),j.b.error(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement(Oe.a,null,r.a.createElement("div",{className:"standard-info-form"},r.a.createElement(he.a.Item,{className:"upload-file",label:"\u6587\u4ef6\u9009\u62e9"},r.a.createElement(ke.a,{type:"primary",ghost:!0},r.a.createElement(Je.a,null),r.a.createElement("label",{htmlFor:"file",className:"input-file-label"},"\u4e0a\u4f20tiff")),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"details-text"},g||"\u672a\u9009\u62e9\u6587\u4ef6"),r.a.createElement("div",{className:"loading-icon"},T?r.a.createElement(vl.a,null):null)),r.a.createElement("input",{className:"input-file",name:"file",id:"file",type:"file",accept:".tif",onChange:K})),r.a.createElement(he.a.Item,{className:"input-url",label:"\u6587\u4ef6\u8def\u5f84"},r.a.createElement(Le.a,{placeholder:"\u8bf7\u8f93\u5165",value:s,onChange:function(e){return m(e.target.value)}})),r.a.createElement(ua,{layout:"horizontal",value:l,enabledFilters:A,onChange:i}),r.a.createElement("div",{className:"operate-btns"},r.a.createElement(ke.a,{type:"primary",onClick:q,disabled:F},"\u63d0\u4ea4"),r.a.createElement(ke.a,{className:"cancel-btn",onClick:function(){i(null),L()}},"\u53d6\u6d88"))))},Ol=(a(1232),function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,ol.queryAllPublishedRecords();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]);return Object(n.useEffect)((function(){s()}),[s]),"info"===oe().get("type")?r.a.createElement(gl,{fetchAllStandards:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement(sl,{setStandards:c,setTableLoading:o,fetchAllStandards:s}),r.a.createElement(bl,{standards:a,setStandards:c,tableloading:u}))}),kl=(a(1233),a(1234),function(e){var t=e.columns,a=e.datas,n=e.loading,c=e.path,l=e.type,i=e.text,u=e.onClickBtn;return r.a.createElement(Oe.a,{className:"standard-list-card"},c?r.a.createElement(q.b,{to:"/app/".concat(c,"?action=edit")},r.a.createElement(ke.a,{type:"primary"},"\u65b0\u5efa".concat(l))):r.a.createElement(ke.a,{type:"primary",onClick:u},"\u65b0\u5efa".concat(i)),r.a.createElement(fa.a,{size:"small",className:"cors-table",rowKey:function(e){return e.id},columns:t,dataSource:a,loading:n,pagination:{showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,defaultPageSize:30}}))}),hl=[{label:"\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0},{label:"\u7f16\u53f7",filterType:"INPUT",valueKey:"code",required:!0}],yl=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(!1),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(!1),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useState)(!1),E=Object(f.a)(y,2),C=E[0],S=E[1],T=[{title:"\u4ea7\u54c1\u5206\u7c7b",dataIndex:"name"},{title:"\u7f16\u53f7",dataIndex:"code"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){w(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}}],x=Object(n.useCallback)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,ol.getAllCategories();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()}),[]),w=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ol.deleteCategory(t);case 3:x(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[x]),I=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),a=t.id?{name:t.name,code:t.code,id:t.id}:{name:t.name,code:t.code},e.prev=2,e.next=5,ol.saveCategory(a);case 5:x(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),j.b.error(e.t0.message);case 11:return e.prev=11,v(!1),o([]),S(!1),e.finish(11);case 16:case"end":return e.stop()}}),e,null,[[2,8,11,16]])})));return function(t){return e.apply(this,arguments)}}(),N=Object(n.useMemo)((function(){return!u||!u.name||!u.code}),[u]);return Object(n.useEffect)((function(){x()}),[x]),r.a.createElement(r.a.Fragment,null,r.a.createElement(kl,{columns:T,datas:a,loading:k,setLoading:h,text:"\u5206\u7c7b",onClickBtn:function(){return v(!0)}}),r.a.createElement(We.a,{title:"\u7f16\u8f91\u5206\u7c7b",visible:b,onCancel:function(){v(!1),o([])},onOk:function(){return I(u)},okButtonProps:{disabled:N},confirmLoading:C},r.a.createElement(ua,{value:u,enabledFilters:hl,onChange:o})))},El=a(574),jl=(a(1235),function(e){var t,a=e.rgba,c=e.setColorBar,l=e.onChange,i=Object(we.a)(e,["rgba","setColorBar","onChange"]),u=Object(n.useCallback)((function(e){c?c({sqColor:e.rgb}):l(e)}),[l,c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Sa.a,{content:r.a.createElement("div",{className:"color-set-popover"},(t=a,r.a.createElement(r.a.Fragment,null,r.a.createElement($c.SketchPicker,{color:t,onChange:u})))),trigger:"click"},r.a.createElement("div",Object.assign({className:"colorbar"},i,{style:{background:"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(a.a,")")}}))))}),Cl=function(e){var t=e.colorData,a=e.setColorData,c=e.uneditName,l=Object(n.useCallback)((function(e){var n=t.filter((function(t,a){return a!==e}));a(n)}),[t,a]),i=Object(n.useCallback)((function(){var e={id:ul(),value:"",sqColor:{r:78,g:124,b:209,a:1}};a([].concat(Object(y.a)(t),[e]))}),[t,a]),u=Object(n.useCallback)((function(e,n){t.find((function(e){return e.id===n.id})).value=e,a(Object(y.a)(t))}),[t,a]),o=Object(n.useCallback)((function(e,n){t.find((function(e){return e.id===n.id})).sqColor=e.rgb,a(Object(y.a)(t))}),[t,a]),s=[{title:"\u63d2\u5165\u503c",dataIndex:"value",render:function(e,t,a){return r.a.createElement(Le.a,{style:{width:80,textAlign:"center",marginRight:5},value:e,disabled:c,onChange:function(e){return u(e.target.value,t)}})}},{title:"\u989c\u8272",render:Object(n.useCallback)((function(e,t){return r.a.createElement(jl,{rgba:e.sqColor,onChange:function(e){return o(e,t)}})}),[o])},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(e,a,n){return r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:function(){return l(n)},disabled:a.id!==t[t.length-1].id||1===t.length},r.a.createElement(ke.a,{type:"link",disabled:a.id!==t[t.length-1].id||1===t.length},"\u5220\u9664"))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(fa.a,{rowKey:function(e){return e.id},className:"cmap-table",dataSource:t,columns:s}),r.a.createElement(ke.a,{className:"add-row-btn",type:"dashed",onClick:i},r.a.createElement(El.a,null),"\u65b0\u589e"))},Sl=function(e){var t=e.colorData,a=e.setColorData,c=Object(n.useState)(1),l=Object(f.a)(c,2),i=l[0],u=l[1],o=Object(n.useCallback)((function(e,n){t[10*(i-1)+n].value=e,a(Object(y.a)(t))}),[t,i,a]),s=Object(n.useCallback)((function(e,n){t[10*(i-1)+n].sqColor=e.rgb,a(Object(y.a)(t))}),[t,i,a]),m=Object(n.useCallback)((function(e){var n=t.filter((function(t,a){return a!==e}));a(n)}),[t,a]),p=Object(n.useCallback)((function(){var e={id:ul(),value:"",sqColor:{r:78,g:124,b:209,a:1}};a([].concat(Object(y.a)(t),[e]))}),[t,a]),d=Object(n.useMemo)((function(){var e=[];return t.forEach((function(a,n){if(n!==t.length-1){var r=a.value,c=t[n+1].value;e.push(Object(E.a)(Object(E.a)({},a),{},{value:[r,c],key:n}))}})),e}),[t]),b=[{title:"\u533a\u95f4\u503c",dataIndex:"value",render:function(e,t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le.a,{style:{width:80,textAlign:"center",marginRight:5},placeholder:"Small",value:e[0],onChange:function(e){o(e.target.value,a)}}),"~",r.a.createElement(Le.a,{className:"site-input-right",style:{width:80,textAlign:"center",marginLeft:5},placeholder:"Large",value:e[1],onChange:function(e){o(e.target.value,a+1)}}))}},{title:"\u989c\u8272",render:Object(n.useCallback)((function(e,t,a){return r.a.createElement(jl,{rgba:e.sqColor,onChange:function(e){return s(e,a)}})}),[s])},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(e,a,n){return r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:function(){return m(n+1)},disabled:a.id!==t[t.length-2].id||2===t.length},r.a.createElement(ke.a,{type:"link",disabled:a.id!==t[t.length-2].id||2===t.length},"\u5220\u9664"))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(fa.a,{className:"cmap-table",rowKey:function(e){return e.id},dataSource:d,columns:b,pagination:{onChange:u}}),r.a.createElement(ke.a,{className:"add-row-btn",type:"dashed",onClick:p},r.a.createElement(El.a,null),"\u65b0\u589e"))},Tl=function(e){var t=e.colorData,a=e.setColorData,c=e.enableAdd,l=e.uneditName,i=Object(n.useCallback)((function(e){var n=t.filter((function(t,a){return a!==e}));a(n)}),[t,a]),u=Object(n.useCallback)((function(){var e={id:ul(),value:0,sqColor:{r:78,g:124,b:209,a:1}};a([].concat(Object(y.a)(t),[e]))}),[t,a]),o=Object(n.useCallback)((function(e,n){t.find((function(e){return e.id===n.id})).name=e,a(Object(y.a)(t))}),[t,a]),s=Object(n.useCallback)((function(e,n){t.find((function(e){return e.id===n.id})).sqColor=e.rgb,a(Object(y.a)(t))}),[t,a]),m=[{title:"\u5206\u6bb5\u540d",dataIndex:"name",render:function(e,t){return r.a.createElement(Le.a,{style:{maxWidth:180,textAlign:"center",marginRight:5},value:e,disabled:l,onChange:function(e){return o(e.target.value,t)}})}},{title:"\u989c\u8272",render:Object(n.useCallback)((function(e,t){return r.a.createElement(jl,{rgba:e.sqColor,onChange:function(e){return s(e,t)}})}),[s])},{titile:"\u7f16\u8f91",dataIndex:"action",render:function(e,a,n){return r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:function(){return i(n)},disabled:a.id!==t[t.length-1].id||1===t.length},r.a.createElement(ke.a,{type:"link",disabled:a.id!==t[t.length-1].id||1===t.length},"\u5220\u9664"))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(fa.a,{className:"cmap-table",rowKey:"id",dataSource:t,columns:m}),c&&r.a.createElement(ke.a,{className:"add-row-btn",type:"dashed",onClick:u},r.a.createElement(El.a,null),"\u65b0\u589e"))},xl=function(e){var t=e.legendType,a=e.label,n=Object(we.a)(e,["legendType","label"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a.Item,{label:a,required:"true"},"COLOR_LUMP"===t?r.a.createElement(Tl,n):"COLOR_BAR"===t?r.a.createElement(Cl,n):r.a.createElement(Sl,n)))},wl=[{id:"1",name:"",value:1,sqColor:{a:1,r:12,g:151,b:151}}],Il=[{id:"2",name:"",sqColor:{r:26,g:150,b:65,a:1},value:-1},{id:"3",name:"",sqColor:{r:255,g:230,b:90,a:1},value:0},{id:"4",name:"",sqColor:{r:215,g:25,b:28,a:1},value:1}],Nl=function(e){var t=e.cor,a=e.fetchCorList,c=Object(n.useState)([]),l=Object(f.a)(c,2),i=l[0],u=l[1],o=Object(n.useState)([]),s=Object(f.a)(o,2),m=s[0],b=s[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),O=g[0],k=g[1],h=Object(n.useState)([]),y=Object(f.a)(h,2),E=y[0],C=y[1],S=Object(n.useState)(t.cmapLegentType?t.cmapLegentType:"COLOR_LUMP"),T=Object(f.a)(S,2),x=T[0],w=T[1],I=Object(n.useState)([]),N=Object(f.a)(I,2),A=N[0],M=N[1],L=oe(),D=R().headerNav,q=Object(P.g)(),F=D.mount,K=D.unMount,Y=Object(n.useMemo)((function(){return[{label:"COR\u540d\u79f0",filterType:"MARK_TAG",valueKey:"name",changeOnSelect:!0,commonlyUsedEnable:!0,required:!0,disabled:!!L.get("id")},{label:"\u7f16\u53f7",filterType:"INPUT",valueKey:"code",disabled:!!L.get("id"),placeholder:"COR\u7f16\u53f7"},{label:"\u4ea7\u54c1\u5206\u7c7b",filterType:"SELECT",optionSource:i,valueKey:"proCode",required:!0},{label:"\u663e\u793a\u98ce\u683c",filterType:"RADIO_LIST",valueKey:"dateSelectorType",optionSource:[{value:"GALLERY",name:"\u753b\u5eca"},{value:"DATELINE",name:"\u65f6\u95f4\u8f74"},{value:"TIMEPLAYER",name:"\u64ad\u653e\u5668"}],required:!0},{label:"\u901a\u7528\u80fd\u529b",filterType:"SELECT",optionSource:m,mode:"multiple",valueKey:"formEnas",required:!0}]}),[L,i,m]),U=Object(n.useCallback)((function(){q.push("/app/standard-cors")}),[q]),G=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.find((function(e){return e.code===t.proCode})),r=t.formEnas,c=r.map((function(e){return{code:e}})),l=-1===r.indexOf("CHANGE_MAP")?null:{colorType:x,items:A},e.prev=4,e.next=7,ol.saveCor({id:t.id?t.id:void 0,name:t.name,code:t.code,pro:{id:n.id},enas:c,dateSelectorType:t.dateSelectorType,legend:{colorType:"COLOR_LUMP",items:[{value:1,name:E[0].name,sqColor:E[0].sqColor}]},cmapLegend:l});case 7:U(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),j.b.error(e.t0.message);case 13:return e.prev=13,a(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),[A,E,x,a,U,i]),V=Object(n.useMemo)((function(){return!O||!O.name||!O.code||!O.proCode}),[O]),B=Object(n.useCallback)((function(e){e&&q.push(e)}),[q]);return Object(n.useEffect)((function(){return F({type:"breadcrumb",items:[{name:"COR\u7ba1\u7406",key:"/app/standard-cors"},{name:"\u7f16\u8f91COR",key:null}],onChange:B}),function(){K()}}),[F,B,K]),Object(n.useEffect)((function(){t.id&&k(t),C(t.legend?t.legend.items:wl),M(t.cmapLegend?t.cmapLegend.items:Il)}),[t]),Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ol.getAllCategories(),ol.getAllEnas()]);case 2:t=e.sent,a=Object(f.a)(t,2),n=a[0],r=a[1],u(n),b(r);case 8:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(Oe.a,{className:"cor-form-card"},r.a.createElement("div",{className:"cor-info-form"},r.a.createElement(ua,{layout:"horizontal",value:O,enabledFilters:Y,onChange:k}),r.a.createElement(he.a.Item,{label:"COR\u56fe\u4f8b",required:!0,className:"color-cor"},r.a.createElement(Tl,{enableAdd:!1,colorData:E,setColorData:C})),O.formEnas&&-1!==O.formEnas.indexOf("CHANGE_MAP")?r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a.Item,{label:"\u53d8\u5316\u76d1\u6d4b",required:"true",className:"cmap-color"},r.a.createElement(ye.a.Group,{value:x,onChange:function(e){return w(e.target.value)}},r.a.createElement(ye.a,{value:"COLOR_LUMP"},"\u5355\u503c\u5206\u6bb5"),r.a.createElement(ye.a,{value:"COLOR_RANGE"},"\u533a\u95f4\u5206\u6bb5"),r.a.createElement(ye.a,{value:"COLOR_BAR"},"\u63d2\u503c"))),r.a.createElement(xl,{label:"\u53d8\u5316\u76d1\u6d4b\u914d\u7f6e",legendType:x,colorData:A,setColorData:M,enableAdd:!0})):null,r.a.createElement("div",{className:"operate-btns"},r.a.createElement(ke.a,{type:"primary",onClick:function(){return G(O)},disabled:V},"\u63d0\u4ea4"),r.a.createElement(ke.a,{className:"cancel-btn",onClick:function(){U()}},"\u53d6\u6d88"))))},Al={GALLERY:"\u753b\u5eca",DATELINE:"\u65f6\u95f4\u8f74",TIMEPLAYER:"\u64ad\u653e\u5668"},Ml=function(e){var t=e.loading,a=e.setLoading,c=e.corList,l=e.fetchCorList,i=[Object(E.a)({title:"COR",dataIndex:"name"},Ga("name")),Object(E.a)({title:"\u7f16\u53f7",dataIndex:"code"},Ga("code")),Object(E.a)({title:"\u7c7b\u522b",dataIndex:"cdpName"},Ga("cdpName")),{title:"\u663e\u793a\u98ce\u683c",dataIndex:"dateSelectorType",render:function(e){return Al[e]}},{title:"\u901a\u7528\u80fd\u529b",dataIndex:"enas",render:function(e){return e.map((function(e){return r.a.createElement("div",{key:e.code},e.name)}))}},{title:"\u56fe\u4f8b",dataIndex:"legend",render:function(e){return r.a.createElement("div",null,e?r.a.createElement(Qe.Legend,{type:e.colorType,datas:e}):null)}},{title:"\u53d8\u5316\u76d1\u6d4b\u56fe\u4f8b",dataIndex:"cmapLegend",render:function(e){return r.a.createElement("div",null,e?r.a.createElement(Qe.Legend,{type:e.colorType,datas:e}):null)}},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.b,{to:"/app/".concat("standard-cors","?action=edit&id=").concat(t.id)},r.a.createElement(ke.a,{type:"link"},"\u7f16\u8f91")),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){u(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}}],u=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,ol.deleteCor(t);case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:return e.prev=10,a(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[l,a]);return r.a.createElement(kl,{columns:i,datas:c,loading:t,setLoading:a,path:"standard-cors",type:"COR"})},Ll=(a(1236),function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,ol.getAllCors();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]),m=oe(),b=m.get("action"),v=m.get("id"),g=Object(n.useMemo)((function(){return a.find((function(e){return e.id===Number(v)}))||{}}),[a,v]);return Object(n.useEffect)((function(){s()}),[s]),"edit"===b?r.a.createElement(Nl,{cor:g,fetchCorList:s}):r.a.createElement(Ml,{corList:a,fetchCorList:s,loading:u,setLoading:o})}),Dl=(a(1237),Pe.a.Option),Rl=[{id:"1",name:"",value:1,sqColor:{a:1,r:12,g:151,b:151}}],ql=[{id:"2",name:"",sqColor:{r:26,g:150,b:65,a:1},value:-1},{id:"3",name:"",sqColor:{r:255,g:230,b:90,a:1},value:0},{id:"4",name:"",sqColor:{r:215,g:25,b:28,a:1},value:1}],Pl=function(e){var t=e.der,a=e.fetchDerList,c=Object(n.useState)(""),l=Object(f.a)(c,2),i=l[0],u=l[1],o=Object(n.useState)([]),s=Object(f.a)(o,2),m=s[0],b=s[1],v=Object(n.useState)([]),g=Object(f.a)(v,2),O=g[0],k=g[1],h=Object(n.useState)([]),y=Object(f.a)(h,2),C=y[0],S=y[1],T=Object(n.useState)(t.legend?t.legend.colorType:"COLOR_LUMP"),x=Object(f.a)(T,2),w=x[0],I=x[1],N=Object(n.useState)(t.cmapLegend?t.cmapLegend.colorType:"COLOR_LUMP"),A=Object(f.a)(N,2),M=A[0],L=A[1],D=Object(n.useState)([]),q=Object(f.a)(D,2),F=q[0],K=q[1],Y=oe(),U=R().headerNav,G=Object(P.g)(),V=U.mount,B=U.unMount,z=Object(n.useMemo)((function(){return[{label:"DER\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0,disabled:!!Y.get("id")},{label:"\u7f16\u53f7",filterType:"INPUT",valueKey:"code",required:!0,placeholder:"der\u7f16\u53f7",disabled:!!Y.get("id")},{label:"COR",filterType:"SELECT",optionSource:m,valueKey:"corCode",required:!0},{label:"\u663e\u793a\u98ce\u683c",filterType:"RADIO_LIST",valueKey:"dateSelectorType",optionSource:[{value:"GALLERY",name:"\u753b\u5eca"},{value:"DATELINE",name:"\u65f6\u95f4\u8f74"},{value:"TIMEPLAYER",name:"\u64ad\u653e\u5668"}],required:!0}]}),[m,Y]),H=Object(n.useCallback)((function(){G.push("/app/standard-ders")}),[G]),J=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.find((function(e){return e.code===t.corCode})),r=t.formEnas,c=r?r.map((function(e){return{code:e}})):void 0,l=-1===r.indexOf("CHANGE_MAP")?null:{colorType:M,items:F},e.prev=4,e.next=7,ol.saveDer({id:t.id?t.id:void 0,name:t.name,code:t.code,pro:{id:n.id},enas:c,dateSelectorType:t.dateSelectorType,legend:{colorType:w,items:C},cmapLegend:l});case 7:H(),S(Rl),K(ql),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),j.b.error(e.t0.message);case 15:return e.prev=15,a(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[F,M,m,C,w,a,H]),W=Object(n.useMemo)((function(){}),[]),Q=Object(n.useCallback)((function(e){e&&G.push(e)}),[G]);return Object(n.useEffect)((function(){return V({type:"breadcrumb",items:[{name:"DER\u7ba1\u7406",key:"/app/standard-ders"},{name:"\u7f16\u8f91DER",key:null}],onChange:Q}),function(){B()}}),[V,Q,B]),Object(n.useEffect)((function(){t.id&&u(t),S(t.legend?t.legend.items:Rl),K(t.cmapLegend?t.cmapLegend.items:ql)}),[t]),Object(n.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ol.getAllCors(),ol.getAllEnas()]);case 2:t=e.sent,a=Object(f.a)(t,2),n=a[0],r=a[1],b(n),k(r);case 8:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(Oe.a,{className:"der-form-card"},r.a.createElement("div",{className:"der-info-form"},r.a.createElement(ua,{layout:"horizontal",value:i,enabledFilters:z,onChange:u}),r.a.createElement(he.a.Item,{label:"\u56fe\u4f8b\u7c7b\u578b",required:"true",className:"der-color-type"},r.a.createElement(ye.a.Group,{value:w,onChange:function(e){return I(e.target.value)}},r.a.createElement(ye.a,{value:"COLOR_LUMP"},"\u5355\u503c\u5206\u6bb5"),r.a.createElement(ye.a,{value:"COLOR_RANGE"},"\u533a\u95f4\u5206\u6bb5"),r.a.createElement(ye.a,{value:"COLOR_BAR"},"\u63d2\u503c"))),r.a.createElement(xl,{label:"DER\u56fe\u4f8b\u914d\u7f6e",legendType:w,colorData:C,setColorData:S,enableAdd:!0}),r.a.createElement(he.a.Item,{label:"\u901a\u7528\u80fd\u529b",required:"true",className:"der-enas"},r.a.createElement(Pe.a,{className:"ena-set",placeholder:"\u8bf7\u9009\u62e9",value:i.formEnas,mode:"multiple",onChange:function(e){u(Object(E.a)(Object(E.a)({},i),{},{formEnas:e}))}},O.map((function(e){return r.a.createElement(Dl,{key:e.id,value:e.code},e.name)})))),i.formEnas&&-1!==i.formEnas.indexOf("CHANGE_MAP")?r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a.Item,{label:"\u53d8\u5316\u76d1\u6d4b",required:"true",className:"cmap-color"},r.a.createElement(ye.a.Group,{value:M,onChange:function(e){return L(e.target.value)}},r.a.createElement(ye.a,{value:"COLOR_LUMP"},"\u5355\u503c\u5206\u6bb5"),r.a.createElement(ye.a,{value:"COLOR_RANGE"},"\u533a\u95f4\u5206\u6bb5"),r.a.createElement(ye.a,{value:"COLOR_BAR"},"\u63d2\u503c"))),r.a.createElement(xl,{label:"\u53d8\u5316\u76d1\u6d4b\u914d\u7f6e",legendType:M,colorData:F,setColorData:K,enableAdd:!0})):null,r.a.createElement("div",{className:"operate-btns"},r.a.createElement(ke.a,{type:"primary",onClick:function(){return J(i)},disabled:W},"\u63d0\u4ea4"),r.a.createElement(ke.a,{className:"cancel-btn",onClick:function(){H()}},"\u53d6\u6d88"))))},Fl=function(e){var t=e.derList,a=e.loading,c=e.setLoading,l=e.fetchDerList,i=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,ol.deleteDer(t);case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j.b.error(e.t0.message);case 10:return e.prev=10,c(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[l,c]),u=[Object(E.a)({title:"DER",dataIndex:"name"},Ga("name")),Object(E.a)({title:"\u7f16\u53f7",dataIndex:"code"},Ga("code")),Object(E.a)({title:"\u7c7b\u522b",dataIndex:"cdpName"},Ga("cdpName")),{title:"\u663e\u793a\u98ce\u683c",dataIndex:"dateSelectorType",render:function(e){return Al[e]}},{title:"\u901a\u7528\u80fd\u529b",dataIndex:"enas",render:function(e){return e.map((function(e){return r.a.createElement("div",{key:e.code},e.name)}))}},{title:"\u56fe\u4f8b",dataIndex:"legend",render:function(e){return r.a.createElement("div",null,e?r.a.createElement(Qe.Legend,{type:e.colorType,datas:e}):null)}},{title:"\u53d8\u5316\u76d1\u6d4b\u56fe\u4f8b",dataIndex:"cmapLegend",render:function(e){return r.a.createElement("div",null,e?r.a.createElement(Qe.Legend,{type:e.colorType,datas:e}):null)}},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.b,{to:"/app/".concat("standard-ders","?action=edit&id=").concat(t.id)},r.a.createElement(ke.a,{type:"link"},"\u7f16\u8f91")),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){i(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}}];return r.a.createElement(kl,{columns:u,datas:t,loading:a,setLoading:c,path:"standard-ders",type:"DER"})},Kl=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,ol.getAllDers();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]),m=oe(),b=m.get("action"),v=m.get("id"),g=Object(n.useMemo)((function(){return a.find((function(e){return e.id===Number(v)}))||{}}),[a,v]);return Object(n.useEffect)((function(){s()}),[s]),"edit"===b?r.a.createElement(Pl,{der:g,fetchDerList:s}):r.a.createElement(Fl,{derList:a,fetchDerList:s,loading:u,setLoading:o})},Yl=(a(1238),{GLOBAL:"\u5168\u5c40",CDP:"CDP\u7ea7"}),Ul=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(!1),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(!1),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useState)(!1),E=Object(f.a)(y,2),C=E[0],S=E[1],T=Object(n.useMemo)((function(){return[{label:"\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0},{label:"\u7f16\u53f7",filterType:"INPUT",valueKey:"code",required:!0,disabled:!!u.id},{label:"\u7c7b\u578b",filterType:"RADIO_LIST",valueKey:"enaLevel",optionSource:[{value:"GLOBAL",name:"\u5168\u5c40"},{value:"CDP",name:"CDP\u7ea7"}],required:!0}]}),[u]),x=[{title:"\u901a\u7528\u80fd\u529b",dataIndex:"name"},{title:"\u7f16\u53f7",dataIndex:"code"},{title:"\u7c7b\u578b",dataIndex:"enaLevel",render:function(e){return Yl[e]}},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){A(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}}],w=Object(n.useCallback)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,ol.getAllEnas();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()}),[]),I=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ol.createEna({name:t.name,code:t.code,enaLevel:t.enaLevel});case 3:w(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:return e.prev=9,v(!1),o([]),S(!1),e.finish(9);case 14:case"end":return e.stop()}}),e,null,[[0,6,9,14]])})));return function(t){return e.apply(this,arguments)}}(),[w]),N=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ol.updateEna({id:t.id,name:t.name,code:t.code,enaLevel:t.enaLevel});case 3:w(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:return e.prev=9,v(!1),o([]),S(!1),e.finish(9);case 14:case"end":return e.stop()}}),e,null,[[0,6,9,14]])})));return function(t){return e.apply(this,arguments)}}(),[w]),A=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ol.deleteEna(t);case 3:w(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[w]),M=Object(n.useMemo)((function(){return!u||!u.name||!u.code||!u.enaLevel}),[u]);return Object(n.useEffect)((function(){w()}),[w]),r.a.createElement(r.a.Fragment,null,r.a.createElement(kl,{columns:x,datas:a,loading:k,setLoading:h,text:"\u901a\u7528\u80fd\u529b",onClickBtn:function(){return v(!0)}}),r.a.createElement(We.a,{title:"\u7f16\u8f91\u901a\u7528\u80fd\u529b",visible:b,onCancel:function(){v(!1),o([])},onOk:function(){return function(e){S(!0),e.id?N(e):I(e)}(u)},okButtonProps:{disabled:M},confirmLoading:C},r.a.createElement(ua,{value:u,enabledFilters:T,onChange:o})))},Gl=a(573),Vl=a(105),Bl=Object(Vl.b)()+"/common/uploadFile",zl=Object(Vl.b)()+"/common/upload/getToken?type=SQ_PUBLIC",Hl=a(626),Jl=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=Hl.a.load(n.result);"GPSLatitude"in e&&"GPSLongitude"in e?t():a(new Error("\u7f3a\u5c11\u5730\u7406\u4fe1\u606f"))}}))},Wl=a(426),Ql=a.n(Wl),_l=(a(409),[{label:"\u65e0\u4eba\u673a\u62cd\u6444\u4e0a\u4f20",value:"UAV_CAMERA"},{label:"\u624b\u673a\u62cd\u6444\u4e0a\u4f20",value:"MOBILE_PHONE_CAMERA"}]),Xl={"Content-Type":"multipart/form-data"},Zl=function(e){var t=e.uploadDispatch,a=e.showUploadDraw,c=e.fetchImages,l=Object(n.useState)("UAV_CAMERA"),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)((function(e){var t=e.map((function(e){return function(e){var t=/\.[^.]+$/.exec(e);if(t)return t[0]}(e.name)})),a=[".jpg",".JPG",".jpeg",".JEPG",".png",".PNG",".heif",".HEIF",".heic",".HEIC",".dng",".DNG",".bmp",".BMP",".tif",".TIF",".tiff",".TIFF",".raw",".RAW"];try{t.forEach((function(e){if(-1===a.indexOf(e))throw j.b.error("\u6587\u4ef6\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01")}))}catch(n){return!0}}),[]),m=function(){var e=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Array.from(n),!Sr()(n)){e.next=5;break}return e.abrupt("return");case 5:if(!(n.length>30)){e.next=11;break}return n=[],j.b.error("\u6700\u591a\u9009\u62e930\u4e2a\u6587\u4ef6\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),e.abrupt("return");case 11:if(!s(n)){e.next=14;break}return n=[],e.abrupt("return");case 14:t("setAsyncData",{fileList:n,asyncFunc:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:return e.prev=2,e.next=5,Jl(t);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),e.t0;case 10:return a=function(){return Ql.a.get(zl).then((function(e){return e.data}))},e.next=13,a();case 13:return n=e.sent,(r=new FormData).append("token",n),r.append("fileName",t.name),r.append("file",t),e.abrupt("return",Ql.a.post(Bl,r,{headers:Xl}).then((function(e){j.b.success("\u4e0a\u4f20\u6210\u529f"),b(e.data,u)})).catch((function(){throw j.b.error("\u4e0a\u4f20\u5931\u8d25"),"\u4e0a\u4f20\u5931\u8d25"})));case 19:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()}),a();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.uploadImage(t,a);case 3:c(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sample-img-type"},r.a.createElement(ye.a.Group,{options:_l,onChange:function(e){return o(e.target.value)},value:u,optionType:"button"})),r.a.createElement(rl,{onChange:m,accept:".jpg, .png, .heif, .heic, .dng, .bmp, .tif, .tiff, .raw",limitInfo:".png .jpg .jpeg .heic .dng \u7b49, \u6700\u591a\u9009\u62e930\u4e2a",icon:r.a.createElement(Gl.a,null)}))},$l=a(638),ei=a(635),ti=function(e){Object($l.a)(a,e);var t=Object(ei.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={localFileList:[]},e.handleStatusChange=function(t,a){var n=e.state.localFileList;n[t].status=a,e.setState({localFileList:n})},e}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){T()(this.props.uploadState.fileList,e.uploadState.fileList)||this.initFileList()}},{key:"initFileList",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.uploadState,a=t.fileList,n=a.map((function(e){var t=e.name,a=e.size;return{name:t,size:a,percent:0,status:"active",approxTime:a/1024/50,errorMessage:null,timer:null}})),e.next=5,this.setState({localFileList:n});case 5:this.run();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=this,t=this.props.uploadState,a=t.fileList,n=t.asyncFunc;a.forEach(function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.randomRate(r),n(a).then((function(){return e.randomRate(r,!0)})).catch((function(t){return e.handleUploadError(t,r)}));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"handleUploadError",value:function(e,t){var a=this.state.localFileList;a[t].errorMessage=e.message,this.handleStatusChange(t,"exception"),this.clearTimeout(t),this.setState({localFileList:a})}},{key:"randomRate",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.localFileList,r=n[e].approxTime,c=1e3/r;c=c<100?100:c,c+=200*Math.random(),a?this.uploadFinished(e):n[e].timer=setTimeout(Object(d.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.handlePercentChange(e);case 1:case"end":return a.stop()}}),a)}))),c)}},{key:"handlePercentChange",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.localFileList,n=a[t],r=n.approxTime,!((c=n.percent)>=99)){e.next=7;break}a[t].percent=99,this.setState({localFileList:a}),e.next=12;break;case 7:return l=c+300/r,a[t].percent=l>=99?99:Number((Number(l.toFixed(2))+.2).toFixed(2)),e.next=11,this.setState({localFileList:a});case 11:this.randomRate(t);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadFinished",value:function(e){var t=this.state.localFileList;this.clearTimeout(e),t[e].percent=100,this.handleStatusChange(e,"success"),this.setState({localFileList:t})}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this.state.localFileList;clearTimeout(t[e].timer),t[e].timer=null,this.setState({localFileList:t})}))},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onClose,n=this.state.localFileList;return r.a.createElement(rc.a,{title:"\u4e0a\u4f20\u8fdb\u5ea6",width:350,keyboard:!1,maskClosable:!1,onClose:a,visible:t},r.a.createElement("div",{className:"file-list"},n.map((function(e){return r.a.createElement("div",{className:"item",key:e.name},r.a.createElement("div",{className:"file-name"},e.errorMessage&&r.a.createElement(xa.a,{color:"red"},e.errorMessage),e.name,"\uff0c\u8fdb\u5ea6:",e.percent,"%"),r.a.createElement(Ta.a,{percent:e.percent,size:"small",status:e.status}))}))))}}]),a}(r.a.Component),ai={UAV_CAMERA:"\u65e0\u4eba\u673a",MOBILE_PHONE_CAMERA:"\u624b\u673a"},ni={FINISHED:r.a.createElement(xa.a,{color:"success"},"\u5df2\u5b8c\u6210"),PROCESSING:r.a.createElement(xa.a,{color:"processing"},"\u5904\u7406\u4e2d"),FAILED:r.a.createElement(xa.a,{color:"red"},"\u5931\u8d25")},ri={fileList:[],asyncFunc:function(){return Promise.resolve()}},ci=function(e,t){var a=t.type,n=t.value;if("setAsyncData"===a){var r=n.fileList,c=n.asyncFunc;return Object(E.a)(Object(E.a)({},e),{},{fileList:r,asyncFunc:c})}},li=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],m=an(),b=Object(f.a)(m,2),v=b[0],g=b[1],O=function(){var e=Object(n.useReducer)(ci,ri),t=Object(f.a)(e,2),a=t[0],r=t[1];return{uploadState:a,uploadDispatch:Object(n.useCallback)((function(e,t){r({type:e,value:t})}),[])}}(),k=O.uploadState,h=O.uploadDispatch,C=Object(n.useState)(!1),S=Object(f.a)(C,2),T=S[0],x=S[1],w=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,Jt.queryImageList();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]),I=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.deleteImage(t);case 3:w(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[w]),N=Object(n.useCallback)((function(e,t){return r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:function(){return I(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link",className:"delete-btn"},"\u5220\u9664"))}),[I]),A=Object(n.useCallback)((function(e,t){return e?r.a.createElement("img",{className:"table-thumbnail",src:e,alt:"small-img",onClick:function(){g("imageShow",t.bigImage)}}):"-"}),[g]),M=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.find((function(e){return e.id===n.id})).comment=t,c(Object(y.a)(a));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[a]),L=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.updateImageComment(t,a);case 3:j.b.success("\u4fee\u6539\u6210\u529f\uff01"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),[]),D=[{title:"\u7167\u7247",dataIndex:"thumbnail",render:A},{title:"\u5907\u6ce8",dataIndex:"comment",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le.a,{size:"small",className:"table-input",value:e,onChange:function(e){return M(e.target.value,t)}}),r.a.createElement(ke.a,{size:"small",type:"link",onClick:function(){return L(t.id,e)}},"\u63d0\u4ea4"))}},{title:"\u7c7b\u578b",dataIndex:"source",render:function(e){return ai[e]}},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"createTime",sorter:function(e,t){return s()(e.createTime).valueOf()-s()(t.createTime).valueOf()}},{title:"\u62cd\u6444\u65f6\u95f4",dataIndex:"takeTime",sorter:function(e,t){return s()(e.takeTime).valueOf()-s()(t.takeTime).valueOf()}},Object(E.a)({title:"\u4e0a\u4f20\u7528\u6237",dataIndex:"uploader"},Ga("uploader")),{title:"\u5904\u7406\u72b6\u6001",dataIndex:"status",render:function(e){return ni[e]}},{title:"\u64cd\u4f5c",dataIndex:"action",render:N}],R=Object(n.useCallback)((function(){return x(!0)}),[]);Object(n.useEffect)((function(){w()}),[w]);var q=Object(n.useCallback)((function(){h("setAsyncData",{fileList:[],asyncFunc:function(){return Promise.resolve()}}),x(!1)}),[h]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zl,{uploadDispatch:h,showUploadDraw:R,fetchImages:w}),r.a.createElement(Oe.a,{className:"sample-upload-data"},r.a.createElement(fa.a,{size:"small",columns:D,dataSource:a,pagination:{showTotal:function(){return"\u5171".concat(a.length,"\u6761")},defaultPageSize:30,showSizeChanger:!0},rowKey:function(e){return e.id},loading:u})),r.a.createElement(Qe.ImageViewer,{visible:v.modalShow,url:v.imgUrl,onClose:function(){g("imageHide")}}),r.a.createElement(ti,{visible:T,onClose:q,uploadState:k}))},ii=new(function(){function e(){Object(b.a)(this,e)}return Object(v.a)(e,[{key:"queryWorkSpaceList",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.invoke("WorkSpaceService.queryWorkSpaceList");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{createdAt:e.createdAt.slice(0,10)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createSpace",value:function(e){return g.a.invoke("WorkSpaceService.createWorkSpace",{workSpace:e})}},{key:"updateSpace",value:function(e){return g.a.invoke("WorkSpaceService.updateWorkSpace",{workSpace:e})}},{key:"deleteSpace",value:function(e){return g.a.invoke("WorkSpaceService.deleteWorkSpace",{workSpaceId:e})}},{key:"queryDashboard",value:function(e){return g.a.invoke("WorkSpaceService.queryDashboard",{workSpaceId:e})}},{key:"querySampleSetList",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.invoke("SampleService.querySampleSetList",{workSpaceId:t});case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{value:e.id,createdAt:e.createdAt.slice(0,10),timeRange:"".concat(e.timeRange.beginTime.slice(0,10)," ~ ").concat(e.timeRange.endTime.slice(0,10)),times:[s()(e.timeRange.beginTime),s()(e.timeRange.endTime)],tags:e.tags.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{title:e.name})}))})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteSampleSet",value:function(e){return g.a.invoke("SampleService.deleteSampleSet",{sampleSetId:e})}},{key:"createSampleSet",value:function(e){return g.a.invoke("SampleService.createSampleSet",{sampleSet:e})}},{key:"updateSampleSet",value:function(e){return g.a.invoke("SampleService.updateSampleSet",{sampleSet:e})}},{key:"querySampleDataList",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.invoke("SampleService.querySampleDataList",{workSpaceId:t});case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{createdAt:e.createdAt.slice(0,10),timeRange:"".concat(e.timeRange.beginTime.slice(0,10)," ~ ").concat(e.timeRange.endTime.slice(0,10)),times:[s()(e.timeRange.beginTime),s()(e.timeRange.endTime)],waves:e.waves?e.waves.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{title:e.name,code:e.key})})):[]})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteSampleData",value:function(e){return g.a.invoke("SampleService.deleteSampleData",{sampleDataId:e})}},{key:"createSampleData",value:function(e){return g.a.invoke("SampleService.createSampleData",{sampleData:e})}},{key:"updateSampleData",value:function(e){return g.a.invoke("SampleService.updateSampleData",{sampleData:e})}},{key:"queryAllWaves",value:function(){return g.a.invoke("SampleService.queryAllWaves")}},{key:"queryAllSampleTags",value:function(){return g.a.invoke("SampleService.queryAllSampleTags")}}]),e}()),ui=(a(410),function(e){var t=e.columns,a=e.datas,n=e.loading,c=e.path,l=e.type,i=e.onClickBtn,u=e.hideBtn,o=e.className;return r.a.createElement(Oe.a,{className:o},c?r.a.createElement(q.b,{to:"/app/".concat(c,"?action=edit")},r.a.createElement(ke.a,{type:"primary"},"\u65b0\u5efa".concat(l))):u?r.a.createElement(r.a.Fragment,null):r.a.createElement(ke.a,{type:"primary",onClick:i},"\u65b0\u5efa"),r.a.createElement(fa.a,{size:"small",className:"ai-space-table",rowKey:function(e){return e.id},columns:t,dataSource:a,loading:n,pagination:{showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,defaultPageSize:30}}))}),oi=[{label:"\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0},{label:"\u63cf\u8ff0",filterType:"INPUT",valueKey:"info"}],si=function(e){var t=e.spaceList,a=e.fetchSpaceList,c=e.loading,l=Object(n.useState)([]),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(!1),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii.deleteSpace(t);case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),O=Object(n.useCallback)((function(e){o(e),v(!0)}),[]),k=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id?{name:t.name,info:t.info,id:t.id}:{name:t.name,info:t.info},e.prev=1,!t.id){e.next=7;break}return e.next=5,ii.updateSpace(n);case 5:e.next=9;break;case 7:return e.next=9,ii.createSpace(n);case 9:a(),o([]),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),j.b.error(e.t0.message);case 16:return e.prev=16,v(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[a]),h=[{title:"WorkSpace",dataIndex:"name",render:Object(n.useCallback)((function(e,t){return r.a.createElement(q.b,{to:"/app/algorithm-space?type=setting&manner=dash-board&id=".concat(t.id,"&name=").concat(t.name)},e)}),[])},{title:"\u63cf\u8ff0",dataIndex:"info"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt"},{title:"\u521b\u5efa\u7528\u6237",dataIndex:"createdBy"},{title:"\u64cd\u4f5c",dataIndex:"operation",render:Object(n.useCallback)((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{type:"link",onClick:function(){return O(t)}},"\u7f16\u8f91"),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){g(t.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}),[g,O])}],y=Object(n.useMemo)((function(){return!u.name}),[u.name]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ui,{className:"ai-space-list-card",columns:h,datas:t,loading:c,onClickBtn:function(){return v(!0)}}),r.a.createElement(We.a,{title:"\u65b0\u5efaWorkSpace",visible:b,onCancel:function(){v(!1),o([])},onOk:function(){return k(u)},okButtonProps:{disabled:y}},r.a.createElement(ua,{value:u,enabledFilters:oi,onChange:o})))},mi=(a(1258),a(266)),pi=(a(411),function(e){var t=e.spaceId,a=Object(n.useState)([]),c=Object(f.a)(a,2),l=c[0],i=c[1],u=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii.queryDashboard(t);case 2:a=e.sent,i(a);case 4:case"end":return e.stop()}}),e)}))),[t]);return Object(n.useEffect)((function(){u()}),[u]),r.a.createElement(Oe.a,{className:"ai-dash-board-card"},r.a.createElement(Oe.a,{bordered:!1},r.a.createElement("p",null,"Sample Set\u7edf\u8ba1"),r.a.createElement("h2",null,l.sampleSetSize,"\u4e2a")),r.a.createElement(mi.a,{type:"vertical",style:{height:100}}),r.a.createElement(Oe.a,{bordered:!1},r.a.createElement("p",null,"Sample Data\u7edf\u8ba1"),r.a.createElement("h2",null,l.sampleDataSize,"\u4e2a")),r.a.createElement(mi.a,{type:"vertical",style:{height:100}}),r.a.createElement(Oe.a,{bordered:!1},r.a.createElement("p",{className:"no-data"},"-")))}),di=function(e){var t=e.spaceId,a=e.spaceName,c=e.type,l=e.settingList,i=e.fetchSampleSetList,u=Object(n.useState)(!1),o=Object(f.a)(u,2),s=o[0],m=o[1],b=Object(P.g)(),v=R().headerNav,g=v.mount,O=v.unMount,k="sampleSet"===c?"sample-set":"sample-data",h=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"sampleSet"!==c){e.next=6;break}return e.next=4,ii.deleteSampleSet(t);case 4:e.next=8;break;case 6:return e.next=8,ii.deleteSampleData(t);case 8:i(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j.b.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[i,c]),y=[{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u65f6\u95f4\u8303\u56f4",dataIndex:"timeRange"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt"},{title:"\u521b\u5efa\u7528\u6237",dataIndex:"createdBy"},{title:"\u64cd\u4f5c",dataIndex:"operate",render:Object(n.useCallback)((function(e,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.b,{to:"/app/algorithm-space?type=setting&manner=".concat(k,"&id=").concat(t,"&name=").concat(a,"&sId=").concat(n.id)},r.a.createElement(ke.a,{type:"link"},"\u7f16\u8f91")),r.a.createElement(Ca.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){h(n.id)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},r.a.createElement(ke.a,{type:"link"},"\u5220\u9664")))}),[h,k,t,a])}],E=Object(n.useCallback)((function(e){e&&b.push(e)}),[b]);return Object(n.useEffect)((function(){return g({type:"breadcrumb",items:[{name:"WorkSpace",key:"/app/algorithm-space?type=list"},{name:a,key:null}],onChange:E}),function(){O()}}),[g,O,E,a]),Object(n.useEffect)((function(){i()}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{className:"ai-sample-set-card"},r.a.createElement(q.b,{to:"/app/algorithm-space?type=setting&manner=".concat(k,"&id=").concat(t,"&name=").concat(a,"&action=edit")},r.a.createElement(ke.a,{type:"primary"},"\u65b0\u5efa")),r.a.createElement(ui,{className:"ai-sample-set-list",columns:y,datas:l,loading:s,setLoading:m,hideBtn:!0})))},fi=(a(1260),a(315)),bi=a(430),vi=a(632),gi=a.n(vi),Oi=(a(1270),Object(bi.b)((function(e){var t=e.value;return r.a.createElement("div",{className:"tags"},t)}))),ki=Object(bi.a)((function(e){var t=e.children;return r.a.createElement("div",{className:"selected-tags"},t)})),hi=function(e){var t=e.treeData,a=e.label,c=e.selectedTags,l=void 0===c?[]:c,i=e.setSelectedTags,u=void 0===i?[]:i,o=(e.loading,Object(n.useCallback)((function(e){var t=e.oldIndex,a=e.newIndex;u((function(e){return gi()(e,t,a)}))}),[u]));return r.a.createElement(he.a.Item,{label:a,required:!0,className:"sortable-item"},r.a.createElement("div",{className:"sortable-container"},r.a.createElement(fi.a,{className:"select-tree",defaultSelectedKeys:l.map((function(e){return e.code})),treeData:t,onSelect:function(e,t){u(t.selectedNodes)},multiple:!0,height:232}),r.a.createElement(ki,{onSortEnd:function(e){return o(e)}},l.map((function(e,t){return r.a.createElement(Oi,{key:e.code?e.code:e.key,index:t,value:e.title})})))))},yi=a(633),Ei=a.n(yi),ji=(a(1272),new(function(){function e(){Object(b.a)(this,e),this._events={}}return Object(v.a)(e,[{key:"on",value:function(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)}},{key:"off",value:function(e,t){if(this._events[e]=this._events[e]||[],t){var a=this._events[e].indexOf(t);a>-1&&this._events[e].splice(a,1)}else this._events[e]=[]}},{key:"emit",value:function(e,t){var a=this,n=this._events[e];if(n&&n.length){var r=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(a,r)}))}}}]),e}())),Ci=(a(1273),function(e){var t=e.param,a=e.setParam,c=e.label,l=Object(n.useState)(null),i=Object(f.a)(l,2),u=i[0],o=i[1];return Object(n.useEffect)((function(){var e=document.querySelector(".json-editor"),t=new Ei.a(e,{mode:"text"});o(t)}),[]),Object(n.useEffect)((function(){if(u){var e=t||{};u.set(e);var n=function(){try{var e=u.get();Object(I.e)("jsonText",JSON.stringify(e)),a(e)}catch(t){j.b.error("JSON \u683c\u5f0f\u9519\u8bef")}};return ji.on("json-editor-save",n),function(){ji.off("json-editor-save",n)}}}),[t,u,a]),r.a.createElement(he.a.Item,{label:c,required:!0},r.a.createElement("div",{className:"json-editor"}))}),Si={balance_strat:{default:{type:"PROPORTION",strat_param:.0125,label_change:{levelto:1}},delete:[],specific_label:{}}},Ti=[{label:"\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0},{label:"\u65f6\u95f4\u8303\u56f4",filterType:"DATES",valueKey:"times",required:!0},{label:"\u7a7a\u95f4\u8303\u56f4",filterType:"SPACE",valueKey:"space",required:!0}],xi={name:"",timeRange:[]},wi=function(e){var t=e.spaceName,a=e.spaceId,c=e.sampleSetInfo,l=Object(n.useState)([]),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)(c||xi),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(b.tags||[]),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useState)(b.param?JSON.parse(b.param):Si),C=Object(f.a)(y,2),S=C[0],T=C[1],w=Object(P.g)(),N=oe(),A=R().headerNav,M=A.mount,L=A.unMount,D=N.get("sId"),q=Object(n.useCallback)((function(){w.push("/app/algorithm-space?type=setting&manner=sample-set&id=".concat(a,"&name=").concat(t))}),[w,a,t]),F=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ji.emit("json-editor-save"),t=Object(I.a)("jsonText"),n=D||void 0,r=Object(E.a)(Object(E.a)({},b),{},{createdAt:void 0,createdBy:void 0,times:void 0,id:n,workSpaceId:a,timeRange:{beginTime:b.times[0].format("YYYY-MM-DDT00:00:00"),endTime:b.times[1].format("YYYY-MM-DDT23:59:59")},tags:k.map((function(e){return{name:e.name,code:e.code}})),param:t}),e.prev=4,!D){e.next=10;break}return e.next=8,ii.updateSampleSet(r);case 8:e.next=12;break;case 10:return e.next=12,ii.createSampleSet(r);case 12:q(),v([]),h([]),T([]),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),j.b.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[4,18]])}))),[q,b,D,k,a]),K=Object(n.useCallback)((function(e){e&&w.push(e)}),[w]);Object(n.useEffect)((function(){return M({type:"breadcrumb",items:[{name:"WorkSpace",key:"/app/algorithm-space?type=list"},{name:t,key:"/app/algorithm-space?type=setting&manner=sample-set&id=".concat(a,"&name=").concat(t)},{name:D?"\u7f16\u8f91".concat(D):"\u65b0\u5efa",key:null}],onChange:K}),function(){L()}}),[M,L,K,t,D,a]);var Y=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ii.queryAllSampleTags();case 3:t=e.sent,x(t,!0).forEach((function(e){var t=e.children;e.title=e.name,e.selectable=!0,e.key=e.code,e.children=t.length?t:null})),o(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]);Object(n.useEffect)((function(){Y()}),[Y]);var U=Object(n.useMemo)((function(){return!b.name||!b.times||!b.space}),[b]);return r.a.createElement(Oe.a,{className:"ai-setting-info-card"},r.a.createElement("div",{className:"setting-info-form"},r.a.createElement(ua,{layout:"horizontal",enabledFilters:Ti,value:b,onChange:v}),r.a.createElement(hi,{treeData:u,label:"\u6837\u672c\u6807\u7b7e",selectedTags:k,setSelectedTags:h}),r.a.createElement(Ci,{label:"\u5e73\u8861\u53c2\u6570",param:S,setParam:T}),r.a.createElement("div",{className:"operate-btns"},r.a.createElement(ke.a,{type:"primary",onClick:F,disabled:U},"\u63d0\u4ea4"),r.a.createElement(ke.a,{className:"cancel-btn",onClick:q},"\u53d6\u6d88"))))},Ii={name:"",timeRange:[]},Ni=function(e){var t=e.spaceId,a=e.spaceName,c=e.sampleSetInfo,l=Object(n.useState)(c||Ii),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useState)([]),m=Object(f.a)(s,2),b=m[0],v=m[1],g=Object(n.useState)(u.waves||[]),O=Object(f.a)(g,2),k=O[0],h=O[1],y=Object(n.useState)([]),C=Object(f.a)(y,2),S=C[0],T=C[1],x=Object(n.useState)(u.param?JSON.parse(u.param):Si),w=Object(f.a)(x,2),N=w[0],A=w[1],M=Object(P.g)(),L=oe(),D=R().headerNav,q=D.mount,F=D.unMount,K=L.get("sId"),Y=Object(n.useMemo)((function(){return[{label:"\u540d\u79f0",filterType:"INPUT",valueKey:"name",required:!0},{label:"Sample",filterType:"SELECT",valueKey:"sampleSetIds",optionSource:S,mode:"multiple",required:!0},{label:"\u65f6\u95f4\u8303\u56f4",filterType:"DATES",valueKey:"times",required:!0}]}),[S]),U=Object(n.useCallback)((function(){M.push("/app/algorithm-space?type=setting&manner=sample-data&id=".concat(t,"&name=").concat(a))}),[M,t,a]),G=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ji.emit("json-editor-save"),a=Object(I.a)("jsonText"),n=K||void 0,r=Object(E.a)(Object(E.a)({},u),{},{createdAt:void 0,createdBy:void 0,times:void 0,id:n,workSpaceId:t,timeRange:{beginTime:u.times[0].format("YYYY-MM-DDT00:00:00"),endTime:u.times[1].format("YYYY-MM-DDT23:59:59")},waves:k.map((function(e){return{name:e.title,key:e.key}})),param:a}),e.prev=4,!K){e.next=10;break}return e.next=8,ii.updateSampleData(r);case 8:e.next=12;break;case 10:return e.next=12,ii.createSampleData(r);case 12:U(),o([]),h([]),A([]),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),j.b.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[4,18]])}))),[U,u,K,k,t]),V=Object(n.useCallback)((function(e){e&&M.push(e)}),[M]);Object(n.useEffect)((function(){return q({type:"breadcrumb",items:[{name:"WorkSpace",key:"/app/algorithm-space?type=list"},{name:a,key:"/app/algorithm-space?type=setting&manner=sample-data&id=".concat(t,"&name=").concat(a)},{name:K?"\u7f16\u8f91".concat(K):"\u65b0\u5efa",key:null}],onChange:V}),function(){F()}}),[q,F,V,a,K,t]);var B=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii.queryAllWaves();case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)}))),[]),z=Object(n.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii.querySampleSetList(t);case 2:a=e.sent,T(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(n.useEffect)((function(){B(),z(t)}),[z,B,t]);var H=Object(n.useMemo)((function(){return!u.name||!u.sampleSetIds||!u.times}),[u]);return r.a.createElement(Oe.a,{className:"ai-setting-info-card"},r.a.createElement("div",{className:"setting-info-form"},r.a.createElement(ua,{enabledFilters:Y,value:u,onChange:o}),r.a.createElement(hi,{treeData:b,label:"\u9009\u62e9\u6ce2\u6bb5",selectedTags:k,setSelectedTags:h}),r.a.createElement(Ci,{label:"\u6ee4\u6ce2",param:N,setParam:A}),r.a.createElement("div",{className:"operate-btns"},r.a.createElement(ke.a,{type:"primary",onClick:G,disabled:H},"\u63d0\u4ea4"),r.a.createElement(ke.a,{className:"cancel-btn",onClick:U},"\u53d6\u6d88"))))},Ai=V.a.TabPane,Mi=function(e){var t=e.spaceId,a=e.spaceName,c=Object(n.useState)([]),l=Object(f.a)(c,2),i=l[0],u=l[1],o=Object(P.g)(),s=oe(),m=R().headerNav,b=m.mount,v=m.unMount,g=s.get("manner"),O=s.get("sId"),k=s.get("action"),h=Object(n.useCallback)((function(e){e&&o.push(e)}),[o]);Object(n.useEffect)((function(){return b({type:"breadcrumb",items:[{name:"WorkSpace",key:"/app/algorithm-space?type=list"},{name:a,key:null}],onChange:h}),function(){v()}}),[b,v,h,a,g]);var y=Object(n.useCallback)((function(e){o.push("/app/algorithm-space?type=setting&manner=".concat(e,"&id=").concat(t,"&name=").concat(a))}),[o,t,a]),E=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sample-set"!==g){e.next=7;break}return e.next=3,ii.querySampleSetList(t);case 3:a=e.sent,u(a),e.next=11;break;case 7:return e.next=9,ii.querySampleDataList(t);case 9:n=e.sent,u(n);case 11:case"end":return e.stop()}}),e)}))),[t,g]),j=Object(n.useMemo)((function(){return i.find((function(e){return e.id===Number(O)}))||{}}),[i,O]);return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{className:"ai-space-tabs-nav",onChange:y,activeKey:g},r.a.createElement(Ai,{tab:"DashBoard",key:"dash-board"}),r.a.createElement(Ai,{tab:"SampleSet",key:"sample-set"}),r.a.createElement(Ai,{tab:"SampleData",key:"sample-data"})),"dash-board"===g&&r.a.createElement(pi,{spaceId:t}),"sample-set"===g&&(null!==O||"edit"===k?r.a.createElement(wi,{spaceId:t,spaceName:a,sampleSetInfo:j}):r.a.createElement(di,{spaceId:t,spaceName:a,type:"sampleSet",settingList:i,fetchSampleSetList:E})),"sample-data"===g&&(null!==O||"edit"===k?r.a.createElement(Ni,{spaceId:t,spaceName:a,sampleSetInfo:j}):r.a.createElement(di,{spaceId:t,spaceName:a,type:"sampleData",settingList:i,fetchSampleSetList:E})))},Li=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],o=i[1],s=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,ii.queryWorkSpaceList();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j.b.error(e.t0.message);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[]),m=oe(),b=m.get("type"),v=m.get("id"),g=m.get("name");return Object(n.useEffect)((function(){s()}),[s]),"setting"===b?r.a.createElement(Mi,{spaceId:v,spaceName:g}):r.a.createElement(si,{spaceList:a,fetchSpaceList:s,loading:u,setLoading:o})},Di=F.a.Content,Ri=function(e){e.services;return r.a.createElement(Di,{id:"content"},r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/app/data/satellite-download",component:ja}),r.a.createElement(P.b,{exact:!0,path:"/app/data/satellite-tasks",component:Ha}),r.a.createElement(P.b,{exact:!0,path:"/app/data/tag-regions",component:Vn}),r.a.createElement(P.b,{exact:!0,path:"/app/data/tag-samples",component:Mn}),r.a.createElement(P.b,{exact:!0,path:"/app/data-wave",component:yn}),r.a.createElement(P.b,{exact:!0,path:"/app/sample-file",component:rr}),r.a.createElement(P.b,{exact:!0,path:"/app/sample-management",component:sr}),r.a.createElement(P.b,{path:"/app/sample-task",component:Zc}),r.a.createElement(P.b,{exact:!0,path:"/app/account-marks-color",component:nl}),r.a.createElement(P.b,{exact:!0,path:"/app/sample-dataUpload",component:li}),r.a.createElement(P.b,{exact:!0,path:"/app/tools-upload",component:il}),r.a.createElement(P.b,{exact:!0,path:"/app/standard-publish",component:Ol}),r.a.createElement(P.b,{exact:!0,path:"/app/standard-publish",component:Ol}),r.a.createElement(P.b,{exact:!0,path:"/app/standard-categories",component:yl}),r.a.createElement(P.b,{exact:!0,path:"/app/standard-cors",component:Ll}),r.a.createElement(P.b,{exact:!0,path:"/app/standard-ders",component:Kl}),r.a.createElement(P.b,{exact:!0,path:"/app/standard-enas",component:Ul}),r.a.createElement(P.b,{exact:!0,path:"/app/algorithm-space",component:Li}),r.a.createElement(P.a,{to:"/app/data/satellite-download"})))},qi=F.a.Content,Pi=function(e){var t=e.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{location:t}),r.a.createElement(qi,null,r.a.createElement(W,null),r.a.createElement(Ri,null)))},Fi=(a(1274),function(){return s.a.locale("zh-cn"),r.a.createElement(i.b,{locale:u.a},r.a.createElement(D,null,r.a.createElement(q.a,null,r.a.createElement(P.d,null,r.a.createElement(P.b,{path:"/app",component:Pi}),r.a.createElement(P.a,{to:"/app"})))))});a(1275),a(1276),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Fi,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},17:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return f}));var n=a(165),r=a.n(n),c=a(577),l=a.n(c),i=a(105),u=(a(662),e.localStorage),o={development:{uri:Object(i.b)(),meta:Object(i.b)()+"/meta/invoke/",sky:Object(i.b)()+"/sky/quanta/invoke",sso:Object(i.b)()+"/sso/invoke/",ai:"http://dev-node-02.host.terraqt.net:7123/invoke"},production:{uri:Object(i.b)(),meta:Object(i.b)()+"/meta",sky:Object(i.b)()+"/sky/quanta",sso:Object(i.b)()+"/sso",ai:Object(i.b)()+"/breeze"}},s={ace:{metas:{appName:"hera",appVersion:"1.0.0"},qcp:"1.0.0",headers:{"x-RMB-ksid":l.a.get("SessionId")||""}},meta:{uri:o[i.a].meta,debug:{mock:!1},qcp:"1.0.0",secure:!1,throttle:3,timeout:1e4},message:{uri:o[i.a].message,debug:{mock:!1},qcp:"1.0.0",secure:!1,throttle:3,timeout:1e4},sky:{uri:o[i.a].sky,debug:{mock:!1},qcp:"1.0.0",secure:!1,throttle:3,timeout:1e4},sso:{uri:o[i.a].sso,debug:{mock:!1},qcp:"1.0.0",secure:!1,throttle:3,timeout:1e4},ai:{uri:o[i.a].ai,debug:{mock:!1},qcp:"1.0.0",secure:!1,throttle:3,timeout:1e4}};r.a.config(s.ace),r.a.onError((function(t){"UNAUTHORIZED"===t.code&&(u.setItem("SessionId",null),e.location.href="//sso.terraqt.ink/login")}));var m=new r.a(s.sky),p=new r.a(s.meta),d=new r.a(s.sso),f=(new r.a(s.message),new r.a(s.ai));r.a.getModules}).call(this,a(114))},404:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},454:function(e,t,a){},483:function(e,t,a){},538:function(e,t,a){},577:function(e,t,a){var n;!function(r,c){var l=function(e){if("object"!==typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function e(t,a,n){return 1===arguments.length?e.get(t):e.set(t,a,n)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var a=t._cache[t._cacheKeyPrefix+e];return void 0===a?void 0:decodeURIComponent(a)},t.set=function(e,a,n){return(n=t._getExtendedOptions(n)).expires=t._getExpiresDate(void 0===a?-1:n.expires),t._document.cookie=t._generateCookieString(e,a,n),t},t.expire=function(e,a){return t.set(e,void 0,a)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&void 0!==e.secure?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,a){if(a=a||new Date,"number"===typeof e?e=e===1/0?t._maxExpireDate:new Date(a.getTime()+1e3*e):"string"===typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,a){var n=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return n+=(a=a||{}).path?";path="+a.path:"",n+=a.domain?";domain="+a.domain:"",n+=a.expires?";expires="+a.expires.toUTCString():"",n+=a.secure?";secure":""},t._getCacheFromString=function(e){for(var a={},n=e?e.split("; "):[],r=0;r<n.length;r++){var c=t._getKeyValuePairFromCookieString(n[r]);void 0===a[t._cacheKeyPrefix+c.key]&&(a[t._cacheKeyPrefix+c.key]=c.value)}return a},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var a,n=e.substr(0,t);try{a=decodeURIComponent(n)}catch(r){console&&"function"===typeof console.error&&console.error('Could not decode cookie with key "'+n+'"',r)}return{key:a,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="1"===t.set("cookies.js",1).get("cookies.js");return t.expire("cookies.js"),e},t.enabled=t._areEnabled(),t},i=r&&"object"===typeof r.document?l(r):l;void 0===(n=function(){return i}.call(t,a,t,e))||(e.exports=n)}("undefined"===typeof window?this:window)},580:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACpM19OAAAYIUlEQVR4Ae2ce7BdVX3Hzz7n3tzcvHgkCDqggiBIHBkUH6VqBxWoCFYDyNRayispbaFWbalNVaIVhdEaihQVkEdR/nCmtrUFZEZEiliZ2hmdDiMQWl4hCYkJJJDE5N57dr+f72+tffa9TWoe955z7jQrOXut9Xuttb+/3/qtdfbZSaOxr+xDYB8C+xDYh8A+BPYhsA+B/48IFNPxpj+66duvLtqNnzYa5XDhOygb4+qi1G0FzXT1ESsbbcvRLpBRI+s1Juok2YyPRJ+d0SgWLi1+b32mTUbdnAwj3bSxrCybxWjz5rLdGC7LolEKx/wB0fHtotFui99WjU8a3G4T16gvWXiVPm4RL9EbZWpbD8vFH0w2+MxogMt0Khs3fOcjZaM8sSB0DY6gUfSWIEkBx1oTkrgAGDLwVYqm+jR0sQr6amDX9Lqdorj98uLcf0B8ssu0csCH1911dLsc+WzhKAZUoBWGYCdA3aANiDBIPclR7poOTaIsCRroI5p49NwW37rN5rNDjVl/bMEpuEybFLRMqacsR24RPjMNrlKFU4prEMUdpJdIMYJPTojUE22JgLToYA+NdraVeZHWarrt5sVLi0WTmveZRS7TZgU8t/bOjwm0tzDxiFYlcBUwbRpItYQpsGqXMMcRbMdI0xEeOkUhJ+EFwg811eEIOuhS5Mpm65ufHfjgP0Z/aq7TYgVc8ou7jxkri88AL0B5Y02bJCiOi2hcwKoAeH/AMkc6wGsF2A+ipdp9dPAItT5Fo7VmoDUwZaknu7PvHfCtsmyVI6O3aJNV6glQI84D1JxCDLIAddpJdZa3gwQ8suPkkz2nKEGeHdm2UHHxsuIDGzJQU1X3fQq6b9Xdf6pk8Gaf20GBABVAYEQqEaxOQ2aRPswIuJCLNJT0XOEIdBJPtNiQsRfWiqL1jSuGzvmnsDK11752wKWrv3fs2Njop4W1SgInAc8JByDtEfPDMTiosyeoUxXJEvHSazrPq03uQSTlfTus0Vw9c7jx4Uptiht9m4JIPaOj5S1KC0MJpQBQ8II76QW6fVCrfUTNqYo6pSO+WOEAPpGSQBZb0KKmLamupJ7s175dAfc8dc9livI35jN/J514CeCBiFz8UCteFaLVUw8i5PWgkfEFuB41uKToxyvNVvO2z88+6zs1c1Pe7EsH/NGT3184WrYvd3QqJJU1XKgyXhUyIgbonFwQ0KeSB2ytAvI9tZ2QFj1HUfqI48xmc3Vz9lDXUg9TpaTZRKcfrsvKewdGykaVekgh+XTiHE4KcVpJdIMNvLXUIpk4YgKyAPYJCEfEB3thI9tiTRRLrixOf67bGPTdClj5eOPPBcIJEcpqKUTzCminSGYVsDqAkyVBBEd0q01I55KcQzd08AZtjGYhN/7uC/Pe9y+Z0s26rxxw4WP3vlbR+ikQ95HQ4ZvQAxVhFWkD6EE3wEc25PW42bQA2akFrPVpK+z9DdgekCrq2C+KVfsV7a6nHo3u0jcpaFlZDrTL5q3CZIZTDXukw5kpArQ+icajZGfPVJsnLKOGl9KRatphBxvqYivZ8Q5QtJYsO+D9z8PpRembFfDUivv/QgC83oEpkJwmjBgUgIwINkiiO+2IDCdKXgW1dESY4yRymP56lUg4p6OiLG65esHpd2QLvaj7wgEXPfzj1422Rz4Jmh3gU+CCvwAP8AAXBBX/RjFBpnYZu27oZySNO8lKm6xlbMw2ms3mM8Xg7I9k0V7VPU9BS8qfDG4v9ayn0RgE3Hw6oW2wBR4Akl7qX6aCH/RIKTrxpAdtyGY7OVVZHs+ltNVotJZcfcBJPUs92eE9XwG/fHhkqRA+HpAd/epQDD5Nrwr1/SevECSQj3RjIfFj9cBTAevwoDs2RV8rQaybr3nJu++0XI8vPXXAhx558LhyZOwv9SXIiPuEI3RyCYeEM5yCklc67RB2NhK2oZ8MgDU/OyadSEG2/MycmQM9Tz35HnuWgkg9jZHyVsXtYD6VRNgKQKebSC85lUQw11MObd2GZCP9AzxfvNRXjPtjp3CryMDXXtBsLr7qwJM3Qu2H0rMVsPmh9icE3HFEr4GnAtG0WRLlmRVRrF54gR0YaW0Y+tDkgzNSGuLxctglviJN8RS01Shuuvalp96FZL+Unjjg3J/++/Ejo+2lkWKIVpAE+/R8BqzVB3geLVPoh7xaotfTTfgF0GVLHVwXK0DX5CyxVs6dXXzUxvro0ur2XJY99NCMtWOjdwqjl9bHTvGeSLEnBC0c4LajHBH1IsTtmKCgk9QTL8uY32ye8zeHnPxQkuibqusr4OFtWz+p+H0dgFYRS8Qn8Cqa+PyNRwjRNpAsABooCGhxXEeaoskqgJgKK6LZ+vrXDnvHdzOpn+quOuCcn/3s9e2RkY/n00nCUHgAY04dCT2AVGZKway2+NAqaWCMHtp+3k+6cTbLstStp2fOHe671MPsKV1zwNlKPeWW7beWRTEQIZzAFYZaEZqKYzldPTddRB8X0UkuRCVLtNf2A2wlni2or1dLFn95/ls2ZYv9VnfNAQL/cmH12gxahDbQQ9Gf9KWKY2S8p0P08u0WCX18pg+n+Ud0kARsfVgZNJyGSDl2mjbwZnHjDYe//W5E+7V0xQFnPvifJ5TtscuqlAFg5B+jR9gmR4AjxWEMP2SqbjB1xWHuWNYrCHsimsylKJ6aVc74WJLq2yrfxpRN8NIVK4ZWrd/yH4JnYbxaEhFKsg4QAS6O9naDVgLFX469PpAXQfSYrGp/fUSuxjMz9UWX/s/Ff9hkyzNG0rGlMREYSUVC0cQ2G0+Q42pbmkMclS2ex080uprTmgMWvOeSZXXBupmdtKd8Baxct01zai4ErAhSEgpA5TO/7tYrgBkCkPr62zn9JHmx/IsY3kgbsoyEjnho5kIKao+1X6O09RrTwE7gj4GtUhkWQazIX9g0fjs7R9+YbdZzRM/T0xRjLHj5i17BmxbSY17NorVIN9rxUp7Mr6ixOmVl0QOPvLFsbP83zb0VN635akS3DUInYk33bICSSGRaAasB0Y2iF/TguY8O4MG3IL+KxTimo5PsVmMgb9s74EG3LVVuJ1u2k+UZH28GT3Zvv/aQ034H6u4W3+buKu2KPKlnTI+Z9etVi+Okpu4ooq3Ac9/PcRxZ6RlOomfZePwsWePV0cdGwGMXSEBI8MM79PyOD+iI7mdD6Ht8iTEXywXfKOZnSEnO9tBNOlkeW5U+SYtxG8WaweHmpYywJ2XKUtCTa0Y+o8kdG9GnqfnmYs76JUrdRIAlhHViSUATZbTF1/2RqmAgjS2TqfGijWdeYlpO+pnfIduuNCURdtywMzVmGt9zYfwYUVNQmxXDcFZQk4bti9YuLl6+32/u8Tuk2WYyPTnVb93/6Jv12t8Dyo4tY5SWPG33dTf1tpe8hvYmbVk6jj/VE3UAMNCobCV7gVDYDhlsJLu1MQG3Pn6MO17O+hPkYi4xPvp6xP2N6w495Xc1xB6XSU9B5937+Mz2GK8UlnrOpNSiWccGltOMIXEkE80EEiGV235s7D5yscyrlCPZyhaPl5FzBCfbpBfLRO0U9ivGD/kYH1uRsjpzznMjErKs76ssVg/NnbPXb1NMegpa1xj5K6F+DBN2ESBOKY4mbgKExEts6vzaoFNTXgGIhYXQl57TgVCyukIwv2qST0xeEVlJum7qEumFqE/jY0njMpWok211Coip0OLDuLnlJ7ciDhSt31++34l7nHrSELac23tdn/6DFb9WjjV+qEn6KTJn+Zi4Zqx74DaqE0ZKS0EHnJA1IHaWRBMNG6SJ3KfO7Sp9sViSXMjXZCbYs24aP9vZUZ1p9XSIbe1Xt13/yneey4z3tkzaCiD1PDvWvlk5QeCDv9yg/BJHQ4HBTLnIFwAV0deJLbN1x3nzzXJZH2UDTC1ltyXPH96IIH3ESkMyBkKuo++h7bhYhSHPuEQ5BcBjXkFDLr99oWdYjCSZ5upWMbDXqSdGnMSHcWvGyis04aO59QAlbj7fHAMGIME3WNxtrdT5AIxkB55okn4MCnBwJvSACXLs6S8pJ6e1Cl2PI6vwAVMfxqsXd70yZFQdyyQDnol1G0u+cvjbJu0dUuzudTnlnidOLEbL+3UmC2yMAjeA6ahzG8CIpJyKMt+1pDtfwOr6nbYBn2DTtmsppfPII8b3mLW5xJgdm+PmluUYg7RmR4SsvtHc+vUjTjoPq5NVnKX3xtjZP3p6uOF/SME/IyWqmLQs0s4nFbWrH9fzSSN9caqfOnSbtS86YSvclf8hHqcdZtsZx/oMJ7v5xFKN5fkIUc8l6SFn/dqcLJf0PT+ppLkgm05jq+YW+/8J2pNZ9noP2Lip/Jy+7R7lwOFedTNMv/qwHwRqohJJlkz3YAXp1OiQ4PqSxNAzaIIj61NjlwpQVVM4SVlZKyLs4rSQ85nXekk82Yh0F7Fo8/WxPQwSrcVXH378pL/Ilabtue/25V13rXproz16n+56p6knkBSAuj/FbbpzAI12Pt34xqHpk9vj0xF5O+s7jDtyugvr1NIQdrQV2N6O0t1EWh6zGl+2Mk31zbce87YLdhugXVDY4xVwxk9Wzdq8ZuxmTU4hBpxMmHCpj5pokEQPVtB0DSdwVYRWq6AeEjVb2I5TFWDjzWBmcevLVr04snc2p2qlMOcdjJ/G1rjPDA0OTdmLXHvsgM2r25/THI80qrqHSBEZ3FRLoAIWwQQGMBmcBD7keDyd3+/P+qED3wceAY8945yexYCjF4aEqpOPrOMwRLm4XafZSzClnOzZwcimOfFsCnvNsrn4+ledMGUvcmkGu1/ecceqtwuQHxTaZQEHOA2Kb1LNeioAoNRHzvKJZtW6bKWPZPxgg/zO5MalEaYhW9V8arZ2Nr5VdjB+DNjmR52bblt44oXITVXZ7RVwxj+Xs14YXXOTADIuxBGFTkRdUKINJ0Wa+fRVRCLweMpIxOWS9WPVsClGarCI5JO3PZhXQse0aZHUII6fi5kmmuUVw/hu7GB8Jqcf81cOz2xN+dsUu+2A50efvVKL+1UGC/iSGwyIbzzA9a3CM9IJEHcBXX12yMDK+FT6cBFQMUjR0jiRfpy6pOdd34MbScmGsaRqLSbnb8liMR7BjpzTlnjuSxIzWT/dENVFU5l6YoLVrebu/12f9O11vzFatO/VbTFlCXeWfP3E4tMHdycpA+JI50ZDJ+iJbwHSDQ1oNZvomw+tQw+j42lZznNi8aS5ZXqubR92NScklW4QSPNT6rnx9uPetBixqS6e6q4Mcsrd5eyRsn0TqTl/0UmPZaVOpIEU5hSpqc8XMQemeNTxpYlINjxJD3rQsBO+xVbWgR+bcB43f+mqfv2y/c742QZy/oifdUNH5j3fNL80lmlF8XQx64CuvU2xyyloywvrrxKAR4ARYZn/SZB6EPQxwtF032JBdjQCcj6/05Z8KgRfOIioxpaKCIVCMcvFL2ah4/SXbDFsftyMbKiHjUiTMa98ysJ0TmceRpd4dEhyI3SKi7551FFde5Er3S1T2Xn59b9/7iQ9+LpHcQRUBjluNN9w58QCP/PCD9GP9KMxvPQ7MlnWtVMAgDIXyXispA8ppQhkx+nVfiCvjz9OhnF9t9kuNuJeso76N3zrDW9YwlDdKru0Atqj7bdq7reUfsDP2VjT881ERNOJCFY0aQMgEqld8psaXvJEo/gCOLjkCEnpXRxoUKk2bm0u2DI6sH+WQtjgpXe5PXwynwwRxhKCkwr8/O632tbxGPDz/JK83tkYKkZeOHb+1q6lnjTLavq53/P6Jbe/eHBj68hDcsn89Cwh0Mex/AHY2OVTGhcdWqYnsKE5BZmni/Xt/7CHXOZRDzRP3vyuwe91G4AqJro98E7H27ztOi2h+cZGAUqdl5fys/tVoKdll2V52OaXpqSSZayBHD8OJbpt2m7YlsxXewE+U+grBxx8w/pzFOSLAnDAAfuUJlR7E6dbAR8OcV9kA8w1qVjfwAfkflVFcnaGbEDVwnhieGjwzyD3ouQs2Yuxx415yE0vHFSMte8QzLNI+Pk0lEGNPvRxaupAyIhnZkeuspMU7TKJ2a96WbTVaJ214ZTWIxOtdqvfPytg27brFOELDBB7e4p099Vx9DrygwfdcDuSQTQgy7TQzylMbK2EvHKo8YcOE1/ZeNrg97sF9o7G6QsHHHLd+rMF2FkBWqQGgySInYKEnYHlDhLQGcwAPPETyNkJ1DntZDlM+PRZFo8PzR7iv8bpael5CnrZ1zYtaPCP9hqN2YGEoKrlGYCr0khyQ52W/WFdo2xumEq6eRXZDgpNPWRuNc7ccOrgo5Vgjxq9XwHbt12rez8oYDOCnRMLoACYUpI5TjcQtTImnGoiJUkKeeRUG3i182qCh51mu/zb508fvhdLvS679EVsqiZ56DW/WDRWts/BvrBxMWjgCHABuyt3kYAMwIROVlJteen5KSsOMvAoqGCP9AT6RfO/h2YNf9z0Prj0LAUdc+2m+Vvb20k9cyamGJACK0qHB3aJqgoJ4690lZ1Wy1xJj802dKj1bEnvV+l/4j5jcEVY7/21Zylo0+jWLytNHGwgiU6ViHo3xkdwjuZ0OiK9QIo009FDHxrMcSvANMm3y2ufXzR8H2P1S+mJAw5b/uz79GXotzNYjlEAFSqmUUdcez8g1COOxQBMFV51Cb0EOntC4pmPDA2ca/3yv2bMm8X/ytVXpesp6NAvbTyw0R7hvyqY00GigrtDUst4kjpquSXaIJo2gXjoIxmRQNxKqtVmlUAk9QwMDLx/7RmDj4nSV6XrK6DZ3nqNkDmkilawFCSRMgI9eNDsFkgg6TrRBbpf9oImBvLoG/CaXtaX7DXrzhz+V6T7rXTVAYddtea9+teL/sdsBpy0IURoUwOyHQOgpA6nj8xLQENDNDklgx/6HdlwGDrlYzNnz1lqpT68dM0BL//88wcIjK8SlYRqRDmRDOiJFsjaGQBqUE3TxeGdAE6OCxlbrH1X6OiJw9vC5686o9iCmX4s3fseUGy9WlHr/6KGPG48HabAmIBVk5aj2/BHtANc/OxISxLj9KGJzwYgR6JhLZzcal6z7oNzf2iBPr10ZQW84orV79Gv4ucCdUYot+vpJ9KOft4E/IR91U5R36GHrY4+e4DOqZ3VtWLmjP5NPTkeptwBr1z+nH5abF8PcHWwDJRmkR1BHR/At3A4oQZ8fvzQOVpO0JdastdutorzV36g2JpvtF/rKXdAY/OW5QLsZQY3RXU4IxySHeO0k5wEjZTiDRnkiGpVCdzAUo6pdNwOMk7SWw5Xr/3QvAeC0t/XKXXAKz799LsF/nkGWcB0IhuQMqDRRsbAg5fTSACcQc9gZxuk/Ni8+VVLHa8a0ZrNR2fMnvcJzEyHMmUOOOLKDfvpycv1Bk5IGEhqohtkANxPOWNDDpqI6cknetC8L6imzdk/ahh8oh+1OLywWjanRerR7F2m7BTU3rr5S0LkUG+iGkrxLPA4pYCcwAJJCpHrEgSC2SKpyn1LiWeH8FAumWE/4BTLktILV8vXXjDvRzY3TS5TsgKO/NRTpypaL4gTjJBypAZo1QoQcOAGkJkW/Ug9ppuf9ZOsKu8N2MQJ9PXRz4uPzBrYf9qkHk9cl0l/FnTksvXzyrHR7wrG/fIgCs2IWAhqO+gd2kliAt9n+soDoeOIz/pWs7uSgWZ7oNV479MXznoiEaZNNekroBx58Ys6jx828dstiMSKiIh19KZVUI9ke6e+YlCsIl0WaivGPqJfNP76mcXzf4zodCuTugcctfTJk/XPesa/1k2gJgA7jSDmb7TsC7nd2ScCSvdZMv4xhvQkuveA0BH8Dw8NHfip6QZ8nu+krYCjr1o3t91u3+ioTNadJIhyohSQRY+2GkYSetC8uSZHsXoquldDkkM2ydupRTHWKhvnPXF+8UuRp2WZNAe0N7z4BYH7coANMIVmDTwAy0dKakOcZA2q4KP2qaay0QG+siuRfETVi1xfXHnJggdRm65lUlLQqy978p2K/iUgaBDzpqpaWAp7QluQm5mggpFpNC0jSiUUwv9LP9QkXvx81lELLk/Wpm211ytg4bK1cxTaNwrqdLwBS6HEX0U6bUNZo0W/I2cZDvMSd7Es+T7s5A3dNm2vGNO33/MeO63YljSmbTUJK+Cg7bMHxt70Qg2CiN20Gmo/PNZEdt7ECXOyBZRf1Ce9s5W0tg+MjT71h/tP2v9Ykszuq/YhsA+BriPwP/y+CHiqjsMxAAAAAElFTkSuQmCC"},581:function(e,t,a){e.exports=a.p+"static/media/logo-white.4da645a8.png"},642:function(e,t,a){a(643),e.exports=a(1277)},662:function(e,t){},741:function(e,t,a){},765:function(e,t,a){},858:function(e,t,a){},92:function(e,t,a){"use strict";(function(e){a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s}));var n=a(103),r=a(7),c=e.localStorage;function l(e,t){c.setItem(e,t)}function i(e){return c.getItem(e)}function u(e){return c.removeItem(e)}function o(e,t,a){var l=c.getItem("".concat("m-").concat(e))?JSON.parse(c.getItem("".concat("m-").concat(e))):{};l=Object(r.a)(Object(r.a)({},l),{},Object(n.a)({},t,a)),c.setItem("".concat("m-").concat(e),JSON.stringify(l))}function s(e,t){var a=JSON.parse(c.getItem("".concat("m-").concat(e)));return t?a?a[t]:null:a}}).call(this,a(114))},970:function(e,t,a){},972:function(e,t,a){},983:function(e,t,a){},986:function(e,t,a){},987:function(e,t,a){},988:function(e,t,a){}},[[642,2,0,3]]]);
//# sourceMappingURL=main.aa0a54f1.chunk.js.map